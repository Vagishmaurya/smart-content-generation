<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fisheries and Bee-keeping - Complete Aquaculture & Apiculture Journey</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #006064 0%, #0097A7 50%, #00BCD4 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.2" d="M0,288L48,304C96,320,192,352,288,346.7C384,341,480,299,576,288C672,277,768,299,864,314.7C960,331,1056,341,1152,325.3C1248,309,1344,267,1392,245.3L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: wave 28s linear infinite;
        }

        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #00BCD4, #FFC107);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .water-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #00BCD4;
            border-radius: 50%;
            animation: water-pulse 2s ease-in-out infinite;
        }

        @keyframes water-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 340px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #00BCD4;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(0, 188, 212, 0.2);
            border: 1px solid rgba(0, 188, 212, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(0, 188, 212, 0.3);
            border-color: #00BCD4;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 188, 212, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #FFC107, #FF9800);
            border-color: #FFC107;
            box-shadow: 0 0 20px rgba(255, 193, 7, 0.5);
            animation: pulse 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #006064 0%, #0097A7 50%, #00BCD4 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 380px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #00BCD4;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(0, 188, 212, 0.1), rgba(255, 193, 7, 0.1));
            border: 1px solid rgba(0, 188, 212, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #00BCD4;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #FFC107;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00BCD4, #FFC107);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-mini.active {
            color: #FFC107;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #4CAF50;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #00BCD4;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "🐟";
            position: absolute;
            left: 0;
            color: #00BCD4;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(0, 188, 212, 0.1));
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "🌊";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #FFC107;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(0, 188, 212, 0.3);
            border-color: #00BCD4;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(0, 188, 212, 0.4);
            border-color: #00BCD4;
            box-shadow: 0 0 20px rgba(0, 188, 212, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #006064 0%, #0097A7 50%, #00BCD4 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-heart {
            font-size: 60px;
            animation: water-pulse 1.5s ease-in-out infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00BCD4, #FFC107);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 188, 212, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #00BCD4, #FFC107);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(0, 188, 212, 0.3);
            border-color: #00BCD4;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 188, 212, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00BCD4, #FFC107);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-heart">🐟</div>
            <div class="loading-text">Preparing Your Aquatic Journey...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Fisheries and Bee-keeping</div>
        <div class="exhibit-subtitle">
            <span class="water-indicator"></span>
            Aquaculture & Apiculture Sciences
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>🗺️</span>
            <span>Aquatic & Apiary Journey</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('fisheries')">
                <span>🐟</span> Fisheries
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('marine')">
                <span>🌊</span> Marine
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('inland')">
                <span>🏞️</span> Inland
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('composite')">
                <span>🏭</span> Composite
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('fishfarm')">
                <span>🎣</span> Fish Farm
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('beekeeping')">
                <span>🐝</span> Beekeeping
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('honey')">
                <span>🍯</span> Honey
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('asianbees')">
                <span>🐛</span> Asian Bees
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="Fisheries Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/models/642c6515d893474a8fc8f129491efcac/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">🐟</div>
            <div class="info-title">
                <h2 id="stepTitle">Fisheries Overview - Aquatic Food Production</h2>
                <div class="info-subtitle" id="stepSubtitle">Harvesting the waters for protein</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Aquatic Learning Progress</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('fisheries')">Fis</span>
                <span class="step-mini" onclick="loadJourneyStep('marine')">Mar</span>
                <span class="step-mini" onclick="loadJourneyStep('inland')">Inl</span>
                <span class="step-mini" onclick="loadJourneyStep('composite')">Com</span>
                <span class="step-mini" onclick="loadJourneyStep('fishfarm')">Far</span>
                <span class="step-mini" onclick="loadJourneyStep('beekeeping')">Bee</span>
                <span class="step-mini" onclick="loadJourneyStep('honey')">Hon</span>
                <span class="step-mini" onclick="loadJourneyStep('asianbees')">Asi</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            Fisheries provide essential protein and livelihoods for billions of people worldwide. This tuna represents marine fisheries, while aquaculture - farming fish in controlled environments - is the world's fastest-growing food production sector, providing sustainable protein for growing populations.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🐟</span> Key Concepts
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>Aquaculture is fastest-growing food production sector</li>
                    <li>Fish provide high-quality protein and omega-3 fatty acids</li>
                    <li>Sustainable fishing prevents overexploitation</li>
                    <li>Both marine and freshwater systems are important</li>
                </ul>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Aquatic Fact!</div>
            <div class="fun-fact-text" id="funFact">
                Fish farming now produces more fish for human consumption than wild capture fisheries - over 82 million tons annually!
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🎯</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                Understanding the importance of fisheries and aquaculture for global food security and sustainable protein production.
            </div>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            🔊
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ▶️
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ℹ️
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>🚀</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>🎯</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Fisheries and Beekeeping Content
        const JOURNEY_DATA = {
            fisheries: {
                title: "Fisheries Overview - Aquatic Food Production",
                subtitle: "Harvesting the waters for protein",
                icon: "🐟",
                modelUrl: "https://sketchfab.com/models/642c6515d893474a8fc8f129491efcac/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Fisheries provide essential protein and livelihoods for billions of people worldwide. This tuna represents marine fisheries, while aquaculture - farming fish in controlled environments - is the world's fastest-growing food production sector, providing sustainable protein for growing populations.",
                concepts: [
                    "Aquaculture is fastest-growing food production sector",
                    "Fish provide high-quality protein and omega-3 fatty acids",
                    "Sustainable fishing prevents overexploitation",
                    "Both marine and freshwater systems are important"
                ],
                funFact: "Fish farming now produces more fish for human consumption than wild capture fisheries - over 82 million tons annually!",
                objectives: "Understanding the importance of fisheries and aquaculture for global food security and sustainable protein production.",
                narration: "Welcome to the world of fisheries - one of humanity's oldest food production systems! This magnificent tuna represents the vast potential of our oceans and waterways to provide nutritious protein. Fisheries include both capture fisheries, where we harvest wild fish from oceans, rivers, and lakes, and aquaculture, where we farm fish in controlled environments. Remarkably, aquaculture has become the world's fastest-growing food production sector, now producing over 82 million tons of fish annually - more than wild capture fisheries! Fish are nutritional powerhouses, providing high-quality protein with all essential amino acids, plus omega-3 fatty acids that are crucial for brain and heart health. Over 3 billion people depend on fish as their primary source of protein. The challenge is sustainability - many wild fish stocks are overfished, making responsible aquaculture increasingly important. Fish farming can produce more protein per acre than any land-based livestock, using less water and producing fewer greenhouse gas emissions. This makes fisheries crucial for feeding our growing global population while protecting the environment."
            },
            marine: {
                title: "Marine Fisheries - Ocean Harvest",
                subtitle: "Saltwater protein production",
                icon: "🌊",
                modelUrl: "https://sketchfab.com/models/642c6515d893474a8fc8f129491efcac/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Marine fisheries harvest fish from the world's oceans and seas. This tuna exemplifies commercially important marine species that support global food security and coastal economies. Marine aquaculture is also growing rapidly in coastal waters.",
                concepts: [
                    "Oceans provide 80% of global fish catch",
                    "Tuna are highly migratory pelagic species",
                    "Marine protected areas help fish stocks recover",
                    "Sustainable fishing quotas prevent overexploitation"
                ],
                funFact: "Bluefin tuna can swim at speeds up to 75 km/h and dive to depths of 1,000 meters while maintaining their body temperature above water temperature!",
                objectives: "Learn about marine ecosystems, commercial fishing methods, and sustainable ocean management.",
                narration: "This magnificent tuna showcases the incredible diversity and productivity of marine fisheries! Oceans provide about 80% of the world's fish catch, supporting billions of people and countless coastal communities. Tuna are among the ocean's most remarkable fish - highly migratory species that can travel thousands of kilometers across ocean basins. Bluefin tuna are particularly impressive, capable of swimming at speeds up to 75 kilometers per hour and diving to depths of 1,000 meters. They're also warm-blooded, maintaining their body temperature above water temperature, which allows them to hunt effectively in cold, deep waters. Marine fisheries face significant challenges from overfishing, climate change, and pollution. Many commercial fish stocks have declined dramatically - some tuna populations have fallen by over 90% since the 1950s. The solution involves sustainable fishing practices: setting science-based quotas, establishing marine protected areas where fish can reproduce safely, using selective fishing gear that reduces bycatch, and international cooperation to manage migratory species. Marine aquaculture is also expanding rapidly, with fish, shrimp, and seaweed farms in coastal waters providing sustainable protein while reducing pressure on wild stocks."
            },
            inland: {
                title: "Inland Fisheries - Freshwater Resources",
                subtitle: "Rivers, lakes, and ponds",
                icon: "🏞️",
                modelUrl: "https://sketchfab.com/models/65f4973ab75e45d4b041532fda581d6a/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Inland fisheries utilize freshwater resources like rivers, lakes, and ponds. This rohu represents important freshwater species that provide protein and livelihoods for rural communities, especially in developing countries where freshwater aquaculture is rapidly expanding.",
                concepts: [
                    "Freshwater aquaculture fastest-growing in Asia",
                    "Rohu is major Indian carp species",
                    "Pond culture systems are highly productive",
                    "Rural communities depend on freshwater fish"
                ],
                funFact: "India produces over 11 million tons of freshwater fish annually, with rohu being one of the three major Indian carps cultured together!",
                objectives: "Understand freshwater aquaculture systems and their importance for rural livelihoods and food security.",
                narration: "Meet the rohu - one of India's most important freshwater fish and a star of inland aquaculture! Inland fisheries encompass all freshwater systems - rivers, lakes, reservoirs, and human-made ponds. While marine fisheries get more attention, freshwater aquaculture is actually growing faster, especially in Asia. India alone produces over 11 million tons of freshwater fish annually! Rohu is one of the 'three major Indian carps' - along with catla and mrigal - that are commonly cultured together in pond systems. This combination works beautifully because each species feeds at different levels: catla feeds on plankton near the surface, rohu feeds in the middle water column, and mrigal feeds at the bottom. This polyculture system maximizes productivity from the same pond. Freshwater aquaculture is particularly important for rural communities in developing countries, providing both protein and income. Small-scale fish farming can be integrated with agriculture - pond water can irrigate crops, and crop residues can feed fish. Fish also fertilize the water, which then fertilizes crops. These integrated systems are incredibly efficient, producing more food per unit area than either fish or crops alone. Inland fisheries also play crucial roles in maintaining freshwater ecosystems and supporting biodiversity."
            },
            composite: {
                title: "Composite Fish Culture - Integrated Systems",
                subtitle: "Multiple species cultivation",
                icon: "🏭",
                modelUrl: "https://sketchfab.com/models/65f4973ab75e45d4b041532fda581d6a/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Composite fish culture involves raising multiple fish species together that utilize different ecological niches in the same pond. This rohu would typically be cultured with surface feeders like catla and bottom feeders like mrigal to maximize production efficiency.",
                concepts: [
                    "Different species utilize different pond zones",
                    "Compatible species prevent competition",
                    "Higher productivity than monoculture",
                    "Natural polyculture mimics ecosystem balance"
                ],
                funFact: "Composite fish culture can produce 3-5 times more fish per hectare than traditional single-species farming!",
                objectives: "Learn how composite culture systems optimize resource use and increase aquaculture productivity.",
                narration: "Composite fish culture represents aquaculture at its most intelligent - combining multiple species that work together like a natural ecosystem! This rohu would typically be part of a three-species system with catla and mrigal. The beauty is in how they use different parts of the pond: catla feeds on plankton in the upper water column, rohu grazes on column feeders and small animals in the middle zones, and mrigal scavenges organic matter from the pond bottom. This eliminates competition and maximizes the use of all available food resources. The result? Composite systems can produce 3-5 times more fish per hectare than single-species farming! Modern composite culture has expanded beyond the traditional three Indian carps. Farmers might add grass carp to control aquatic weeds, silver carp to eat phytoplankton, common carp for efficient organic matter utilization, and even prawns for additional income. Some systems integrate ducks or chickens above the ponds - their droppings fertilize the water, promoting plankton growth that feeds the fish. The key to success is understanding each species' feeding habits, growth rates, and environmental requirements. Compatible species are those that don't compete for the same food or space, have similar water quality needs, and mature at different times to spread harvest throughout the year."
            },
            fishfarm: {
                title: "Fish Farm Study - Activity 12.5",
                subtitle: "Hands-on aquaculture learning",
                icon: "🎣",
                modelUrl: "https://sketchfab.com/models/65f4973ab75e45d4b041532fda581d6a/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Activity 12.5 involves studying real fish farming operations to understand pond management, feeding systems, water quality monitoring, and harvest techniques. Students observe how theoretical knowledge applies to practical aquaculture management.",
                concepts: [
                    "Pond preparation and water quality management",
                    "Feeding schedules and nutrition requirements",
                    "Growth monitoring and health assessment",
                    "Integrated farming with agriculture"
                ],
                funFact: "Well-managed fish farms can produce 5-10 tons of fish per hectare annually, providing protein equivalent to 50-100 tons of grain!",
                objectives: "Experience real aquaculture operations and understand the practical aspects of fish farming management.",
                narration: "Activity 12.5 takes you into the real world of fish farming! When you visit a fish farm, you'll see theory transformed into practice. You'll observe how farmers prepare ponds by removing predatory fish, applying lime to adjust pH, and adding organic fertilizers to promote plankton growth. Water quality management is crucial - farmers monitor dissolved oxygen levels, temperature, pH, and ammonia concentrations. Fish are sensitive to these parameters, and poor water quality can cause disease outbreaks or poor growth. You'll see different feeding strategies - some farmers use commercial pellets with precise protein levels, while others use agricultural byproducts like rice bran, oil cakes, and kitchen scraps. Watch how farmers assess fish health by observing swimming behavior, appetite, and physical appearance. Growth monitoring involves periodic sampling to measure fish size and weight, helping farmers adjust feeding rates and predict harvest times. Many fish farms are integrated with other agricultural activities - you might see vegetable gardens irrigated with pond water, pigs or chickens housed over ponds, or rice-fish systems where fish grow alongside rice crops. Well-managed farms can produce 5-10 tons of fish per hectare annually! This hands-on experience helps you understand that successful aquaculture requires knowledge, skill, and constant attention to detail."
            },
            beekeeping: {
                title: "Beekeeping - Managing Honey Bees",
                subtitle: "Apiculture fundamentals",
                icon: "🐝",
                modelUrl: "https://sketchfab.com/models/48fef512832c4c0185328b536ec96de3/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Beekeeping involves managing colonies of honeybees for honey production and pollination services. This Apis mellifera represents the European honeybee, the most widely managed bee species worldwide, known for high honey production and gentle temperament.",
                concepts: [
                    "Apis mellifera is most common managed bee species",
                    "Colony consists of queen, workers, and drones",
                    "Bees provide honey and crucial pollination services",
                    "Modern hives allow easy management and inspection"
                ],
                funFact: "A single bee colony can contain 50,000-80,000 bees at peak season and produce 30-60 kg of honey annually!",
                objectives: "Learn about bee biology, colony management, and the dual benefits of honey production and crop pollination.",
                narration: "Welcome to the fascinating world of beekeeping! This European honeybee, Apis mellifera, represents one of humanity's most valuable agricultural partners. Beekeeping, or apiculture, involves managing colonies of these remarkable insects for their honey and, increasingly importantly, their pollination services. A single colony is like a superorganism containing 50,000 to 80,000 bees at peak season - one queen who lays up to 2,000 eggs daily, hundreds of male drones whose only job is to mate with virgin queens, and tens of thousands of female workers who do everything else. Worker bees have different jobs based on their age: young bees work inside the hive cleaning, feeding larvae, and building wax comb, while older bees become foragers, flying up to 5 kilometers from the hive to collect nectar and pollen. Modern beehives use moveable frames that allow beekeepers to inspect colonies, manage diseases, and harvest honey without destroying the comb. Apis mellifera is prized for its high honey production - a good colony can produce 30-60 kilograms of honey annually - and its relatively gentle temperament that makes it safe to manage. But perhaps more importantly, these bees are crucial pollinators. About one-third of our food depends on bee pollination, including fruits, vegetables, nuts, and oilseeds worth hundreds of billions of dollars globally."
            },
            honey: {
                title: "Honey Production - Liquid Gold",
                subtitle: "From nectar to honey",
                icon: "🍯",
                modelUrl: "https://sketchfab.com/models/48fef512832c4c0185328b536ec96de3/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Honey production involves bees converting flower nectar into concentrated honey through enzymatic processes and water evaporation. This complex process creates a natural product with antimicrobial properties and indefinite shelf life.",
                concepts: [
                    "Bees convert nectar using enzymes and evaporation",
                    "Honey contains natural antimicrobials",
                    "Different flowers produce different honey flavors",
                    "Proper extraction maintains honey quality"
                ],
                funFact: "Honey is the only food that never spoils - archaeologists have found 3,000-year-old honey in Egyptian tombs that's still perfectly edible!",
                objectives: "Understand the honey-making process and learn about honey's unique properties and commercial production.",
                narration: "Honey production is one of nature's most amazing processes! When this honeybee visits flowers, she collects nectar in her special honey stomach, separate from her regular stomach. Back at the hive, she regurgitates the nectar and passes it to a house bee, who adds enzymes that begin breaking down complex sugars into simpler ones. The nectar is then deposited in wax cells, where house bees fan it with their wings to evaporate water - raw nectar is about 80% water, but finished honey is only 17-20% water. This concentration prevents fermentation and gives honey its long shelf life. In fact, honey is the only food that never spoils - archaeologists have found 3,000-year-old honey in Egyptian tombs that's still perfectly edible! The enzymes in honey create natural antimicrobials like hydrogen peroxide, which help preserve the honey and provide its medicinal properties. Different flowers create different honey flavors and colors - clover honey is light and mild, while buckwheat honey is dark and robust. Beekeepers harvest honey by removing frames full of capped honeycomb, using centrifugal extractors to spin the honey out of the wax cells, then straining and storing it. Quality honey requires proper timing - harvesting too early results in high water content that can ferment, while waiting too long can crystallize the honey in the comb."
            },
            asianbees: {
                title: "Asian Bees - Apis cerana",
                subtitle: "Indigenous bee management",
                icon: "🐛",
                modelUrl: "https://sketchfab.com/models/3b2b52d93e5e4b9bab652efca292aae5/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Apis cerana, the Asian honeybee, is indigenous to Asia and has been managed for centuries. These bees are smaller than European honeybees but are better adapted to tropical climates and have natural resistance to many diseases and pests.",
                concepts: [
                    "Apis cerana adapted to Asian tropical conditions",
                    "Smaller colonies but more disease resistant",
                    "Traditional and modern management methods",
                    "Important for local ecosystem pollination"
                ],
                funFact: "Asian honeybees perform a unique 'shaking dance' to warn the colony about hornets and can raise their body temperature to kill invading pests!",
                objectives: "Learn about indigenous bee species and understand the differences between Asian and European honeybee management.",
                narration: "Meet Apis cerana, the Asian honeybee that has been humanity's partner in this region for thousands of years! While European honeybees get more attention globally, Asian honeybees are perfectly adapted to tropical and subtropical conditions across Asia. These bees are smaller than their European cousins and maintain smaller colonies - typically 10,000 to 30,000 bees compared to 50,000-80,000 for European bees. However, what they lack in size, they make up for in resilience. Asian honeybees have natural resistance to many diseases and pests that devastate European bees, including the destructive Varroa mites. They've also developed fascinating defense behaviors - when threatened by hornets, they perform a unique 'shaking dance' to warn the colony, and they can collectively raise their body temperature to literally cook invading pests! Traditional Asian beekeeping often used log hives or clay pots, but modern management has adopted moveable frame hives while preserving indigenous knowledge. Asian bees are excellent pollinators of native plants and crops, often more efficient than introduced European bees for local flowering plants. They're particularly important for crops like coconut, mango, and various spices. Climate change and habitat loss threaten these indigenous bees, making their conservation crucial for maintaining local ecosystems and traditional food systems. Modern beekeeping programs increasingly recognize the value of managing both indigenous and introduced bee species."
            }
        };

        // Global Variables
        let currentStep = 'fisheries';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                // Prefer natural-sounding voices
                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['fisheries', 'marine', 'inland', 'composite', 'fishfarm', 'beekeeping', 'honey', 'asianbees'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['fisheries', 'marine', 'inland', 'composite', 'fishfarm', 'beekeeping', 'honey', 'asianbees'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                // Auto-advance if guided tour is active
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? '🔊' : '🔇';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['fisheries', 'marine', 'inland', 'composite', 'fishfarm', 'beekeeping', 'honey', 'asianbees'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Congratulations! You've completed your journey through fisheries and beekeeping. You now understand both aquaculture and apiculture - from marine tuna fishing to freshwater composite culture systems, and from European honeybee management to indigenous Asian bee conservation. Feel free to explore any section again or test your knowledge!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "What are the advantages of composite fish culture over single-species farming?",
                "How do marine and inland fisheries differ in their management approaches?",
                "What makes honey the only food that never spoils?",
                "How do Asian honeybees differ from European honeybees?",
                "Why is aquaculture considered the fastest-growing food production sector?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a question to test your fisheries and beekeeping knowledge: ${randomQ} Think about what you've learned about aquaculture and apiculture!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to your aquatic and apiary journey! We'll explore two fascinating areas of food production - fisheries that harvest our waters for protein, and beekeeping that provides honey while pollinating our crops. From ocean tuna to pond-raised rohu, and from European honeybees to indigenous Asian bees, let's dive into these remarkable production systems!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>