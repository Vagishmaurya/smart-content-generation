<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animal Husbandry - Complete Livestock Management Journey</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #6D4C41 0%, #8D6E63 50%, #A1887F 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.2" d="M0,256L48,272C96,288,192,320,288,314.7C384,309,480,267,576,256C672,245,768,267,864,282.7C960,299,1056,309,1152,293.3C1248,277,1344,235,1392,213.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: wave 25s linear infinite;
        }

        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #8D6E63, #4CAF50);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .animal-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #8D6E63;
            border-radius: 50%;
            animation: animal-pulse 2s ease-in-out infinite;
        }

        @keyframes animal-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 340px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #8D6E63;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(141, 110, 99, 0.2);
            border: 1px solid rgba(141, 110, 99, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(141, 110, 99, 0.3);
            border-color: #8D6E63;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(141, 110, 99, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #FF7043, #FF5722);
            border-color: #FF7043;
            box-shadow: 0 0 20px rgba(255, 112, 67, 0.5);
            animation: pulse 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #6D4C41 0%, #8D6E63 50%, #A1887F 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 380px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #8D6E63;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(141, 110, 99, 0.1), rgba(76, 175, 80, 0.1));
            border: 1px solid rgba(141, 110, 99, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #8D6E63;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #FF7043;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8D6E63, #FF7043);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(255, 112, 67, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-mini.active {
            color: #FF7043;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #4CAF50;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #8D6E63;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "🐄";
            position: absolute;
            left: 0;
            color: #8D6E63;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(255, 112, 67, 0.1), rgba(141, 110, 99, 0.1));
            border: 1px solid rgba(255, 112, 67, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "🚜";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #FF7043;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(141, 110, 99, 0.3);
            border-color: #8D6E63;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(141, 110, 99, 0.4);
            border-color: #8D6E63;
            box-shadow: 0 0 20px rgba(141, 110, 99, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #6D4C41 0%, #8D6E63 50%, #A1887F 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-heart {
            font-size: 60px;
            animation: animal-pulse 1.5s ease-in-out infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #8D6E63, #FF7043);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(141, 110, 99, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #8D6E63, #FF7043);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(141, 110, 99, 0.3);
            border-color: #8D6E63;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(141, 110, 99, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #8D6E63, #FF7043);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-heart">🐄</div>
            <div class="loading-text">Preparing Your Livestock Journey...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Animal Husbandry</div>
        <div class="exhibit-subtitle">
            <span class="animal-indicator"></span>
            Livestock Management & Care
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>🗺️</span>
            <span>Livestock Journey</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('husbandry')">
                <span>🚜</span> Husbandry
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('indiancow')">
                <span>🐄</span> Indian Cow
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('zebu')">
                <span>🐂</span> Zebu
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('buffalo')">
                <span>🐃</span> Buffalo
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('nutrition')">
                <span>🌾</span> Nutrition
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('poultry')">
                <span>🐔</span> Poultry
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('health')">
                <span>💊</span> Health
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('farmvisit')">
                <span>🏡</span> Farm Visit
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="Animal Husbandry Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/models/2be03e1c44b146b0b1f6076968d5f3fe/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">🚜</div>
            <div class="info-title">
                <h2 id="stepTitle">Animal Husbandry - Livestock Farming</h2>
                <div class="info-subtitle" id="stepSubtitle">The science and art of animal care</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Livestock Learning Progress</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('husbandry')">Hub</span>
                <span class="step-mini" onclick="loadJourneyStep('indiancow')">Cow</span>
                <span class="step-mini" onclick="loadJourneyStep('zebu')">Zeb</span>
                <span class="step-mini" onclick="loadJourneyStep('buffalo')">Buf</span>
                <span class="step-mini" onclick="loadJourneyStep('nutrition')">Nut</span>
                <span class="step-mini" onclick="loadJourneyStep('poultry')">Pou</span>
                <span class="step-mini" onclick="loadJourneyStep('health')">Hea</span>
                <span class="step-mini" onclick="loadJourneyStep('farmvisit')">Far</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            Animal husbandry is the scientific management of livestock for food, fiber, and companionship. This Indian cow represents one of the most important domesticated animals, providing milk, meat, draft power, and organic fertilizer for sustainable farming systems.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🚜</span> Key Concepts
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>Selective breeding improves livestock genetics</li>
                    <li>Proper nutrition ensures healthy growth and production</li>
                    <li>Disease prevention maintains animal welfare</li>
                    <li>Sustainable practices support environmental health</li>
                </ul>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Livestock Fact!</div>
            <div class="fun-fact-text" id="funFact">
                India has the world's largest cattle population with over 300 million animals, contributing significantly to rural livelihoods and agricultural productivity!
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🎯</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                Understanding the principles of animal husbandry and the importance of livestock in sustainable agricultural systems.
            </div>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            🔊
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ▶️
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ℹ️
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>🚀</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>🎯</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Animal Husbandry Content
        const JOURNEY_DATA = {
            husbandry: {
                title: "Animal Husbandry - Livestock Farming",
                subtitle: "The science and art of animal care",
                icon: "🚜",
                modelUrl: "https://sketchfab.com/models/2be03e1c44b146b0b1f6076968d5f3fe/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Animal husbandry is the scientific management of livestock for food, fiber, and companionship. This Indian cow represents one of the most important domesticated animals, providing milk, meat, draft power, and organic fertilizer for sustainable farming systems.",
                concepts: [
                    "Selective breeding improves livestock genetics",
                    "Proper nutrition ensures healthy growth and production",
                    "Disease prevention maintains animal welfare",
                    "Sustainable practices support environmental health"
                ],
                funFact: "India has the world's largest cattle population with over 300 million animals, contributing significantly to rural livelihoods and agricultural productivity!",
                objectives: "Understanding the principles of animal husbandry and the importance of livestock in sustainable agricultural systems.",
                narration: "Welcome to the world of animal husbandry - the science and art of caring for domestic animals! This beautiful Indian cow represents thousands of years of domestication and selective breeding. Animal husbandry involves much more than just feeding animals - it's about understanding genetics, nutrition, reproduction, health, and behavior to optimize animal welfare and productivity. India has the world's largest cattle population with over 300 million animals, supporting the livelihoods of millions of rural families. These animals provide multiple benefits: milk for nutrition, draft power for farming, meat for protein, and organic manure for soil fertility. Modern animal husbandry combines traditional knowledge with scientific advances in genetics, nutrition, and veterinary care. Successful livestock farming requires understanding animal behavior, providing proper housing, ensuring balanced nutrition, maintaining health through vaccination and disease prevention, and practicing sustainable management that benefits both animals and the environment."
            },
            indiancow: {
                title: "Indian Cattle Breeds - Indigenous Excellence",
                subtitle: "Adapted to local conditions",
                icon: "🐄",
                modelUrl: "https://sketchfab.com/models/2be03e1c44b146b0b1f6076968d5f3fe/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Indian cattle breeds have evolved over thousands of years to adapt to local climate, diseases, and farming systems. This cow represents indigenous breeds like Gir, Sahiwal, and Red Sindhi, known for their disease resistance, heat tolerance, and ability to thrive on local feed resources.",
                concepts: [
                    "Indigenous breeds adapted to local climate",
                    "Natural disease resistance reduces veterinary costs",
                    "Heat tolerance enables year-round productivity",
                    "Efficient conversion of low-quality fodder"
                ],
                funFact: "The Gir breed from Gujarat can produce high-quality A2 milk and has been exported to Brazil where it became the foundation of their dairy industry!",
                objectives: "Learn about indigenous cattle breeds and their advantages in sustainable farming systems.",
                narration: "This Indian cow represents the remarkable diversity of indigenous cattle breeds that have evolved over millennia to thrive in India's varied climates and conditions. Indigenous breeds like Gir, Sahiwal, Red Sindhi, and Tharparkar are living examples of natural selection and traditional breeding wisdom. These animals have developed extraordinary adaptations - they can tolerate temperatures up to 45°C, resist tropical diseases like foot-and-mouth and tick-borne illnesses, and efficiently convert poor-quality crop residues and grasses into high-quality milk and meat. The Gir breed, originally from Gujarat, is so well-adapted that it has been exported to Brazil where it became the foundation of their successful dairy industry! Indian breeds typically produce A2 milk, which is easier to digest than the A1 milk from most European breeds. These animals also have lower maintenance requirements, longer productive lives, and stronger maternal instincts. However, they generally produce less milk than exotic breeds, leading to crossbreeding programs that aim to combine the hardiness of indigenous breeds with the productivity of exotic ones."
            },
            zebu: {
                title: "Zebu Cattle - Asian Excellence",
                subtitle: "Heat-adapted tropical cattle",
                icon: "🐂",
                modelUrl: "https://sketchfab.com/models/ad4a89d6208248f8a6745f2329f5edf0/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Zebu cattle, characterized by their distinctive shoulder hump, represent the tropical cattle subspecies perfectly adapted to hot, humid climates. These animals have superior heat tolerance, disease resistance, and efficient feed conversion compared to European breeds.",
                concepts: [
                    "Distinctive shoulder hump stores nutrients",
                    "Large dewlap and skin folds aid cooling",
                    "Excellent heat tolerance up to 45°C",
                    "Natural resistance to tick-borne diseases"
                ],
                funFact: "The zebu's shoulder hump can weigh up to 30 kg and serves as an energy reserve during dry seasons when feed is scarce!",
                objectives: "Understand the unique adaptations of zebu cattle to tropical environments and their management requirements.",
                narration: "Meet the zebu - one of nature's most successful adaptations to tropical conditions! This distinctive cattle subspecies, recognizable by its prominent shoulder hump and large dewlap, represents thousands of years of evolution in hot, humid climates. The shoulder hump isn't just for show - it's a sophisticated energy storage system that can weigh up to 30 kilograms and contains fat and muscle that animals can metabolize during dry seasons when food is scarce. The large dewlap and loose skin folds increase surface area for heat dissipation, while their sweat glands are more numerous and efficient than those of European cattle. Zebu cattle can maintain normal body temperature even when ambient temperature reaches 45°C! They also have natural resistance to many tropical diseases, including tick-borne illnesses that devastate European breeds. Their digestive system is remarkably efficient at extracting nutrients from poor-quality tropical forages. Modern zebu breeds like Brahman, Nelore, and Guzerat combine these natural adaptations with improved productivity, making them ideal for tropical and subtropical livestock systems worldwide."
            },
            buffalo: {
                title: "Water Buffalo - Asia's Powerhouse",
                subtitle: "Dual-purpose livestock excellence",
                icon: "🐃",
                modelUrl: "https://sketchfab.com/models/10430df80e6446f2a77cb0ba93ed5cd1/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Water buffalo are among Asia's most valuable livestock, providing high-fat milk ideal for dairy products, powerful draft work for rice cultivation, and efficient meat production. Their ability to work in flooded fields and produce rich milk makes them indispensable.",
                concepts: [
                    "High-fat milk ideal for cheese and yogurt production",
                    "Powerful draft animals for rice cultivation",
                    "Excellent wallowing behavior for heat regulation",
                    "Efficient feed conversion in wetland conditions"
                ],
                funFact: "Buffalo milk contains 7-8% fat compared to 3-4% in cow milk, making it perfect for producing mozzarella cheese and rich dairy products!",
                objectives: "Learn about water buffalo management and their unique contributions to agriculture and food production.",
                narration: "This magnificent water buffalo represents one of Asia's most valuable agricultural partners! Buffalo have been working alongside farmers for over 5,000 years, and their contributions are remarkable. Buffalo milk is extraordinarily rich, containing 7-8% fat and 4.5% protein compared to cow milk's 3-4% fat and 3.2% protein. This richness makes it perfect for producing mozzarella cheese, yogurt, and butter. In fact, authentic mozzarella di bufala can only be made from buffalo milk! Beyond dairy production, buffalo are incredibly powerful draft animals - a single buffalo can pull loads equivalent to what two oxen can handle. Their broad hooves make them perfect for working in flooded rice fields where cattle would sink. Buffalo love water and mud - wallowing isn't just play, it's essential thermoregulation since they have few sweat glands. They can work in hot, humid conditions where other animals would suffer heat stress. Buffalo are also efficient feed converters, thriving on crop residues, water plants, and poor-quality forages that other animals can't digest well. Modern buffalo breeds like Murrah and Mehsana combine traditional hardiness with improved milk production, supporting millions of small-scale farmers across Asia."
            },
            nutrition: {
                title: "Animal Nutrition - Feeding for Performance",
                subtitle: "Balanced diets for optimal productivity",
                icon: "🌾",
                modelUrl: "https://sketchfab.com/models/8f85e29adb8c4d83bb8d0cdfcf1f1775/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "This silage pit represents modern feed preservation and animal nutrition science. Proper nutrition involves understanding protein, energy, vitamins, and minerals needed for maintenance, growth, reproduction, and production in different classes of livestock.",
                concepts: [
                    "Balanced rations meet all nutritional requirements",
                    "Silage preserves feed quality year-round",
                    "Different life stages require different nutrients",
                    "Feed conversion efficiency affects profitability"
                ],
                funFact: "Well-made silage can retain 90% of the original crop's nutritional value and remain palatable for over two years when properly stored!",
                objectives: "Understand the principles of animal nutrition and the importance of balanced feeding for livestock productivity.",
                narration: "This silage pit represents the science of animal nutrition and feed preservation! Silage is fermented, high-moisture fodder made from crops like corn, grass, or sorghum. The process is like making sauerkraut for animals - beneficial bacteria ferment the sugars in the crop, producing lactic acid that preserves the feed and creates a tangy, palatable product animals love. Well-made silage retains 90% of the original crop's nutritional value and can stay fresh for over two years! Animal nutrition is complex - livestock need proper ratios of energy, protein, vitamins, and minerals that vary by species, age, weight, and production level. A lactating dairy cow needs very different nutrition than a growing calf or a dry cow. Energy comes primarily from carbohydrates and fats, while protein provides amino acids for muscle development and milk production. Vitamins and minerals, though needed in small amounts, are crucial for immune function, bone development, and reproduction. Feed conversion efficiency - how much feed is needed to produce a kilogram of milk or meat - directly impacts farm profitability. Modern nutrition uses computer software to formulate precise rations that meet animals' exact requirements while minimizing costs and environmental impact."
            },
            poultry: {
                title: "Poultry Farming - Eggs and Meat Production",
                subtitle: "Efficient protein production systems",
                icon: "🐔",
                modelUrl: "https://sketchfab.com/models/2be03e1c44b146b0b1f6076968d5f3fe/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Poultry farming involves raising chickens for eggs (layers) and meat (broilers). Modern poultry operations use specialized breeding, precise nutrition, climate-controlled housing, and automated systems to achieve high efficiency in protein production.",
                concepts: [
                    "Layer hens produce 300+ eggs per year",
                    "Broilers reach market weight in 6-8 weeks",
                    "Controlled environment maximizes productivity",
                    "Specialized breeds for different purposes"
                ],
                funFact: "A modern layer hen can produce over 300 eggs per year, compared to wild jungle fowl that lay only 10-15 eggs annually!",
                objectives: "Learn about modern poultry production systems and the differences between layer and broiler operations.",
                narration: "Poultry farming represents one of agriculture's most efficient protein production systems! Modern chickens are marvels of selective breeding - layer hens can produce over 300 eggs per year compared to their wild ancestors that laid only 10-15 eggs annually. The poultry industry uses two main types: layers bred specifically for egg production, and broilers bred for rapid meat growth. Broiler chickens are incredibly efficient, reaching market weight of 2-3 kilograms in just 6-8 weeks with excellent feed conversion ratios. Layer operations house hens in environmentally controlled buildings with automated feeding, watering, and egg collection systems. Modern layer breeds like White Leghorn focus all their energy on egg production, while broiler breeds like Cornish Cross are selected for rapid muscle development. Poultry nutrition is precisely formulated - starter feeds for chicks are high in protein for growth, while layer feeds contain extra calcium for strong eggshells. Disease prevention is crucial in poultry farming due to birds' susceptibility to respiratory diseases and their tendency to flock together. Biosecurity measures, vaccination programs, and proper ventilation are essential. The poultry industry has achieved remarkable efficiency improvements - it now takes 50% less feed, water, and time to produce a kilogram of chicken meat compared to 50 years ago!"
            },
            health: {
                title: "Animal Health - Disease Prevention & Care",
                subtitle: "Veterinary medicine and wellness",
                icon: "💊",
                modelUrl: "https://sketchfab.com/models/2be03e1c44b146b0b1f6076968d5f3fe/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Animal health management involves preventing diseases through vaccination, maintaining biosecurity, recognizing symptoms early, and providing proper treatment. Healthy animals are more productive, profitable, and humane to raise.",
                concepts: [
                    "Prevention is better and cheaper than treatment",
                    "Vaccination programs protect against major diseases",
                    "Biosecurity prevents pathogen introduction",
                    "Early detection enables effective treatment"
                ],
                funFact: "The global eradication of rinderpest in cattle, achieved in 2011, was only the second disease ever eliminated by human effort after smallpox!",
                objectives: "Understand the principles of animal health management and the importance of preventive veterinary care.",
                narration: "Animal health is fundamental to successful livestock farming - healthy animals are more productive, profitable, and represent ethical animal care. The foundation of animal health is prevention, which is always more effective and economical than treatment. Vaccination programs protect animals against major diseases like foot-and-mouth disease in cattle, Newcastle disease in poultry, and classical swine fever in pigs. The success of veterinary medicine is remarkable - rinderpest, once called the 'cattle plague,' was completely eradicated in 2011, making it only the second disease ever eliminated by human effort after smallpox! Biosecurity is crucial - controlling who enters farm facilities, disinfecting vehicles and equipment, and quarantining new animals prevents disease introduction. Good nutrition, clean water, proper housing, and stress reduction all support strong immune systems. Farmers must learn to recognize early signs of illness - changes in appetite, behavior, or appearance often indicate health problems before severe symptoms appear. Modern livestock operations use herd health programs developed with veterinarians that include vaccination schedules, parasite control, reproductive management, and nutrition programs tailored to specific operations. Record-keeping is essential for tracking health events, treatment outcomes, and identifying patterns that might indicate management problems."
            },
            farmvisit: {
                title: "Farm Visits - Activities 12.3 & 12.4",
                subtitle: "Learning through hands-on experience",
                icon: "🏡",
                modelUrl: "https://sketchfab.com/models/2be03e1c44b146b0b1f6076968d5f3fe/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Farm visits provide invaluable hands-on learning experiences where students can observe animal behavior, understand farm operations, ask questions to farmers, and connect classroom theory with real-world practice in animal husbandry.",
                concepts: [
                    "Direct observation of animal behavior and management",
                    "Understanding farm operations and daily routines",
                    "Interaction with farmers and agricultural professionals",
                    "Connection between theory and practice"
                ],
                funFact: "Students who participate in farm visits show 40% better understanding of agricultural concepts compared to classroom-only learning!",
                objectives: "Experience real farm operations and understand how theoretical knowledge applies to practical animal husbandry.",
                narration: "Farm visits are where learning comes alive! Activities 12.3 and 12.4 take you beyond textbooks to experience real animal husbandry in action. During farm visits, you'll observe how farmers apply the principles we've discussed - watching milking operations, seeing how feed is prepared and distributed, observing animal behavior in different housing systems, and understanding the daily routines that keep animals healthy and productive. You'll notice things you can't learn from books - how cows communicate with each other, the sounds that indicate contentment or distress, how farmers read animal body language to assess health and welfare. Research shows students who participate in farm visits demonstrate 40% better understanding of agricultural concepts! You'll have opportunities to ask farmers about their experiences - what challenges they face, how they make management decisions, what techniques work best in their conditions. Different farms specialize in different aspects - dairy farms focus on milk production, beef operations emphasize growth and feed efficiency, poultry farms demonstrate intensive production systems. Each visit reveals how farmers adapt general principles to their specific circumstances, local climate, available resources, and market conditions. These experiences help you understand that animal husbandry is both a science and an art, requiring knowledge, skill, patience, and dedication to animal welfare."
            }
        };

        // Global Variables
        let currentStep = 'husbandry';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                // Prefer natural-sounding voices
                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['husbandry', 'indiancow', 'zebu', 'buffalo', 'nutrition', 'poultry', 'health', 'farmvisit'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['husbandry', 'indiancow', 'zebu', 'buffalo', 'nutrition', 'poultry', 'health', 'farmvisit'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                // Auto-advance if guided tour is active
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? '🔊' : '🔇';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['husbandry', 'indiancow', 'zebu', 'buffalo', 'nutrition', 'poultry', 'health', 'farmvisit'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Congratulations! You've completed your journey through animal husbandry. You now understand livestock management, different cattle breeds, nutrition principles, poultry farming, and animal health care. You've also learned about the value of farm visits for hands-on learning. Feel free to explore any section again or test your knowledge!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "What are the main advantages of indigenous cattle breeds?",
                "How does the zebu's shoulder hump help it survive in tropical climates?",
                "Why is buffalo milk particularly valuable for dairy processing?",
                "What makes silage an effective way to preserve animal feed?",
                "What are the key differences between layer and broiler chickens?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a question to test your animal husbandry knowledge: ${randomQ} Think about what you've learned about livestock management and care!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to your animal husbandry journey! We'll explore the science and art of caring for livestock - from indigenous cattle breeds to modern poultry farming. You'll learn about animal nutrition, health management, and the importance of proper livestock care. Starting with the fundamentals of animal husbandry and this beautiful Indian cow!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>