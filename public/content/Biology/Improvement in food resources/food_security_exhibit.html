<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Security and Crop Types - Complete Agricultural Journey</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #2E7D32 0%, #4CAF50 50%, #8BC34A 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.2" d="M0,128L48,144C96,160,192,192,288,186.7C384,181,480,139,576,128C672,117,768,139,864,154.7C960,171,1056,181,1152,165.3C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: wave 15s linear infinite;
        }

        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #4CAF50, #2E7D32);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .growth-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #4CAF50;
            border-radius: 50%;
            animation: growth 2s ease-in-out infinite;
        }

        @keyframes growth {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 320px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #4CAF50;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #FF9800, #FF5722);
            border-color: #FF9800;
            box-shadow: 0 0 20px rgba(255, 152, 0, 0.5);
            animation: pulse 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(46, 125, 50, 0.3);
            border-color: #2E7D32;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2E7D32 0%, #4CAF50 50%, #8BC34A 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 380px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #4CAF50;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(139, 195, 74, 0.1));
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #4CAF50;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #FF9800;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #FF9800);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(255, 152, 0, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-mini.active {
            color: #FF9800;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #4CAF50;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #4CAF50;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "üå±";
            position: absolute;
            left: 0;
            color: #4CAF50;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(76, 175, 80, 0.1));
            border: 1px solid rgba(255, 152, 0, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "üåæ";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #FF9800;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(76, 175, 80, 0.4);
            border-color: #4CAF50;
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2E7D32 0%, #4CAF50 50%, #8BC34A 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-heart {
            font-size: 60px;
            animation: growth 1.5s ease-in-out infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #FF9800);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(76, 175, 80, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #4CAF50, #FF9800);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #4CAF50, #FF9800);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-heart">üåæ</div>
            <div class="loading-text">Preparing Your Agricultural Journey...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Food Security and Crop Types</div>
        <div class="exhibit-subtitle">
            <span class="growth-indicator"></span>
            India's Agricultural Journey
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>üó∫Ô∏è</span>
            <span>Agricultural Exploration</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('population')">
                <span>üë•</span> Population
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('revolution')">
                <span>üöÄ</span> Revolution
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('cereals')">
                <span>üåæ</span> Cereals
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('grainstructure')">
                <span>üî¨</span> Structure
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('oilseeds')">
                <span>üåª</span> Oil Seeds
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('kharif')">
                <span>‚òÄÔ∏è</span> Kharif
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('rabi')">
                <span>‚ùÑÔ∏è</span> Rabi
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('weeds')">
                <span>üåø</span> Weeds
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="Agricultural Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/models/424bb9a84c4347e290b0908dd852d9fc/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">üë•</div>
            <div class="info-title">
                <h2 id="stepTitle">Population Challenge - Feeding India</h2>
                <div class="info-subtitle" id="stepSubtitle">The growing demand for food</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Learning Progress</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('population')">Pop</span>
                <span class="step-mini" onclick="loadJourneyStep('revolution')">Rev</span>
                <span class="step-mini" onclick="loadJourneyStep('cereals')">Cer</span>
                <span class="step-mini" onclick="loadJourneyStep('grainstructure')">Str</span>
                <span class="step-mini" onclick="loadJourneyStep('oilseeds')">Oil</span>
                <span class="step-mini" onclick="loadJourneyStep('kharif')">Kha</span>
                <span class="step-mini" onclick="loadJourneyStep('rabi')">Rab</span>
                <span class="step-mini" onclick="loadJourneyStep('weeds')">Wee</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            India is home to over 1.4 billion people, making food security one of our nation's greatest challenges. With a growing population and changing dietary patterns, India must produce enough food to feed everyone while maintaining sustainable agricultural practices.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>üìä</span> Key Statistics
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>India feeds 18% of world's population with 2.4% of land</li>
                    <li>Agriculture employs 50% of India's workforce</li>
                    <li>Food grain production has tripled since 1960s</li>
                    <li>Need to increase production by 70% by 2050</li>
                </ul>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Agricultural Fact!</div>
            <div class="fun-fact-text" id="funFact">
                India is the world's largest producer of milk, pulses, and spices, and the second-largest producer of rice and wheat!
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>üéØ</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                Understand India's food security challenges and the importance of agricultural innovation for a growing population.
            </div>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            üîä
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ‚ñ∂Ô∏è
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ‚ÑπÔ∏è
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>üöÄ</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>üéØ</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Agricultural Content
        const JOURNEY_DATA = {
            population: {
                title: "Population Challenge - Feeding India",
                subtitle: "The growing demand for food",
                icon: "üë•",
                modelUrl: "https://sketchfab.com/models/424bb9a84c4347e290b0908dd852d9fc/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "India is home to over 1.4 billion people, making food security one of our nation's greatest challenges. With a growing population and changing dietary patterns, India must produce enough food to feed everyone while maintaining sustainable agricultural practices.",
                concepts: [
                    "India feeds 18% of world's population with 2.4% of land",
                    "Agriculture employs 50% of India's workforce",
                    "Food grain production has tripled since 1960s",
                    "Need to increase production by 70% by 2050"
                ],
                funFact: "India is the world's largest producer of milk, pulses, and spices, and the second-largest producer of rice and wheat!",
                objectives: "Understand India's food security challenges and the importance of agricultural innovation for a growing population.",
                narration: "Welcome to India's agricultural journey! You're looking at wheat grains - one of the most important crops that feed our massive population of 1.4 billion people. India faces an enormous challenge: feeding 18% of the world's population using only 2.4% of the world's land. Every grain you see here represents the hard work of millions of farmers who rise before dawn to tend their fields. Since the 1960s, we've tripled our food grain production, but with our growing population and changing eating habits, we need to increase production by another 70% by 2050. This isn't just about growing more food - it's about doing it sustainably to protect our environment for future generations."
            },
            revolution: {
                title: "Green Revolution - Agricultural Transformation",
                subtitle: "From food scarcity to self-sufficiency",
                icon: "üöÄ",
                modelUrl: "https://sketchfab.com/models/424bb9a84c4347e290b0908dd852d9fc/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "The Green Revolution transformed India from a food-deficit nation to food self-sufficient in the 1960s-70s. Through high-yielding varieties, fertilizers, and irrigation, wheat and rice production soared. Today, we focus on sustainable practices and the White Revolution in dairy.",
                concepts: [
                    "High-yielding varieties increased production 3-fold",
                    "Punjab and Haryana became India's granary",
                    "White Revolution made India largest milk producer",
                    "Now focusing on sustainable and organic farming"
                ],
                funFact: "The Green Revolution increased wheat production from 12 million tons in 1965 to 109 million tons today - a 9-fold increase!",
                objectives: "Learn how agricultural revolutions transformed India's food security and understand sustainable farming practices.",
                narration: "These wheat grains tell the story of India's agricultural miracle - the Green Revolution! In the 1960s, India faced severe food shortages and had to import grain to feed its people. But visionary scientists like Dr. Norman Borlaug and Dr. M.S. Swaminathan introduced high-yielding varieties of wheat and rice. Combined with fertilizers, pesticides, and better irrigation, these new varieties produced three times more grain per acre! Punjab and Haryana became the breadbaskets of India. The White Revolution followed, making India the world's largest milk producer. Today, we're pursuing a new revolution - sustainable agriculture that protects our soil, water, and environment while still feeding our growing population."
            },
            cereals: {
                title: "Cereals - The Foundation Crops",
                subtitle: "Wheat, rice, and other grains",
                icon: "üåæ",
                modelUrl: "https://sketchfab.com/models/afb99163f80f4de282c3c568d2fc0cea/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Cereals are the backbone of Indian agriculture, providing carbohydrates and calories to billions. Rice feeds the eastern and southern regions, wheat dominates the north, while maize and millets are grown across diverse climates.",
                concepts: [
                    "Rice is India's most important cereal (43% of food grains)",
                    "Wheat is the second largest cereal crop",
                    "Maize is used for food, feed, and industrial purposes",
                    "Millets are drought-resistant and nutritious"
                ],
                funFact: "A single rice plant can produce up to 3,000 grains, and India grows enough rice annually to feed 650 million people!",
                objectives: "Identify major cereal crops and understand their role in nutrition and food security.",
                narration: "Now you're examining rice grains - the most important cereal crop in India! Rice feeds nearly half of India's population, especially in the eastern and southern states where it's grown in flooded fields called paddies. Each rice grain you see contains carbohydrates, protein, and essential nutrients. A single rice plant can produce up to 3,000 grains! India produces about 120 million tons of rice each year - enough to feed 650 million people. Rice comes in thousands of varieties, from the aromatic basmati grown in Punjab to the red rice of Kerala. While wheat dominates the northern plains, rice rules the monsoon regions, adapting to everything from the flood plains of Bengal to the terraced hills of the Northeast."
            },
            grainstructure: {
                title: "Grain Structure - Inside the Seed",
                subtitle: "Anatomy of nutrition",
                icon: "üî¨",
                modelUrl: "https://sketchfab.com/models/9d02ed5760344e23be1f78ed800e7512/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Every grain is a perfectly designed package of nutrition. The outer bran provides fiber, the endosperm supplies energy through starch, and the tiny germ contains vitamins and healthy oils. Understanding grain structure helps in processing and nutrition.",
                concepts: [
                    "Bran: outer layer with fiber and B vitamins",
                    "Endosperm: largest part containing starch",
                    "Germ: embryo with vitamins and healthy fats",
                    "Whole grains contain all three parts"
                ],
                funFact: "The wheat germ, though only 3% of the grain, contains 25% of the protein and most of the vitamins!",
                objectives: "Understand the anatomical structure of grains and the nutritional importance of each component.",
                narration: "Look closely at this wheat grain structure - it's like nature's perfect nutrition package! The outer brown layer is the bran, rich in fiber and B vitamins that help digestion and provide energy. The large white area is the endosperm, packed with starch that gives us carbohydrates for energy. The tiny yellow part at the bottom is the germ - the baby plant waiting to grow! Though the germ is only 3% of the grain, it contains 25% of the protein and most of the vitamins and minerals. When we eat whole wheat flour, we get all three parts. But when wheat is refined to make white flour, the nutritious bran and germ are removed, leaving only the starchy endosperm. That's why whole grains are much more nutritious than refined grains!"
            },
            oilseeds: {
                title: "Oil Seeds - Liquid Gold",
                subtitle: "Mustard, sunflower, and more",
                icon: "üåª",
                modelUrl: "https://sketchfab.com/models/f06caff0069348828cdf00dc22130fa4/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Oil seeds are India's 'liquid gold' - providing cooking oil, protein-rich meal, and industrial raw materials. Mustard dominates the north, groundnut the west, coconut the south, and sunflower across multiple regions.",
                concepts: [
                    "India is world's 4th largest oilseed producer",
                    "Mustard seeds contain 40-45% oil content",
                    "Oil cake is protein-rich cattle feed",
                    "Essential for cooking and industrial uses"
                ],
                funFact: "Mustard oil has been used in Indian cooking for over 3,000 years and contains healthy omega-3 fatty acids!",
                objectives: "Learn about major oilseed crops and their economic and nutritional importance.",
                narration: "These tiny mustard seeds are packed with 'liquid gold' - oil! Each small seed contains 40-45% oil, which has been extracted and used in Indian kitchens for over 3,000 years. Mustard oil gives food a distinctive pungent flavor and contains healthy omega-3 fatty acids. India is the world's fourth-largest oilseed producer, growing mustard in the north, groundnuts in Gujarat and Rajasthan, coconut along the coasts, and sunflower across multiple states. When we extract oil from these seeds, we're left with oil cake - a protein-rich byproduct that becomes valuable cattle feed. During winter, you'll see bright yellow mustard flowers covering entire fields across North India, eventually producing these precious seeds that feed both humans and animals!"
            },
            kharif: {
                title: "Kharif Season - Monsoon Crops",
                subtitle: "Summer cultivation with rainfall",
                icon: "‚òÄÔ∏è",
                modelUrl: "https://sketchfab.com/models/7e90275d58e4402e8b8723e4fa085f2b/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Kharif crops are sown during monsoon season (June-July) and harvested in autumn (September-October). These crops depend on monsoon rainfall and include rice, cotton, sugarcane, and maize - crops that love water and warmth.",
                concepts: [
                    "Sown in June-July with monsoon arrival",
                    "Harvested in September-October",
                    "Requires high temperature and rainfall",
                    "Major crops: rice, cotton, sugarcane, maize"
                ],
                funFact: "Kharif rice accounts for 85% of India's total rice production, feeding hundreds of millions during monsoon season!",
                objectives: "Understand the kharif cropping season and identify major monsoon-dependent crops.",
                narration: "Here's a corn cob - a perfect example of a kharif crop! Kharif crops are like monsoon's children - they're sown when the first monsoon rains arrive in June and July, and they thrive in the hot, humid weather that follows. This corn plant grew tall during the rainy season, reaching up to 8 feet high! Corn, or maize, needs lots of water and warm temperatures, which the monsoon provides perfectly. Other major kharif crops include rice in the flooded paddies, cotton in the black soil regions, and sugarcane in the river valleys. These crops are harvested in September and October, after the monsoon withdraws. Farmers anxiously wait for monsoon arrival because 85% of India's rice production depends on kharif season rains. Without good monsoons, these crops fail, affecting food security across the nation."
            },
            rabi: {
                title: "Rabi Season - Winter Crops",
                subtitle: "Cool weather cultivation",
                icon: "‚ùÑÔ∏è",
                modelUrl: "https://sketchfab.com/models/424bb9a84c4347e290b0908dd852d9fc/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Rabi crops are sown in winter (October-December) and harvested in spring (April-June). These crops grow in cool weather and are typically irrigated. Wheat, barley, peas, and mustard are major rabi crops that feed India during harvest season.",
                concepts: [
                    "Sown in October-December after monsoon",
                    "Harvested in April-June before summer heat",
                    "Requires irrigation and cool weather",
                    "Major crops: wheat, barley, peas, mustard"
                ],
                funFact: "Rabi wheat provides 35% of India's total food grain production and feeds the bread-eating regions of North India!",
                objectives: "Learn about winter crop cultivation and the importance of irrigation for rabi crops.",
                narration: "These golden wheat grains represent the rabi season - India's winter crop harvest! After the monsoon ends in September, farmers prepare their fields and sow wheat seeds in October and November. Unlike kharif crops that depend on monsoon rains, rabi crops like wheat need irrigation because winter months have little rainfall. The wheat plants grow slowly in cool weather, developing strong roots and stems. By March and April, when temperatures start rising, the wheat turns golden and is ready for harvest. Wheat is so important that it provides 35% of India's total food grain production! The timing is perfect - rabi crops are harvested just before the scorching summer heat arrives. Other rabi crops include barley for making bread and beer, green peas for vegetables, and mustard for oil. The contrast is beautiful - green winter fields turning golden by spring!"
            },
            weeds: {
                title: "Weeds - Unwanted Competitors",
                subtitle: "Activity 12.1 - Weed identification",
                icon: "üåø",
                modelUrl: "https://sketchfab.com/models/424bb9a84c4347e290b0908dd852d9fc/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Weeds are unwanted plants that compete with crops for sunlight, water, and nutrients. Learning to identify weeds is crucial for farmers to protect their crops. Some weeds are beneficial, but most reduce crop yields significantly.",
                concepts: [
                    "Weeds compete for nutrients, water, and sunlight",
                    "Can reduce crop yields by 20-30%",
                    "Some weeds are edible or medicinal",
                    "Control methods: manual, chemical, biological"
                ],
                funFact: "The common weed Parthenium can reduce wheat yield by 40%, but some weeds like amaranth are actually nutritious vegetables!",
                objectives: "Identify common weeds in crop fields and understand their impact on agricultural productivity.",
                narration: "Now let's explore weeds - the uninvited guests in crop fields! While you see healthy wheat grains here, imagine if unwanted plants were growing alongside, stealing nutrients and water. Weeds are plants growing where they're not wanted, and they're serious competitors to our crops. A weed like Parthenium can reduce wheat yield by 40% if not controlled! Weeds compete for the same sunlight, water, and soil nutrients that crops need. However, not all weeds are bad - some like amaranth are actually nutritious vegetables that people eat. For Activity 12.1, farmers and students learn to identify different weeds: broad-leaved weeds like Bathua, grassy weeds like wild oats, and sedges like purple nutsedge. Farmers use various methods to control weeds - pulling them by hand, using chemical herbicides, or introducing natural enemies. Understanding weeds is essential because managing them can increase crop production by 20-30%!"
            }
        };

        // Global Variables
        let currentStep = 'population';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                // Prefer natural-sounding voices
                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['population', 'revolution', 'cereals', 'grainstructure', 'oilseeds', 'kharif', 'rabi', 'weeds'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['population', 'revolution', 'cereals', 'grainstructure', 'oilseeds', 'kharif', 'rabi', 'weeds'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                // Auto-advance if guided tour is active
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? 'üîä' : 'üîá';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['population', 'revolution', 'cereals', 'grainstructure', 'oilseeds', 'kharif', 'rabi', 'weeds'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Congratulations! You've completed your journey through India's agricultural landscape. You now understand food security challenges, crop types, and seasonal farming. Feel free to explore any section again or test your knowledge!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "What are the main challenges of feeding India's population?",
                "How did the Green Revolution transform Indian agriculture?",
                "What's the difference between Kharif and Rabi crops?",
                "Why are weeds harmful to crop production?",
                "Which part of a grain contains the most vitamins?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a question to test your agricultural knowledge: ${randomQ} Think about what you've learned about India's farming systems!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to your agricultural journey through India's farming landscape! We'll explore how India feeds 1.4 billion people, starting with the population challenge and food security issues. Let's discover the amazing world of crops and cultivation!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>