<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spore Formation - Nature's Survival Capsules</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.2" d="M0,96L48,112C96,128,192,160,288,186.7C384,213,480,235,576,213.3C672,192,768,128,864,128C960,128,1056,192,1152,197.3C1248,203,1344,149,1392,122.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: wave 10s linear infinite;
        }

        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #8b5cf6, #d946ef);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .spore-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #d946ef;
            border-radius: 50%;
            animation: disperse 3s ease-in-out infinite;
        }

        @keyframes disperse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(0.5) translateY(-10px); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 340px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #d946ef;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(217, 70, 239, 0.2);
            border: 1px solid rgba(217, 70, 239, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(217, 70, 239, 0.3);
            border-color: #d946ef;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(217, 70, 239, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #8b5cf6, #d946ef);
            border-color: #d946ef;
            box-shadow: 0 0 20px rgba(217, 70, 239, 0.5);
            animation: sporeGlow 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(139, 92, 246, 0.3);
            border-color: #8b5cf6;
        }

        @keyframes sporeGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(217, 70, 239, 0.5); }
            50% { box-shadow: 0 0 30px rgba(217, 70, 239, 0.8); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 380px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #d946ef;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(217, 70, 239, 0.1));
            border: 1px solid rgba(217, 70, 239, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #d946ef;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #8b5cf6;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #d946ef);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(217, 70, 239, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            flex-wrap: wrap;
            gap: 5px;
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-mini.active {
            color: #d946ef;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #8b5cf6;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #d946ef;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #d946ef;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(217, 70, 239, 0.1));
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "💡";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #8b5cf6;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Advantages Grid */
        .advantages-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 14px 0;
        }

        .advantage-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
        }

        .advantage-title {
            color: #8b5cf6;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .advantage-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 10px;
            line-height: 1.4;
        }

        /* Life Cycle Stages */
        .lifecycle-stages {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin: 16px 0;
        }

        .lifecycle-title {
            color: #d946ef;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .stage-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .stage-item:last-child {
            border-bottom: none;
        }

        .stage-number {
            background: linear-gradient(135deg, #8b5cf6, #d946ef);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 600;
        }

        .stage-text {
            flex: 1;
            color: rgba(255, 255, 255, 0.85);
            font-size: 11px;
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(217, 70, 239, 0.3);
            border-color: #d946ef;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(217, 70, 239, 0.4);
            border-color: #d946ef;
            box-shadow: 0 0 20px rgba(217, 70, 239, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-spore {
            font-size: 60px;
            animation: sporeBurst 2s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes sporeBurst {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.3) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #d946ef);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(217, 70, 239, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #8b5cf6, #d946ef);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(217, 70, 239, 0.3);
            border-color: #d946ef;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(217, 70, 239, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #8b5cf6, #d946ef);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spore">🍄</div>
            <div class="loading-text">Preparing Spore Formation Journey...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Spore Formation</div>
        <div class="exhibit-subtitle">
            <span class="spore-indicator"></span>
            Nature's Survival Capsules
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>🍄</span>
            <span>Spore Formation Journey</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('introduction')">
                <span>📚</span> Introduction
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('rhizopus')">
                <span>🍞</span> Rhizopus
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('fungal_cell')">
                <span>🔬</span> Fungal Cell
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('sporangia')">
                <span>💨</span> Sporangia
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('lifecycle')">
                <span>🔄</span> Life Cycle
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('dispersal')">
                <span>🌬️</span> Dispersal
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('advantages')">
                <span>✨</span> Advantages
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('comparison')">
                <span>⚖️</span> Compare
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="Organism Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/3d-models/tendril-d806820847074b11b056ad43a2beda9e/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">📚</div>
            <div class="info-title">
                <h2 id="stepTitle">Introduction to Spore Formation</h2>
                <div class="info-subtitle" id="stepSubtitle">Nature's microscopic time capsules</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Journey Progress</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('introduction')">Intro</span>
                <span class="step-mini" onclick="loadJourneyStep('rhizopus')">Rhizopus</span>
                <span class="step-mini" onclick="loadJourneyStep('fungal_cell')">Cell</span>
                <span class="step-mini" onclick="loadJourneyStep('sporangia')">Sporangia</span>
                <span class="step-mini" onclick="loadJourneyStep('lifecycle')">Cycle</span>
                <span class="step-mini" onclick="loadJourneyStep('dispersal')">Dispersal</span>
                <span class="step-mini" onclick="loadJourneyStep('advantages')">Benefits</span>
                <span class="step-mini" onclick="loadJourneyStep('comparison')">Compare</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            Spore formation is one of nature's most ingenious survival strategies. These microscopic capsules can withstand extreme conditions, travel vast distances, and remain dormant for years before sprouting into new life. From the bread mold in your kitchen to ancient fungi, spores ensure survival across time and space.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🔬</span> Key Concepts
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>Spores are microscopic reproductive units</li>
                    <li>Highly resistant to harsh conditions</li>
                    <li>Can remain dormant for extended periods</li>
                    <li>Produced in specialized structures called sporangia</li>
                </ul>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Amazing Fact!</div>
            <div class="fun-fact-text" id="funFact">
                Some fungal spores can survive in space! Scientists found that spores exposed to the vacuum and radiation of space for 18 months could still germinate when returned to Earth!
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🎯</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                By exploring this section, you'll understand how fungi like Rhizopus produce spores, the structure and function of sporangia, and why spore formation is such a successful reproductive strategy.
            </div>
        </div>

        <div class="lifecycle-stages" id="lifecycleStages" style="display:none;">
            <div class="lifecycle-title">Rhizopus Life Cycle</div>
            <div class="stage-item">
                <div class="stage-number">1</div>
                <div class="stage-text">Spore lands on suitable substrate</div>
            </div>
            <div class="stage-item">
                <div class="stage-number">2</div>
                <div class="stage-text">Spore germinates, forming hyphae</div>
            </div>
            <div class="stage-item">
                <div class="stage-number">3</div>
                <div class="stage-text">Mycelium spreads and matures</div>
            </div>
            <div class="stage-item">
                <div class="stage-number">4</div>
                <div class="stage-text">Sporangiophores grow upward</div>
            </div>
            <div class="stage-item">
                <div class="stage-number">5</div>
                <div class="stage-text">Sporangia develop at tips</div>
            </div>
            <div class="stage-item">
                <div class="stage-number">6</div>
                <div class="stage-text">Spores released and dispersed</div>
            </div>
        </div>

        <div class="advantages-grid" id="advantagesGrid" style="display:none;">
            <div class="advantage-card">
                <div class="advantage-title">Survival</div>
                <div class="advantage-text">Withstand extreme temperatures, drought, and chemicals</div>
            </div>
            <div class="advantage-card">
                <div class="advantage-title">Dispersal</div>
                <div class="advantage-text">Travel long distances by wind, water, or animals</div>
            </div>
            <div class="advantage-card">
                <div class="advantage-title">Numbers</div>
                <div class="advantage-text">Millions of spores from single sporangium</div>
            </div>
            <div class="advantage-card">
                <div class="advantage-title">Dormancy</div>
                <div class="advantage-text">Remain viable for years until conditions improve</div>
            </div>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            🔊
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ▶️
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ℹ️
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>🚀</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>🎯</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Pedagogical Content
        const JOURNEY_DATA = {
            introduction: {
                title: "Introduction to Spore Formation",
                subtitle: "Nature's microscopic time capsules",
                icon: "📚",
                modelUrl: "https://sketchfab.com/3d-models/tendril-d806820847074b11b056ad43a2beda9e/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Spore formation is one of nature's most ingenious survival strategies. These microscopic capsules can withstand extreme conditions, travel vast distances, and remain dormant for years before sprouting into new life. From the bread mold in your kitchen to ancient fungi, spores ensure survival across time and space.",
                concepts: [
                    "Spores are microscopic reproductive units",
                    "Highly resistant to harsh conditions",
                    "Can remain dormant for extended periods",
                    "Produced in specialized structures called sporangia"
                ],
                funFact: "Some fungal spores can survive in space! Scientists found that spores exposed to the vacuum and radiation of space for 18 months could still germinate when returned to Earth!",
                objectives: "By exploring this section, you'll understand how fungi like Rhizopus produce spores, the structure and function of sporangia, and why spore formation is such a successful reproductive strategy.",
                narration: "Welcome to the remarkable world of spore formation - nature's ultimate survival strategy! Imagine creating millions of microscopic escape pods, each containing everything needed to start a new life, each capable of surviving conditions that would kill the parent organism. That's exactly what spores are! These tiny reproductive units, often just a few micrometers across, are biological time capsules. They can survive freezing cold, scorching heat, drought, and even radiation. Some spores have been revived after being dormant for thousands of years! Today, we'll explore how fungi, particularly Rhizopus - the common bread mold - master this incredible form of reproduction. We'll see how specialized structures called sporangia produce and release these spores, sending them on journeys that could end inches or continents away. Get ready to discover why spore formation has been one of evolution's most successful strategies for over 400 million years!"
            },
            rhizopus: {
                title: "Rhizopus - The Bread Mold",
                subtitle: "A fungal reproduction master",
                icon: "🍞",
                modelUrl: "https://sketchfab.com/3d-models/tendril-d806820847074b11b056ad43a2beda9e/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Rhizopus, commonly known as bread mold, is a fast-growing fungus that demonstrates spore formation perfectly. Its thread-like hyphae spread across surfaces, while specialized structures rise up to produce and disperse millions of spores, ensuring its survival and spread.",
                concepts: [
                    "Hyphae form branching network (mycelium)",
                    "Stolons spread horizontally across substrate",
                    "Rhizoids anchor and absorb nutrients",
                    "Sporangiophores grow vertically for spore dispersal"
                ],
                funFact: "A single Rhizopus colony can produce over 50,000 spores per sporangium, and with hundreds of sporangia, that's millions of potential new fungi from one piece of moldy bread!",
                objectives: "Learn how Rhizopus structure is perfectly adapted for rapid growth, nutrient absorption, and massive spore production.",
                narration: "Meet Rhizopus, the fungus you've probably seen as black bread mold! This remarkable organism shows us spore formation at its finest. Look at this structure - it's like an alien landscape! Those thread-like filaments are hyphae, which branch and spread to form a network called mycelium. The horizontal hyphae, called stolons, spread across the bread surface like runners, searching for new territory. Where they touch down, root-like structures called rhizoids anchor the fungus and absorb nutrients. But here's where it gets interesting - see those tall stalks rising upward? Those are sporangiophores, literally 'spore-bearing structures.' They grow away from the substrate and toward air currents, positioning their precious cargo for maximum dispersal. At the tip of each sporangiophore, a spherical sporangium develops, packed with thousands of spores. Rhizopus can colonize a piece of bread in just 3-4 days, turning it into a spore-producing factory. This rapid growth and prolific spore production make Rhizopus one of the most successful decomposers on Earth!"
            },
            fungal_cell: {
                title: "The Fungal Cell",
                subtitle: "Building blocks of fungi",
                icon: "🔬",
                modelUrl: "https://sketchfab.com/models/469cf1de95e84ef3adbb628484c8ce60/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Fungal cells have unique features that enable spore formation. With chitinous cell walls for strength, multiple nuclei in some species, and specialized organelles, these cells can rapidly divide and differentiate to produce spores when conditions trigger reproduction.",
                concepts: [
                    "Cell wall made of chitin provides strength",
                    "Can be multinucleate (coenocytic)",
                    "Specialized for rapid growth and division",
                    "Contains enzymes for external digestion"
                ],
                funFact: "Fungal cells can have multiple nuclei without cell walls between them - imagine a subway train with no doors between cars, allowing materials to flow freely throughout!",
                objectives: "Understand how fungal cell structure supports rapid growth and spore production.",
                narration: "Let's zoom into the fungal cell - the basic unit that makes spore formation possible! This isn't like a plant or animal cell. First, notice the cell wall - it's made of chitin, the same material in insect exoskeletons, making it incredibly strong yet flexible. This strength is crucial when building tall sporangiophores that need to stand upright. Many fungal cells are coenocytic, meaning they have multiple nuclei sharing the same cytoplasm without dividing walls. It's like having multiple command centers in one room, allowing for rapid growth and coordinated responses. The cytoplasm streams continuously through the hyphae, distributing nutrients and organelles where needed. These cells are enzyme factories, producing digestive enzymes that break down external food sources - that's why bread mold can digest your food before absorbing it! When it's time for spore formation, these cells can quickly reorganize, channeling resources to sporangia development. The ability to rapidly mobilize cellular resources is key to producing millions of spores in just days. This cellular efficiency makes fungi nature's recycling champions!"
            },
            sporangia: {
                title: "Sporangia - The Spore Factories",
                subtitle: "Where millions of spores are born",
                icon: "💨",
                modelUrl: "https://sketchfab.com/models/ad998243473c4f41abce2cc8818fa7ee/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Sporangia are specialized structures where spores develop. These spherical capsules form at the tips of sporangiophores, containing thousands of spores. When mature, they burst open or dissolve, releasing spores to be carried away by air currents.",
                concepts: [
                    "Spherical structure maximizes spore capacity",
                    "Develops at tip of sporangiophore",
                    "Contains thousands of haploid spores",
                    "Releases spores when mature and dry"
                ],
                funFact: "The sporangium wall is so thin that you can see the dark spores inside, giving Rhizopus its characteristic black appearance - it's like a balloon filled with genetic confetti!",
                objectives: "Discover how sporangia structure and function enable efficient spore production and dispersal.",
                narration: "Behold the sporangium - nature's spore factory! This spherical structure at the tip of the sporangiophore is where the magic happens. Inside this tiny sphere, barely visible to the naked eye, thousands of spores are developing. The process begins when the tip of the sporangiophore swells and forms a dome called the columella. Around this, the sporangium develops like a balloon inflating with spores instead of air. Inside, the cytoplasm divides repeatedly, with each portion receiving a nucleus and becoming wrapped in a protective wall - creating individual spores. The sporangium wall is incredibly thin and delicate, designed to break easily when conditions are right. As the sporangium matures, it turns from white to yellow to black as spores develop their protective coatings. When humidity drops and conditions are dry, the sporangium wall becomes brittle and breaks, or sometimes just dissolves! The slightest air current then carries away the spores like dust. Some sporangia can shoot spores several centimeters using built-up pressure - nature's microscopic cannons! Each sporangium is perfectly engineered for maximum spore production and dispersal efficiency."
            },
            lifecycle: {
                title: "The Complete Life Cycle",
                subtitle: "From spore to spore",
                icon: "🔄",
                modelUrl: "https://sketchfab.com/3d-models/tendril-d806820847074b11b056ad43a2beda9e/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "The Rhizopus life cycle showcases the efficiency of spore reproduction. From a single spore landing on suitable substrate to producing millions of new spores, this cycle can complete in just a few days under favorable conditions, ensuring rapid colonization and survival.",
                concepts: [
                    "Spore germination triggered by moisture and nutrients",
                    "Hyphal growth and mycelium formation",
                    "Asexual reproduction through sporangia",
                    "Sexual reproduction possible between compatible strains"
                ],
                funFact: "In perfect conditions, Rhizopus can complete its entire life cycle in just 96 hours - from spore to producing new spores - faster than it takes to read a novel!",
                objectives: "Trace the complete journey from a landing spore to the release of millions of new spores.",
                narration: "Let's follow the incredible journey of a Rhizopus spore through its complete life cycle! It begins when a single spore, carried by air currents, lands on a suitable surface - perhaps a slice of bread. If moisture and nutrients are present, the spore absorbs water and swells, breaking open its protective coat. A tiny hypha emerges - germination has begun! This first hypha grows rapidly, branching repeatedly to form the mycelium network. Within hours, the fungus is spreading across the surface, with stolons reaching out and rhizoids anchoring down. After just 2-3 days of feeding and growing, the fungus senses it's time to reproduce. Specialized hyphae begin growing upward - the sporangiophores. These aerial hyphae grow away from the substrate, reaching heights of several millimeters. At their tips, sporangia begin forming, swelling with developing spores. By day 4, mature sporangia burst, releasing thousands of spores into the air. Each spore that finds suitable conditions starts the cycle anew. In ideal conditions, one spore can lead to millions within a week - exponential reproduction at its finest!"
            },
            dispersal: {
                title: "Spore Dispersal Mechanisms",
                subtitle: "Traveling the world microscopically",
                icon: "🌬️",
                modelUrl: "https://sketchfab.com/models/ad998243473c4f41abce2cc8818fa7ee/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Spore dispersal is crucial for fungal survival and spread. Various mechanisms including wind, water, and animals help spores travel from microscopic distances to across continents. The tiny size and lightweight nature of spores makes them perfect for aerial travel.",
                concepts: [
                    "Wind dispersal can carry spores thousands of miles",
                    "Spores are hydrophobic, floating on water",
                    "Animals inadvertently transport spores",
                    "Some fungi actively launch spores"
                ],
                funFact: "Fungal spores have been found in jet streams at 30,000 feet altitude, traveling between continents - they're nature's frequent flyers without needing passports!",
                objectives: "Understand the various mechanisms fungi use to disperse spores and colonize new habitats.",
                narration: "Spore dispersal is where physics meets biology in spectacular fashion! These microscopic travelers use every trick in nature's book to spread far and wide. Wind is the primary dispersal agent - spores are so light that even the gentlest breeze can carry them. Their small size, typically 3-30 micrometers, means they have huge surface area relative to their weight, allowing them to float like dust particles. Thermal currents can lift spores high into the atmosphere where jet streams carry them across oceans! But it's not just passive transport. The tall sporangiophores position sporangia in moving air above the still boundary layer near surfaces. Some fungi can detect air movement and time spore release for optimal conditions. Water dispersal works too - spores are often hydrophobic, floating on water surfaces and spreading via rain splash or streams. Animals unknowingly help by carrying spores on fur, feet, or in digestive systems. Some fungi even use explosive mechanisms, building pressure to launch spores like microscopic projectiles. This multi-modal dispersal strategy ensures spores reach every possible habitat, from your kitchen to remote islands!"
            },
            advantages: {
                title: "Advantages of Spore Formation",
                subtitle: "Why spores conquer the world",
                icon: "✨",
                modelUrl: "https://sketchfab.com/models/469cf1de95e84ef3adbb628484c8ce60/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Spore formation offers numerous survival advantages: massive numbers ensure some survive, resistance to harsh conditions allows persistence, wide dispersal colonizes new habitats, and dormancy enables waiting for favorable conditions. These advantages make spore-formers incredibly successful organisms.",
                concepts: [
                    "Numerical advantage - millions from one organism",
                    "Environmental resistance - survive extremes",
                    "Dispersal efficiency - colonize distant habitats",
                    "Temporal escape - dormancy through bad times"
                ],
                funFact: "Some bacterial spores have survived for 250 million years in salt crystals and successfully germinated when given proper conditions - talk about patient!",
                objectives: "Understand why spore formation is one of nature's most successful reproductive strategies.",
                narration: "Let's explore why spore formation is such a winning strategy in nature's survival game! First, there's the numbers game - one Rhizopus can produce millions of spores. Even if 99.99% fail, hundreds still succeed. It's like buying millions of lottery tickets! Second, spores are incredibly tough. Their thick walls and dehydrated state let them survive freezing, boiling, radiation, and toxic chemicals that would kill active cells. They're essentially in suspended animation, using no energy while waiting for good conditions. Third, dispersal efficiency is unmatched. Spores can travel globally on wind currents, colonizing new territories far from parents. This prevents local resource depletion and escapes localized disasters. Fourth, temporal escape through dormancy means spores can 'time travel' through unfavorable periods, germinating years or even centuries later when conditions improve. Finally, the metabolic cost is low - spores are tiny and simple compared to seeds, allowing organisms to produce vastly more propagules with the same resources. These advantages explain why spore-forming organisms have thrived for hundreds of millions of years and colonized every environment on Earth!"
            },
            comparison: {
                title: "Comparing Reproductive Strategies",
                subtitle: "Spores vs other methods",
                icon: "⚖️",
                modelUrl: "https://sketchfab.com/3d-models/yeast-cells-c492cde0bc1d4530ba6d3e702da4ddcd/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Comparing spore formation with other asexual reproduction methods reveals unique advantages. While budding, fission, and fragmentation require the parent's presence, spores can establish new colonies far from the parent. This comparison helps understand when each strategy is most advantageous.",
                concepts: [
                    "Spores: maximum dispersal and survival",
                    "Budding: continuous reproduction while feeding",
                    "Fission: rapid local multiplication",
                    "Seeds: more resources but fewer numbers"
                ],
                funFact: "While a fungus produces millions of spores, a coconut tree produces about 50 seeds per year - but those seeds can float across oceans and establish on distant shores!",
                objectives: "Compare spore formation with other reproductive strategies to understand when each is most advantageous.",
                narration: "Let's compare spore formation with other reproductive strategies to understand nature's toolkit! Look at these yeast cells budding - this is continuous reproduction while the parent feeds, great for stable, nutrient-rich environments. But buds stay local, competing with parents for resources. Bacterial fission is faster, doubling every 20 minutes, but again, offspring remain local. Fragmentation in plants and fungi spreads locally but requires the parent to break apart. Now consider spores - they combine multiple advantages: massive numbers like fission, survival capability exceeding any other method, and dispersal range unmatched by other asexual methods. Compared to seeds, spores are simpler and produced in far greater numbers, though seeds carry more resources for establishment. Each strategy has its niche: budding for continuous growth in stable conditions, fission for rapid local colonization, fragmentation for spreading in connected habitats, seeds for establishing in challenging environments, and spores for conquering new territories and surviving catastrophes. Spore formation is nature's strategy for playing the long game - ensuring survival across space and time. That's why fungi have survived mass extinctions that wiped out other organisms!"
            }
        };

        // Global Variables
        let currentStep = 'introduction';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                // Prefer natural-sounding voices
                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Show/hide additional elements
            const lifecycleStages = document.getElementById('lifecycleStages');
            const advantagesGrid = document.getElementById('advantagesGrid');
            
            if (stepId === 'lifecycle') {
                lifecycleStages.style.display = 'block';
            } else {
                lifecycleStages.style.display = 'none';
            }
            
            if (stepId === 'advantages') {
                advantagesGrid.style.display = 'grid';
            } else {
                advantagesGrid.style.display = 'none';
            }
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['introduction', 'rhizopus', 'fungal_cell', 'sporangia', 'lifecycle', 'dispersal', 'advantages', 'comparison'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['introduction', 'rhizopus', 'fungal_cell', 'sporangia', 'lifecycle', 'dispersal', 'advantages', 'comparison'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                // Auto-advance if guided tour is active
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? '🔊' : '🔇';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['introduction', 'rhizopus', 'fungal_cell', 'sporangia', 'lifecycle', 'dispersal', 'advantages', 'comparison'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Congratulations! You've completed your journey through spore formation. You now understand how fungi like Rhizopus use spores to survive and spread across the world!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "What are the main parts of Rhizopus structure?",
                "How many spores can a single sporangium produce?",
                "What triggers spore germination?",
                "Why are spores so resistant to harsh conditions?",
                "How do spores travel such long distances?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a question to test your knowledge: ${randomQ} Think about what you've learned in this journey!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to the fascinating world of spore formation! We'll explore how fungi like Rhizopus create millions of survival capsules that can travel the world. Let's begin our journey!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>