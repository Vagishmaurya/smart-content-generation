<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budding & Vegetative Propagation - Growing Without Seeds</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.2" d="M0,96L48,112C96,128,192,160,288,186.7C384,213,480,235,576,213.3C672,192,768,128,864,128C960,128,1056,192,1152,197.3C1248,203,1344,149,1392,122.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: wave 10s linear infinite;
        }

        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #56ab2f, #a8e063);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .growth-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #a8e063;
            border-radius: 50%;
            animation: grow 2s ease-in-out infinite;
        }

        @keyframes grow {
            0% { transform: scale(0.3); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.3); }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 340px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #a8e063;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(168, 224, 99, 0.2);
            border: 1px solid rgba(168, 224, 99, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(168, 224, 99, 0.3);
            border-color: #a8e063;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(168, 224, 99, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #56ab2f, #a8e063);
            border-color: #a8e063;
            box-shadow: 0 0 20px rgba(168, 224, 99, 0.5);
            animation: leafGlow 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
        }

        @keyframes leafGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(168, 224, 99, 0.5); }
            50% { box-shadow: 0 0 30px rgba(168, 224, 99, 0.8); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 380px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #a8e063;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(86, 171, 47, 0.1), rgba(168, 224, 99, 0.1));
            border: 1px solid rgba(168, 224, 99, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #a8e063;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #56ab2f;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #56ab2f, #a8e063);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(168, 224, 99, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            flex-wrap: wrap;
            gap: 5px;
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-mini.active {
            color: #a8e063;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #2ecc71;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #a8e063;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #a8e063;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(86, 171, 47, 0.1), rgba(168, 224, 99, 0.1));
            border: 1px solid rgba(46, 204, 113, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "💡";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #2ecc71;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Methods Comparison */
        .methods-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 14px 0;
        }

        .method-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
        }

        .method-title {
            color: #56ab2f;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .method-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 10px;
            line-height: 1.4;
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(168, 224, 99, 0.3);
            border-color: #a8e063;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(168, 224, 99, 0.4);
            border-color: #a8e063;
            box-shadow: 0 0 20px rgba(168, 224, 99, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-plant {
            font-size: 60px;
            animation: sprout 2s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes sprout {
            0% { transform: scale(0.8) rotate(-5deg); }
            50% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(0.8) rotate(-5deg); }
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #56ab2f, #a8e063);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(168, 224, 99, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #56ab2f, #a8e063);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(168, 224, 99, 0.3);
            border-color: #a8e063;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(168, 224, 99, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #56ab2f, #a8e063);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-plant">🌱</div>
            <div class="loading-text">Growing Your Knowledge...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Budding & Vegetative Propagation</div>
        <div class="exhibit-subtitle">
            <span class="growth-indicator"></span>
            Growing Without Seeds
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>🌱</span>
            <span>Asexual Growth Journey</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('introduction')">
                <span>📚</span> Introduction
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('hydra_budding')">
                <span>🐙</span> Hydra Budding
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('yeast_budding')">
                <span>🍄</span> Yeast Budding
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('vegetative')">
                <span>🌿</span> Vegetative
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('bryophyllum')">
                <span>🍃</span> Bryophyllum
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('plant_methods')">
                <span>🌾</span> Methods
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('tissue_culture')">
                <span>🧫</span> Tissue Culture
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('advantages')">
                <span>✨</span> Advantages
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="Organism Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/models/52e8a00e381746f8bda2653fccc43c90/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">📚</div>
            <div class="info-title">
                <h2 id="stepTitle">Introduction to Budding & Vegetative Propagation</h2>
                <div class="info-subtitle" id="stepSubtitle">Nature's cloning techniques</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Journey Progress</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('introduction')">Intro</span>
                <span class="step-mini" onclick="loadJourneyStep('hydra_budding')">Hydra</span>
                <span class="step-mini" onclick="loadJourneyStep('yeast_budding')">Yeast</span>
                <span class="step-mini" onclick="loadJourneyStep('vegetative')">Vegetative</span>
                <span class="step-mini" onclick="loadJourneyStep('bryophyllum')">Bryophyllum</span>
                <span class="step-mini" onclick="loadJourneyStep('plant_methods')">Methods</span>
                <span class="step-mini" onclick="loadJourneyStep('tissue_culture')">Culture</span>
                <span class="step-mini" onclick="loadJourneyStep('advantages')">Benefits</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            Budding and vegetative propagation are sophisticated forms of asexual reproduction where organisms create genetic copies of themselves without seeds or spores. From tiny Hydra growing miniature versions on their bodies to plants sprouting new individuals from leaves and stems, these methods showcase nature's incredible ability to multiply efficiently.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🔬</span> Key Concepts
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>Budding: offspring grows as outgrowth from parent</li>
                    <li>Vegetative: new plants from vegetative parts</li>
                    <li>No genetic variation - produces clones</li>
                    <li>Faster than sexual reproduction</li>
                </ul>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Amazing Fact!</div>
            <div class="fun-fact-text" id="funFact">
                A single strawberry plant can produce up to 100 runner plants in one season through vegetative propagation - that's enough to fill an entire garden from just one plant!
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🎯</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                By exploring this section, you'll understand how organisms use budding and vegetative propagation to reproduce without seeds, and discover how humans harness these methods in agriculture and biotechnology.
            </div>
        </div>

        <div class="methods-grid" id="methodsGrid" style="display:none;">
            <div class="method-card">
                <div class="method-title">Natural Methods</div>
                <div class="method-text">Runners, bulbs, tubers, rhizomes</div>
            </div>
            <div class="method-card">
                <div class="method-title">Artificial Methods</div>
                <div class="method-text">Cutting, grafting, layering, tissue culture</div>
            </div>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            🔊
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ▶️
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ℹ️
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>🚀</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>🎯</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Pedagogical Content
        const JOURNEY_DATA = {
            introduction: {
                title: "Introduction to Budding & Vegetative Propagation",
                subtitle: "Nature's cloning techniques",
                icon: "📚",
                modelUrl: "https://sketchfab.com/models/52e8a00e381746f8bda2653fccc43c90/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Budding and vegetative propagation are sophisticated forms of asexual reproduction where organisms create genetic copies of themselves without seeds or spores. From tiny Hydra growing miniature versions on their bodies to plants sprouting new individuals from leaves and stems, these methods showcase nature's incredible ability to multiply efficiently.",
                concepts: [
                    "Budding: offspring grows as outgrowth from parent",
                    "Vegetative: new plants from vegetative parts",
                    "No genetic variation - produces clones",
                    "Faster than sexual reproduction"
                ],
                funFact: "A single strawberry plant can produce up to 100 runner plants in one season through vegetative propagation - that's enough to fill an entire garden from just one plant!",
                objectives: "By exploring this section, you'll understand how organisms use budding and vegetative propagation to reproduce without seeds, and discover how humans harness these methods in agriculture and biotechnology.",
                narration: "Welcome to the fascinating world of budding and vegetative propagation - nature's original cloning techniques! These methods of asexual reproduction allow organisms to create exact genetic copies of themselves without the need for partners, seeds, or spores. Imagine being able to grow a whole new you from just your finger, or a plant creating babies from its leaves! That's essentially what we're exploring today. Budding is when a new organism grows as a small outgrowth or 'bud' directly from the parent's body, eventually detaching to live independently. Vegetative propagation is when plants create new individuals from their vegetative parts - roots, stems, or leaves - rather than from seeds. Both methods produce clones, ensuring successful traits are passed on unchanged. Let's discover how different organisms have mastered these remarkable reproductive strategies!"
            },
            hydra_budding: {
                title: "Budding in Hydra",
                subtitle: "Growing babies on your body",
                icon: "🐙",
                modelUrl: "https://sketchfab.com/models/52e8a00e381746f8bda2653fccc43c90/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Hydra demonstrates one of nature's most elegant forms of budding. This tiny freshwater polyp grows new individuals directly from its body wall. The bud starts as a small outgrowth, develops tentacles and a mouth, and eventually detaches as a fully formed miniature Hydra.",
                concepts: [
                    "Bud forms from mitotic division of cells",
                    "Develops all parent structures while attached",
                    "Detaches when fully formed (2-3 days)",
                    "Parent can produce multiple buds simultaneously"
                ],
                funFact: "A well-fed Hydra can produce a new bud every 2 days, and each bud can start budding before it even detaches from the parent - creating three generations on one body!",
                objectives: "Learn how Hydra uses budding for rapid reproduction and understand the cellular processes that enable this remarkable ability.",
                narration: "Look at this amazing Hydra with its budding offspring! See that bump growing from its body? That's a baby Hydra in the making! The budding process begins when cells in the body wall start dividing rapidly through mitosis. These cells push outward, forming a small bump that gradually elongates. As the bud grows, it develops all the structures of an adult Hydra - first the body column forms, then tentacles begin to sprout around what will become the mouth. The fascinating part is that the bud shares the parent's digestive cavity initially, receiving nutrients directly. After about 2-3 days, the bud is fully formed with functional tentacles for catching prey. A constriction forms at the base, and the young Hydra detaches to begin independent life. In optimal conditions, a single Hydra can have 2 or 3 buds at different stages simultaneously. This efficient reproduction method allows Hydra populations to explode when food is plentiful!"
            },
            yeast_budding: {
                title: "Budding in Yeast",
                subtitle: "Microscopic multiplication",
                icon: "🍄",
                modelUrl: "https://sketchfab.com/3d-models/yeast-cells-c492cde0bc1d4530ba6d3e702da4ddcd/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Yeast cells reproduce through budding, creating smaller daughter cells that grow from the parent cell. Unlike Hydra's external budding, yeast budding involves intricate cellular reorganization, nuclear division, and unequal cell division, making it a unique form of asexual reproduction.",
                concepts: [
                    "Asymmetric cell division - parent larger than bud",
                    "Nuclear division with one nucleus entering bud",
                    "Bud scars remain on parent cell surface",
                    "Can produce 20-30 buds in lifetime"
                ],
                funFact: "Yeast cells keep a 'birth certificate' - the bud scar where they separated from their parent - and accumulate 'age rings' (bud scars) each time they produce offspring!",
                objectives: "Understand how unicellular organisms like yeast use budding for reproduction and why this process is crucial for industries like brewing and baking.",
                narration: "Here we see yeast cells in various stages of budding - a microscopic marvel happening in your bread dough right now! Unlike the external budding of Hydra, yeast budding is a sophisticated cellular process. It begins when the cell decides to reproduce, triggered by favorable conditions. A small bump appears on the cell surface - this is the bud initial. As it grows, the parent cell's nucleus moves toward the bud and divides. One nucleus stays in the parent, while the other migrates into the growing bud. The bud continues expanding, receiving cytoplasm and organelles from the parent. Notice how the bud remains smaller than the parent? This asymmetric division is characteristic of yeast budding. When the bud reaches about two-thirds the parent's size, a septum forms between them, and they separate. The parent cell keeps a permanent bud scar - a chitin ring that marks where the bud was. After about 20-30 budding cycles, the parent cell surface is covered with scars and can no longer bud. This budding ability makes yeast invaluable in biotechnology, brewing, and baking industries!"
            },
            vegetative: {
                title: "Vegetative Propagation Overview",
                subtitle: "Plants cloning themselves",
                icon: "🌿",
                modelUrl: "https://sketchfab.com/3d-models/eukaryotic-plant-cell-f258c65762e5435c9d58c1aa136b557a/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Vegetative propagation allows plants to reproduce using their vegetative parts - roots, stems, or leaves - rather than seeds. This strategy is common in plants because their cells retain the ability to dedifferentiate and form new organs, a property called totipotency.",
                concepts: [
                    "Uses roots, stems, or leaves for reproduction",
                    "Based on totipotency of plant cells",
                    "Produces genetically identical offspring",
                    "Common in perennial plants"
                ],
                funFact: "The largest organism on Earth is thought to be Pando, a clonal colony of aspen trees in Utah that originated from a single seed and spread through root suckers - it covers 106 acres and weighs 6,000 tons!",
                objectives: "Understand the cellular basis of vegetative propagation and why plants are uniquely capable of this form of reproduction.",
                narration: "Let's explore the plant cell to understand vegetative propagation! This remarkable ability stems from a special property of plant cells called totipotency - the capacity of a single cell to regenerate an entire organism. Look at this plant cell with its rigid cell wall, large vacuole, and chloroplasts. Unlike animal cells, plant cells can dedifferentiate - reverse their specialization and become meristematic (embryonic) again. This means a cell from a leaf, root, or stem can potentially grow into a complete new plant! Vegetative propagation occurs naturally through various structures: runners in strawberries, bulbs in onions, tubers in potatoes, and rhizomes in ginger. Each method involves cells at growing points dividing and differentiating to form roots, shoots, and eventually a complete plant. This process is much faster than seed production and ensures offspring are exact genetic copies of the parent. For plants in stable environments, this is a winning strategy - if the parent thrives there, so will its clones!"
            },
            bryophyllum: {
                title: "Bryophyllum - Leaf Babies",
                subtitle: "Plantlets from leaf margins",
                icon: "🍃",
                modelUrl: "https://sketchfab.com/models/c8458954a7ce4edf9ba6255578bae90c/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Bryophyllum, also known as 'Mother of Thousands,' showcases one of nature's most remarkable vegetative propagation methods. This succulent produces tiny plantlets complete with roots and shoots along its leaf margins, ready to drop and grow into new plants.",
                concepts: [
                    "Plantlets form at leaf notches/margins",
                    "Each plantlet has roots and shoots",
                    "Can produce 20-50 plantlets per leaf",
                    "Plantlets drop when mature and grow independently"
                ],
                funFact: "Bryophyllum is so efficient at reproduction that it's considered invasive in many regions - a single plant can produce thousands of plantlets in one season, earning it the name 'Mother of Thousands'!",
                objectives: "Discover how Bryophyllum's unique leaf structure enables it to produce complete plantlets and understand why this is such an effective reproductive strategy.",
                narration: "Behold the incredible Bryophyllum leaf - a living nursery! Look closely at the leaf margins where you can see tiny plantlets, each a perfect miniature plant complete with leaves and roots. This is one of nature's most extraordinary examples of vegetative propagation. These plantlets develop from meristematic cells located in notches along the leaf edge. When conditions are right, these cells activate and begin dividing, forming tiny buds. Each bud develops into a plantlet while still attached to the parent leaf, drawing nutrients and water. See those tiny roots dangling from each plantlet? They're ready to anchor into soil the moment they drop. The plantlets even have small leaves capable of photosynthesis! When mature, the plantlets detach easily - a breeze, raindrop, or passing animal can dislodge them. Once they land on suitable substrate, they quickly establish roots and begin independent growth. A single Bryophyllum leaf can produce 20-50 plantlets, and since the plant has many leaves, one plant can generate hundreds of offspring without ever producing a single seed. This incredibly efficient reproduction method has made Bryophyllum both a popular houseplant and a problematic invasive species!"
            },
            plant_methods: {
                title: "Methods of Vegetative Propagation",
                subtitle: "Nature's toolkit for plant cloning",
                icon: "🌾",
                modelUrl: "https://sketchfab.com/3d-models/eukaryotic-plant-cell-f258c65762e5435c9d58c1aa136b557a/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Plants have evolved numerous vegetative propagation methods, each suited to different environments and survival strategies. From underground stems to modified roots, these structures allow plants to spread and multiply without relying on seeds.",
                concepts: [
                    "Natural: runners, bulbs, tubers, rhizomes",
                    "Artificial: cutting, grafting, layering",
                    "Each method suited to specific environments",
                    "Combines storage with reproduction"
                ],
                funFact: "The oldest known living plant clone is King's Holly in Tasmania, estimated to be 43,000 years old - it has survived since the last ice age by continuously producing new shoots from its ancient root system!",
                objectives: "Learn different natural and artificial methods of vegetative propagation and understand when each method is advantageous.",
                narration: "Let's explore the diverse toolkit plants use for vegetative propagation! Natural methods have evolved over millions of years. Runners, like in strawberries, are horizontal stems that grow along the ground, producing new plants at nodes. Bulbs, found in onions and tulips, are underground storage organs with a short stem and fleshy leaves that can produce new bulbs. Tubers, like potatoes, are swollen underground stems that store nutrients and sprout new plants from 'eyes.' Rhizomes, seen in ginger and bamboo, are horizontal underground stems that send up new shoots. Humans have developed artificial methods by observing nature. Cutting involves taking a piece of stem, leaf, or root and encouraging it to develop into a new plant. Grafting joins parts from two plants - combining a desirable fruit variety with hardy rootstock. Layering encourages roots to form on a stem while still attached to the parent plant. Each method has advantages: runners quickly colonize open ground, bulbs survive harsh winters, tubers store energy for dry seasons, and rhizomes can break through tough soil. These methods ensure plants can multiply rapidly when conditions are favorable!"
            },
            tissue_culture: {
                title: "Tissue Culture - Modern Plant Cloning",
                subtitle: "From single cell to thousand plants",
                icon: "🧫",
                modelUrl: "https://sketchfab.com/3d-models/eukaryotic-plant-cell-f258c65762e5435c9d58c1aa136b557a/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Tissue culture, or micropropagation, is a modern biotechnology technique that exploits plant cell totipotency to produce thousands of identical plants from a tiny piece of tissue. This method revolutionized agriculture and conservation.",
                concepts: [
                    "Uses totipotency of plant cells",
                    "Sterile conditions essential",
                    "Growth hormones direct development",
                    "Can produce thousands from single explant"
                ],
                funFact: "Tissue culture saved the banana industry! Most commercial bananas are clones produced through tissue culture from a single disease-resistant variety, with millions of identical plants grown worldwide!",
                objectives: "Understand how tissue culture technology harnesses natural plant abilities for mass propagation and why it's crucial for modern agriculture and conservation.",
                narration: "Welcome to the cutting edge of vegetative propagation - tissue culture! This technique takes the natural totipotency of plant cells to an extreme. Starting with a tiny piece of plant tissue called an explant - maybe just a few millimeters of leaf or stem - scientists can produce thousands of identical plants. The process begins in sterile conditions to prevent contamination. The explant is placed on a nutrient medium containing sugars, minerals, vitamins, and carefully balanced plant hormones. Auxins promote root formation, while cytokinins encourage shoot development. By adjusting these hormones, scientists control what the cells become. First, the cells dedifferentiate, forming a mass of unspecialized cells called callus. Then, by changing the hormone balance, the callus is induced to form tiny shoots. These are separated and placed on rooting medium to develop roots. Once complete plantlets form, they're gradually acclimatized to normal growing conditions. This technique is invaluable for producing disease-free plants, conserving endangered species, and rapidly multiplying superior varieties. Orchids, bananas, and many ornamental plants are commercially produced this way. It's vegetative propagation supercharged by science!"
            },
            advantages: {
                title: "Advantages & Applications",
                subtitle: "Why nature and humans use these methods",
                icon: "✨",
                modelUrl: "https://sketchfab.com/models/52e8a00e381746f8bda2653fccc43c90/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Budding and vegetative propagation offer numerous advantages over sexual reproduction: speed, energy efficiency, and genetic consistency. These methods are extensively used in agriculture, horticulture, and conservation to maintain desirable traits and rapidly multiply plants.",
                concepts: [
                    "Faster than seed production",
                    "Preserves exact genetic traits",
                    "No need for pollinators or mates",
                    "Useful for seedless varieties"
                ],
                funFact: "All Hass avocados in the world are clones from a single tree discovered in California in 1926 - vegetative propagation through grafting preserved this delicious variety that can't be reproduced through seeds!",
                objectives: "Understand why organisms evolved these reproductive strategies and how humans exploit them for food production and conservation.",
                narration: "Let's explore why budding and vegetative propagation are such successful strategies! First, speed - while sexual reproduction requires flower formation, pollination, and seed development, vegetative propagation can produce new individuals in days or weeks. Energy efficiency is another advantage - no energy spent on flowers, nectar, or seeds. The parent invests directly in offspring that are guaranteed to survive if conditions remain stable. Genetic consistency is crucial - every offspring is an exact clone, preserving successful gene combinations. This is why your favorite apple variety tastes the same everywhere - they're all clones! For organisms, these methods ensure rapid colonization of favorable habitats. A single Hydra can quickly populate a pond, while one Bryophyllum can cover a hillside. Humans have harnessed these methods for millennia. Grafting combines disease-resistant rootstock with productive varieties. Tissue culture produces millions of identical orchids or virus-free potato seed. These techniques maintain seedless varieties like bananas and preserve rare species. In our changing world, understanding and utilizing these natural cloning methods is more important than ever for food security and conservation!"
            }
        };

        // Global Variables
        let currentStep = 'introduction';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                // Prefer natural-sounding voices
                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Show/hide methods grid
            const methodsGrid = document.getElementById('methodsGrid');
            if (stepId === 'plant_methods') {
                methodsGrid.style.display = 'grid';
            } else {
                methodsGrid.style.display = 'none';
            }
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['introduction', 'hydra_budding', 'yeast_budding', 'vegetative', 'bryophyllum', 'plant_methods', 'tissue_culture', 'advantages'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['introduction', 'hydra_budding', 'yeast_budding', 'vegetative', 'bryophyllum', 'plant_methods', 'tissue_culture', 'advantages'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                // Auto-advance if guided tour is active
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? '🔊' : '🔇';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['introduction', 'hydra_budding', 'yeast_budding', 'vegetative', 'bryophyllum', 'plant_methods', 'tissue_culture', 'advantages'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Excellent work! You've mastered budding and vegetative propagation. You now understand how organisms create clones of themselves and how we use these methods in agriculture and conservation!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "How is budding in Hydra different from budding in yeast?",
                "What is totipotency and why is it important for vegetative propagation?",
                "How does Bryophyllum produce new plants from its leaves?",
                "What are the advantages of vegetative propagation over sexual reproduction?",
                "How does tissue culture work and why is it useful?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a question to test your knowledge: ${randomQ} Think about what you've learned in this journey!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to the world of budding and vegetative propagation! We'll explore how organisms grow copies of themselves without seeds, from Hydra's budding to plants growing from leaves. Let's begin!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>