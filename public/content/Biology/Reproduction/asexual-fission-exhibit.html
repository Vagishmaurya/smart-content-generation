<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asexual Reproduction - Fission: Life's Simplest Strategy</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.2" d="M0,96L48,112C96,128,192,160,288,186.7C384,213,480,235,576,213.3C672,192,768,128,864,128C960,128,1056,192,1152,197.3C1248,203,1344,149,1392,122.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: wave 10s linear infinite;
        }

        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #00c9ff, #92fe9d);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cell-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #92fe9d;
            border-radius: 50%;
            animation: divide 2s ease-in-out infinite;
        }

        @keyframes divide {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.6) translateX(5px); }
            60% { transform: scale(0.6) translateX(-5px); }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 320px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #92fe9d;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(146, 254, 157, 0.2);
            border: 1px solid rgba(146, 254, 157, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(146, 254, 157, 0.3);
            border-color: #92fe9d;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(146, 254, 157, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #00c9ff, #92fe9d);
            border-color: #92fe9d;
            box-shadow: 0 0 20px rgba(146, 254, 157, 0.5);
            animation: cellGlow 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
        }

        @keyframes cellGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(146, 254, 157, 0.5); }
            50% { box-shadow: 0 0 30px rgba(146, 254, 157, 0.8); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 380px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #92fe9d;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(0, 201, 255, 0.1), rgba(146, 254, 157, 0.1));
            border: 1px solid rgba(146, 254, 157, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #92fe9d;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #00c9ff;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00c9ff, #92fe9d);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(146, 254, 157, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            flex-wrap: wrap;
            gap: 5px;
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-mini.active {
            color: #92fe9d;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #2ecc71;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #92fe9d;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #92fe9d;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(0, 201, 255, 0.1), rgba(146, 254, 157, 0.1));
            border: 1px solid rgba(46, 204, 113, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "💡";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #2ecc71;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Comparison Table */
        .comparison-table {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin: 16px 0;
        }

        .comparison-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th {
            color: #92fe9d;
            font-size: 12px;
            font-weight: 600;
            padding: 8px 4px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            text-align: left;
        }

        .comparison-table td {
            color: rgba(255, 255, 255, 0.85);
            font-size: 11px;
            padding: 6px 4px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(146, 254, 157, 0.3);
            border-color: #92fe9d;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(146, 254, 157, 0.4);
            border-color: #92fe9d;
            box-shadow: 0 0 20px rgba(146, 254, 157, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-cell {
            font-size: 60px;
            animation: divideLoad 2s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes divideLoad {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00c9ff, #92fe9d);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(146, 254, 157, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #00c9ff, #92fe9d);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(146, 254, 157, 0.3);
            border-color: #92fe9d;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(146, 254, 157, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00c9ff, #92fe9d);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-cell">🦠</div>
            <div class="loading-text">Preparing Cell Division Experience...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Asexual Reproduction - Fission</div>
        <div class="exhibit-subtitle">
            <span class="cell-indicator"></span>
            Life's Simplest Strategy
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>🦠</span>
            <span>Types of Fission</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('introduction')">
                <span>📚</span> Introduction
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('prokaryotic')">
                <span>🦠</span> Prokaryotes
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('amoeba')">
                <span>🔬</span> Amoeba
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('leishmania')">
                <span>🦟</span> Leishmania
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('plasmodium')">
                <span>🦠</span> Plasmodium
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('yeast')">
                <span>🍄</span> Yeast
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('comparison')">
                <span>📊</span> Compare
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="Cell Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/3d-models/prokaryotic-cell-5473818c62724028b5883d02f36b7153/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">📚</div>
            <div class="info-title">
                <h2 id="stepTitle">Introduction to Asexual Reproduction</h2>
                <div class="info-subtitle" id="stepSubtitle">The fastest way to multiply</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Journey Progress</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('introduction')">Intro</span>
                <span class="step-mini" onclick="loadJourneyStep('prokaryotic')">Prokaryotes</span>
                <span class="step-mini" onclick="loadJourneyStep('amoeba')">Amoeba</span>
                <span class="step-mini" onclick="loadJourneyStep('leishmania')">Leishmania</span>
                <span class="step-mini" onclick="loadJourneyStep('plasmodium')">Plasmodium</span>
                <span class="step-mini" onclick="loadJourneyStep('yeast')">Yeast</span>
                <span class="step-mini" onclick="loadJourneyStep('comparison')">Compare</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            Asexual reproduction through fission is nature's most ancient and efficient method of creating new life. In this process, a single parent cell divides to produce identical offspring without the need for a partner. This strategy has allowed single-celled organisms to thrive for billions of years, rapidly colonizing every environment on Earth.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🔬</span> Key Concepts
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>Single parent produces identical offspring</li>
                    <li>No gametes or fertilization required</li>
                    <li>Rapid population growth possible</li>
                    <li>Common in unicellular organisms</li>
                </ul>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Amazing Fact!</div>
            <div class="fun-fact-text" id="funFact">
                Under ideal conditions, a single bacterium dividing every 20 minutes could produce a colony weighing more than the Earth in just 48 hours! Thankfully, limited resources prevent this from happening.
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🎯</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                By exploring this section, you'll understand different types of fission, how various organisms use this strategy, and why it's such an effective method of reproduction.
            </div>
        </div>

        <div class="comparison-table" id="comparisonTableDiv" style="display:none;">
            <table id="comparisonTable">
                <thead>
                    <tr>
                        <th>Organism</th>
                        <th>Type</th>
                        <th>Time</th>
                        <th>Special Features</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Bacteria</td>
                        <td>Binary</td>
                        <td>20 min</td>
                        <td>Simple division</td>
                    </tr>
                    <tr>
                        <td>Amoeba</td>
                        <td>Binary</td>
                        <td>30 min</td>
                        <td>Any plane</td>
                    </tr>
                    <tr>
                        <td>Leishmania</td>
                        <td>Binary</td>
                        <td>6-8 hrs</td>
                        <td>Longitudinal</td>
                    </tr>
                    <tr>
                        <td>Plasmodium</td>
                        <td>Multiple</td>
                        <td>48-72 hrs</td>
                        <td>Many at once</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            🔊
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ▶️
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ℹ️
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>🚀</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>🎯</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Pedagogical Content
        const JOURNEY_DATA = {
            introduction: {
                title: "Introduction to Asexual Reproduction",
                subtitle: "The fastest way to multiply",
                icon: "📚",
                modelUrl: "https://sketchfab.com/3d-models/prokaryotic-cell-5473818c62724028b5883d02f36b7153/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Asexual reproduction through fission is nature's most ancient and efficient method of creating new life. In this process, a single parent cell divides to produce identical offspring without the need for a partner. This strategy has allowed single-celled organisms to thrive for billions of years, rapidly colonizing every environment on Earth.",
                concepts: [
                    "Single parent produces identical offspring",
                    "No gametes or fertilization required",
                    "Rapid population growth possible",
                    "Common in unicellular organisms"
                ],
                funFact: "Under ideal conditions, a single bacterium dividing every 20 minutes could produce a colony weighing more than the Earth in just 48 hours! Thankfully, limited resources prevent this from happening.",
                objectives: "By exploring this section, you'll understand different types of fission, how various organisms use this strategy, and why it's such an effective method of reproduction.",
                narration: "Welcome to the world of asexual reproduction - life's simplest and fastest way to multiply! Imagine being able to create an exact copy of yourself without needing a partner. That's exactly what single-celled organisms do through fission. This prokaryotic cell you see represents the simplest form of life - bacteria. These organisms have been using fission to reproduce for over 3.5 billion years, making them the most successful life forms on Earth. Fission comes in different forms: binary fission where one becomes two, and multiple fission where one becomes many. Each method has evolved to suit different organisms and their environments. Let's explore how different organisms have mastered this ancient art of self-replication!"
            },
            prokaryotic: {
                title: "Prokaryotic Cell Division",
                subtitle: "The original cell splitters",
                icon: "🦠",
                modelUrl: "https://sketchfab.com/3d-models/prokaryotic-cell-5473818c62724028b5883d02f36b7153/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Prokaryotes like bacteria use binary fission - the simplest form of cell division. Their circular DNA replicates, attaches to the cell membrane, and as the cell grows, the DNA copies separate. The cell then pinches in the middle, creating two identical daughter cells.",
                concepts: [
                    "No nucleus - DNA floats freely in cytoplasm",
                    "Circular DNA called nucleoid",
                    "Division takes about 20 minutes",
                    "Can produce millions of cells in hours"
                ],
                funFact: "E. coli bacteria can divide every 20 minutes. Starting with one cell, you'd have over 16 million bacteria in just 8 hours!",
                objectives: "Understand how prokaryotic cells divide through binary fission and why this simple process is so efficient.",
                narration: "Look at this prokaryotic cell - the simplest form of cellular life! Notice it has no nucleus - its circular DNA, called the nucleoid, floats freely in the cytoplasm. When it's time to divide, the process is elegantly simple. First, the circular DNA attaches to the cell membrane and begins to replicate. As the cell grows, the two DNA copies are pulled apart by the expanding membrane. Then, the cell membrane begins to pinch inward at the cell's midpoint, forming a septum. This septum eventually divides the cell into two identical daughter cells, each with its own copy of the genetic material. The entire process takes just 20 minutes in ideal conditions. This simplicity is key to bacterial success - they can respond rapidly to environmental changes by quickly producing huge populations!"
            },
            amoeba: {
                title: "Binary Fission in Amoeba",
                subtitle: "Division in any direction",
                icon: "🔬",
                modelUrl: "https://sketchfab.com/3d-models/animal-cell-downloadable-ddc40bb0900544959f02d3ff83c32615/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Amoeba, a single-celled eukaryote, divides through binary fission but with more complexity than bacteria. Unlike prokaryotes, Amoeba has a true nucleus that must undergo mitosis. The division can occur in any plane, and the process takes about 30 minutes to complete.",
                concepts: [
                    "Eukaryotic cell with true nucleus",
                    "Nuclear division (mitosis) occurs first",
                    "Cytoplasm divides after nuclear division",
                    "Division plane is random - no fixed orientation"
                ],
                funFact: "An Amoeba can 'choose' when to divide based on environmental conditions. If food is scarce, it can delay division for weeks!",
                objectives: "Learn how eukaryotic organisms like Amoeba perform binary fission differently from prokaryotes.",
                narration: "Here we see an animal cell representing Amoeba - a fascinating single-celled eukaryote. Unlike bacteria, Amoeba has a true nucleus containing its DNA. Watch how binary fission works in this more complex cell. First, the nucleus undergoes mitosis - the nuclear envelope breaks down, chromosomes duplicate and separate, and two new nuclei form. This nuclear division is followed by cytokinesis, where the cytoplasm divides. In Amoeba, this division can happen in any plane - there's no fixed orientation like we'll see in other organisms. The cell elongates, develops a constriction in the middle, and gradually pinches into two daughter cells. Each daughter gets one nucleus and roughly half the cytoplasm with its organelles. The whole process takes about 30 minutes - slower than bacteria but still remarkably fast for such a complex cell!"
            },
            leishmania: {
                title: "Binary Fission in Leishmania",
                subtitle: "Division with direction",
                icon: "🦟",
                modelUrl: "https://sketchfab.com/3d-models/eukaryotic-cell-cross-section-74f714127a8c4211bb1a2cac7195fb1a/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Leishmania, the parasite causing leishmaniasis, shows a unique pattern of binary fission. It divides longitudinally (lengthwise), starting from the anterior end with its flagellum. This specific division plane ensures both daughter cells inherit essential structures.",
                concepts: [
                    "Longitudinal binary fission (lengthwise)",
                    "Division starts at flagellar end",
                    "Flagellum duplicates before division",
                    "Takes 6-8 hours to complete"
                ],
                funFact: "Leishmania parasites can switch between two forms - one with a long flagellum for swimming in the sandfly vector, and one with a short flagellum for living inside human cells!",
                objectives: "Discover how Leishmania's specialized longitudinal fission ensures proper distribution of cellular structures.",
                narration: "This eukaryotic cell represents Leishmania, a parasitic protozoan with a unique division strategy. Unlike Amoeba's random division plane, Leishmania always divides longitudinally - from front to back. The process begins at the anterior end where the flagellum is located. First, the basal body of the flagellum duplicates, and a new flagellum begins to grow. Then the nucleus divides, followed by the kinetoplast - a specialized mitochondrial structure unique to these parasites. As division continues, a cleavage furrow forms starting from the flagellar pocket and extends backward, gradually splitting the cell lengthwise. This specific orientation ensures both daughter cells receive all essential structures, including a flagellum for movement and the kinetoplast for energy production. The entire process takes 6-8 hours, much longer than simple bacteria but crucial for maintaining the parasite's complex structure."
            },
            plasmodium: {
                title: "Multiple Fission in Plasmodium",
                subtitle: "One becomes many",
                icon: "🦠",
                modelUrl: "https://sketchfab.com/3d-models/eukaryotic-cell-cross-section-74f714127a8c4211bb1a2cac7195fb1a/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Plasmodium, the malaria parasite, uses multiple fission (schizogony) to reproduce rapidly within host cells. The nucleus divides multiple times without cytoplasmic division, creating a multinucleated cell. Then, the cytoplasm divides around each nucleus, releasing many daughter cells simultaneously.",
                concepts: [
                    "Multiple nuclear divisions without cytoplasmic division",
                    "Forms multinucleated schizont stage",
                    "Produces 8-32 merozoites at once",
                    "Synchronized release causes fever cycles"
                ],
                funFact: "The synchronized release of Plasmodium parasites from red blood cells is what causes the characteristic fever cycles in malaria - every 48 or 72 hours depending on the species!",
                objectives: "Understand how multiple fission allows Plasmodium to rapidly increase its numbers within a host.",
                narration: "Here we witness one of nature's most dramatic reproductive strategies - multiple fission in Plasmodium, the malaria parasite. Unlike binary fission where one becomes two, Plasmodium can produce dozens of offspring simultaneously! The process begins when a single parasite invades a red blood cell. Instead of dividing immediately, its nucleus undergoes multiple rounds of division without the cytoplasm dividing. This creates a large multinucleated cell called a schizont. The nucleus might divide 3, 4, or even 5 times, producing 8, 16, or 32 nuclei! Only after all nuclear divisions are complete does the cytoplasm divide, wrapping around each nucleus to form individual daughter cells called merozoites. When ready, all merozoites burst out of the host cell simultaneously, each ready to invade a new red blood cell. This synchronized release every 48-72 hours is what causes the periodic fever spikes in malaria patients!"
            },
            yeast: {
                title: "Budding in Yeast",
                subtitle: "A special type of fission",
                icon: "🍄",
                modelUrl: "https://sketchfab.com/3d-models/yeast-cells-c492cde0bc1d4530ba6d3e702da4ddcd/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Yeast reproduces through budding, a modified form of fission. A small outgrowth (bud) forms on the parent cell, receives a copy of the nucleus, and eventually separates as a new individual. Unlike typical fission, the division is unequal - the parent remains larger than the offspring.",
                concepts: [
                    "Asymmetric division - unequal cell sizes",
                    "Bud forms as small outgrowth",
                    "Nuclear division followed by migration",
                    "Bud scars remain on parent cell"
                ],
                funFact: "A yeast cell can only produce about 20-30 buds in its lifetime because each budding leaves a scar, and new buds cannot form on scarred areas!",
                objectives: "Learn how budding in yeast represents a unique form of asexual reproduction different from typical fission.",
                narration: "Look at these yeast cells demonstrating budding - a special type of asexual reproduction! Unlike the equal division we've seen in other organisms, yeast produces offspring through an unequal process. It starts when a small bump, called a bud, begins to form on the parent cell's surface. As the bud grows, the parent cell's nucleus divides, and one nucleus migrates into the developing bud. The bud continues to enlarge, receiving cytoplasm and organelles from the parent. Eventually, the bud reaches a critical size and separates, becoming an independent cell. Notice how the parent cell remains larger than its offspring? Also, see those marks on some cells? Those are bud scars - permanent reminders of previous offspring. A yeast cell accumulates these scars with each budding event and can only produce buds from unscarred areas. This limits a cell to about 20-30 budding cycles in its lifetime. It's nature's way of ensuring generational turnover even in these simple organisms!"
            },
            comparison: {
                title: "Comparing Fission Types",
                subtitle: "Different strategies for different organisms",
                icon: "📊",
                modelUrl: "https://sketchfab.com/3d-models/eukaryotic-plant-cell-f258c65762e5435c9d58c1aa136b557a/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Each type of fission represents an evolutionary solution to the challenge of reproduction. From the simple binary fission of bacteria to the complex multiple fission of Plasmodium, each method is perfectly adapted to the organism's lifestyle and environment.",
                concepts: [
                    "Binary fission: quick and simple, one becomes two",
                    "Longitudinal fission: ensures proper structure distribution",
                    "Multiple fission: rapid population increase",
                    "Budding: allows continuous reproduction"
                ],
                funFact: "If all organisms used multiple fission like Plasmodium, the world would be overrun in days! The variety of fission types helps maintain ecological balance.",
                objectives: "Compare and contrast different types of fission to understand how each suits different organisms' needs.",
                narration: "Let's compare all the fascinating types of fission we've explored! Each represents millions of years of evolution, perfectly suited to its organism's needs. Binary fission in bacteria is the speed champion - simple, fast, and efficient. One cell becomes two in just 20 minutes. Amoeba's binary fission is more complex, taking 30 minutes, but allows division in any direction for maximum flexibility. Leishmania's longitudinal fission takes 6-8 hours but ensures both daughters get essential structures like flagella. Plasmodium's multiple fission is the numbers game - taking 48-72 hours but producing up to 32 offspring at once, perfect for a parasite that needs to overwhelm its host's defenses. And yeast's budding allows continuous reproduction while maintaining the parent cell. Each strategy reflects the organism's environment: bacteria need speed to colonize rapidly, Plasmodium needs numbers to survive in a hostile host, and yeast needs sustainability for long-term survival. This diversity in reproductive strategies is what makes life so remarkably adaptable!"
            }
        };

        // Global Variables
        let currentStep = 'introduction';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                // Prefer natural-sounding voices
                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Show/hide comparison table
            const compTable = document.getElementById('comparisonTableDiv');
            if (stepId === 'comparison') {
                compTable.style.display = 'block';
            } else {
                compTable.style.display = 'none';
            }
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['introduction', 'prokaryotic', 'amoeba', 'leishmania', 'plasmodium', 'yeast', 'comparison'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['introduction', 'prokaryotic', 'amoeba', 'leishmania', 'plasmodium', 'yeast', 'comparison'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                // Auto-advance if guided tour is active
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? '🔊' : '🔇';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['introduction', 'prokaryotic', 'amoeba', 'leishmania', 'plasmodium', 'yeast', 'comparison'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Excellent work! You've mastered the different types of fission in asexual reproduction. You now understand how organisms from bacteria to parasites multiply without a partner. Feel free to explore any section again or test your knowledge with our quiz!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "What's the main difference between binary and multiple fission?",
                "Why does Leishmania divide longitudinally instead of in any direction?",
                "How many daughter cells can Plasmodium produce through multiple fission?",
                "What makes budding in yeast different from binary fission?",
                "Which type of fission is fastest and why?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a question to test your knowledge: ${randomQ} Think about what you've learned in this journey!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to the fascinating world of asexual reproduction through fission! We'll explore how different organisms, from simple bacteria to complex parasites, use this ancient method to multiply. Let's begin our journey!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>