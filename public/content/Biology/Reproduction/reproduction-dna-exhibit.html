<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproduction & DNA Copying - The Blueprint of Life</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.2" d="M0,96L48,112C96,128,192,160,288,186.7C384,213,480,235,576,213.3C672,192,768,128,864,128C960,128,1056,192,1152,197.3C1248,203,1344,149,1392,122.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: wave 10s linear infinite;
        }

        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #00d4ff, #090979);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dna-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #00d4ff;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.7; }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 280px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #00d4ff;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid rgba(0, 212, 255, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(0, 212, 255, 0.3);
            border-color: #00d4ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #090979, #00d4ff);
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            animation: glow 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.5); }
            50% { box-shadow: 0 0 30px rgba(0, 212, 255, 0.8); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 380px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #00d4ff;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(9, 9, 121, 0.1));
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #00d4ff;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #090979;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #090979);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-mini.active {
            color: #00d4ff;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #2ecc71;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #00d4ff;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #00d4ff;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(0, 212, 255, 0.1));
            border: 1px solid rgba(46, 204, 113, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "üí°";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #2ecc71;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(0, 212, 255, 0.3);
            border-color: #00d4ff;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(0, 212, 255, 0.4);
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-dna {
            font-size: 60px;
            animation: spin 2s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #090979);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 212, 255, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #00d4ff, #090979);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(0, 212, 255, 0.3);
            border-color: #00d4ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00d4ff, #090979);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-dna">üß¨</div>
            <div class="loading-text">Unraveling the Blueprint of Life...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Reproduction & DNA Copying</div>
        <div class="exhibit-subtitle">
            <span class="dna-indicator"></span>
            The Blueprint of Life
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>üß¨</span>
            <span>DNA's Journey</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('why_reproduce')">
                <span>‚ùì</span> Why Reproduce
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('dna_structure')">
                <span>üß¨</span> DNA Structure
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('dna_copying')">
                <span>üìã</span> DNA Copying
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('chromosomes')">
                <span>üéØ</span> Chromosomes
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('nucleus')">
                <span>‚öõÔ∏è</span> Nucleus
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('variation')">
                <span>üåà</span> Variation
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="DNA Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/3d-models/human-dna-746f0754e7cb45a4b54840e1b858b01d/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">‚ùì</div>
            <div class="info-title">
                <h2 id="stepTitle">Why Do Organisms Reproduce?</h2>
                <div class="info-subtitle" id="stepSubtitle">The fundamental drive of life</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Journey Progress</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('why_reproduce')">Why</span>
                <span class="step-mini" onclick="loadJourneyStep('dna_structure')">Structure</span>
                <span class="step-mini" onclick="loadJourneyStep('dna_copying')">Copying</span>
                <span class="step-mini" onclick="loadJourneyStep('chromosomes')">Chromosomes</span>
                <span class="step-mini" onclick="loadJourneyStep('nucleus')">Nucleus</span>
                <span class="step-mini" onclick="loadJourneyStep('variation')">Variation</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            Reproduction is the fundamental characteristic that defines life. Every living organism, from the tiniest bacteria to the largest whale, shares this remarkable ability to create copies of itself. But why? Reproduction ensures the continuity of species, passing on genetic information from one generation to the next, creating an unbroken chain of life that stretches back billions of years.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>üî¨</span> Key Concepts
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>Reproduction ensures species survival</li>
                    <li>DNA carries hereditary information</li>
                    <li>Each generation inherits traits from parents</li>
                    <li>Variation helps species adapt and evolve</li>
                </ul>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Amazing Fact!</div>
            <div class="fun-fact-text" id="funFact">
                If you could unravel all the DNA in your body and stretch it out, it would reach from Earth to the Sun and back over 600 times! That's about 10 billion miles of genetic instructions packed into your cells!
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>üéØ</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                By exploring this section, you'll understand the biological importance of reproduction and how organisms pass on their genetic information to ensure species survival.
            </div>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            üîä
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ‚ñ∂Ô∏è
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ‚ÑπÔ∏è
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>üöÄ</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>üéØ</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Pedagogical Content
        const JOURNEY_DATA = {
            why_reproduce: {
                title: "Why Do Organisms Reproduce?",
                subtitle: "The fundamental drive of life",
                icon: "‚ùì",
                modelUrl: "https://sketchfab.com/3d-models/human-dna-746f0754e7cb45a4b54840e1b858b01d/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Reproduction is the fundamental characteristic that defines life. Every living organism, from the tiniest bacteria to the largest whale, shares this remarkable ability to create copies of itself. But why? Reproduction ensures the continuity of species, passing on genetic information from one generation to the next, creating an unbroken chain of life that stretches back billions of years.",
                concepts: [
                    "Reproduction ensures species survival",
                    "DNA carries hereditary information",
                    "Each generation inherits traits from parents",
                    "Variation helps species adapt and evolve"
                ],
                funFact: "If you could unravel all the DNA in your body and stretch it out, it would reach from Earth to the Sun and back over 600 times! That's about 10 billion miles of genetic instructions packed into your cells!",
                objectives: "By exploring this section, you'll understand the biological importance of reproduction and how organisms pass on their genetic information to ensure species survival.",
                narration: "Welcome to the fascinating world of reproduction and DNA! Have you ever wondered why all living things reproduce? It's not just about creating more individuals - it's about survival. When organisms reproduce, they pass on their DNA, the instruction manual for life, to the next generation. This ensures that even when individual organisms die, their species continues. Look at this DNA double helix - this twisted ladder structure contains all the information needed to build and maintain a living organism. Each rung of the ladder is made of chemical bases that spell out the genetic code. Without reproduction, life on Earth would have ended with the first generation of organisms billions of years ago!"
            },
            dna_structure: {
                title: "DNA - The Double Helix",
                subtitle: "Nature's twisted ladder",
                icon: "üß¨",
                modelUrl: "https://sketchfab.com/3d-models/human-dna-746f0754e7cb45a4b54840e1b858b01d/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "DNA (Deoxyribonucleic Acid) is the molecule of heredity. Its elegant double helix structure, discovered by Watson and Crick, consists of two strands wound around each other like a twisted ladder. The sides are made of sugar and phosphate molecules, while the rungs consist of paired bases: Adenine with Thymine, and Cytosine with Guanine.",
                concepts: [
                    "Double helix structure with two complementary strands",
                    "Four bases: Adenine (A), Thymine (T), Cytosine (C), Guanine (G)",
                    "A always pairs with T, C always pairs with G",
                    "Sugar-phosphate backbone provides structural support"
                ],
                funFact: "The human genome contains about 3 billion base pairs. If you were to type out your entire genetic code at 60 words per minute, 8 hours a day, it would take you about 50 years to finish!",
                objectives: "Understand the structure of DNA and how the arrangement of bases creates the genetic code that determines all traits of living organisms.",
                narration: "Behold the magnificent DNA double helix - the most important molecule in biology! This twisted ladder structure is nature's way of storing genetic information. Notice how the two strands spiral around each other? They're held together by chemical bonds between the bases. The beauty of this structure is in its simplicity and elegance. The bases always pair in the same way: Adenine with Thymine, and Cytosine with Guanine. This complementary base pairing is crucial - it means that if you know the sequence on one strand, you automatically know the sequence on the other. This is the secret to how DNA can copy itself so accurately. The order of these bases along the DNA strand spells out genes, like letters forming words and sentences in the book of life!"
            },
            dna_copying: {
                title: "DNA Replication - Making Copies",
                subtitle: "The cellular copy machine",
                icon: "üìã",
                modelUrl: "https://sketchfab.com/3d-models/dna-60e95170b37549e3b45ee490b74bb112/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "DNA replication is the process by which DNA makes an exact copy of itself. This happens every time a cell divides. The double helix unzips, and each strand serves as a template for building a new complementary strand. Special enzymes called DNA polymerases read the template and add the correct bases.",
                concepts: [
                    "DNA unwinds and separates into two strands",
                    "Each strand acts as a template for a new strand",
                    "DNA polymerase adds complementary bases",
                    "Semi-conservative replication - each new DNA has one old and one new strand"
                ],
                funFact: "DNA polymerase can add about 1000 bases per second, but it's so accurate that it only makes about one mistake per billion bases copied! That's like typing this entire exhibit 100,000 times and making only one typo!",
                objectives: "Learn how DNA replicates itself with remarkable accuracy, ensuring genetic information is faithfully passed from cell to cell and generation to generation.",
                narration: "Watch the amazing process of DNA replication in action! See how the double helix unzips like a zipper? This creates what we call a replication fork. Each separated strand now serves as a template for building a new complementary strand. The enzyme DNA polymerase moves along each template strand, reading the bases and adding the matching complementary base to build the new strand. If it reads an A, it adds a T. If it reads a C, it adds a G, and vice versa. This process is called semi-conservative replication because each new DNA molecule contains one original strand and one newly made strand. The accuracy of this process is astounding - mistakes are incredibly rare thanks to proofreading mechanisms. This is how every cell in your body contains the exact same genetic information!"
            },
            chromosomes: {
                title: "Chromosomes - DNA Packaging",
                subtitle: "Organizing the genetic library",
                icon: "üéØ",
                modelUrl: "https://sketchfab.com/3d-models/chromosome-homologous-centromere-kinetochore-6fe42c13ab664418b990e5849a9dacfd/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Chromosomes are highly organized structures of DNA and proteins. During cell division, DNA condenses into these X-shaped structures to ensure accurate distribution of genetic material. Humans have 46 chromosomes (23 pairs), with each parent contributing one chromosome to each pair.",
                concepts: [
                    "DNA wraps around histone proteins for compact storage",
                    "Centromere holds sister chromatids together",
                    "Kinetochore attaches to spindle fibers during division",
                    "Homologous pairs carry genes for the same traits"
                ],
                funFact: "If you stretched out all the DNA from just one of your cells, it would be about 2 meters long. But when packed into chromosomes, it fits into a nucleus that's only about 6 micrometers across - that's 100,000 times smaller!",
                objectives: "Discover how cells organize and package DNA into chromosomes for efficient storage and accurate distribution during cell division.",
                narration: "Here we see a chromosome - DNA in its most condensed form! During most of a cell's life, DNA is loosely spread throughout the nucleus. But when it's time to divide, the DNA condenses into these compact X-shaped structures we call chromosomes. Look at the center where the two arms meet - that's the centromere, which acts like a handle that the cell can grab onto during division. The kinetochore, shown here as protein complexes, attaches to spindle fibers that pull the chromosomes apart. Each species has a specific number of chromosomes - humans have 46, arranged in 23 pairs. You inherited 23 from your mother and 23 from your father. These chromosomes carry all your genes - about 20,000 to 25,000 of them - that determine everything from your eye color to your blood type!"
            },
            chromosome_pair: {
                title: "Chromosome Pairs - Maternal and Paternal",
                subtitle: "Two versions of every story",
                icon: "üë•",
                modelUrl: "https://sketchfab.com/3d-models/chromosome-bd426b178dcb4dde8045f53128b5c376/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Homologous chromosome pairs consist of one chromosome from each parent. While they carry genes for the same traits, they may have different versions (alleles) of those genes. This is why you might have your mother's eyes but your father's hair color.",
                concepts: [
                    "Homologous pairs have same genes but different alleles",
                    "One chromosome from mother, one from father",
                    "Crossing over during meiosis increases variation",
                    "Sex chromosomes determine biological sex (XX or XY)"
                ],
                funFact: "You are genetically unique! The chance of your parents producing another child with the exact same genetic makeup as you (excluding identical twins) is about 1 in 70 trillion - that's more than all the humans who have ever lived!",
                objectives: "Understand how chromosome pairs from both parents combine to create genetic diversity and determine inherited traits.",
                narration: "Look at this pair of homologous chromosomes - one from mom, one from dad! They're similar in size and shape, and they carry genes for the same traits, but the specific versions of those genes might be different. For example, both chromosomes might have a gene for eye color at the same location, but one might code for brown eyes while the other codes for blue. This is why you're a unique combination of your parents' traits. During the formation of sex cells, these chromosome pairs can exchange segments in a process called crossing over, creating even more variation. Of your 23 pairs, 22 are regular pairs called autosomes, and one pair determines your biological sex - XX for females and XY for males. This incredible system ensures that every person is genetically unique!"
            },
            nucleus: {
                title: "The Nucleus - Command Center",
                subtitle: "Where DNA is stored and protected",
                icon: "‚öõÔ∏è",
                modelUrl: "https://sketchfab.com/3d-models/nucleus-cell-organelles-7e01bff42b2d47fab640503bcef071e6/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "The nucleus is the control center of the cell, housing and protecting the DNA. Surrounded by a double membrane called the nuclear envelope, it regulates what enters and exits through nuclear pores. Inside, the nucleolus produces ribosomes, while chromatin (DNA and proteins) fills the nuclear space.",
                concepts: [
                    "Nuclear envelope protects DNA from damage",
                    "Nuclear pores control molecular traffic",
                    "Nucleolus manufactures ribosome components",
                    "Chromatin can be tightly or loosely packed"
                ],
                funFact: "The nucleus has about 3,000 to 4,000 nuclear pores, each acting like a security checkpoint. Every second, about 1,000 molecules pass through each pore - that's millions of molecular movements every second!",
                objectives: "Explore how the nucleus protects and manages DNA, controlling all cellular activities and ensuring genetic information is safely stored and accessed when needed.",
                narration: "Welcome to the nucleus - the cell's command center and DNA vault! This spherical structure is surrounded by a double membrane called the nuclear envelope, which acts like a high-security fortress protecting your genetic information. See those tiny openings? Those are nuclear pores - sophisticated gateways that control what enters and exits the nucleus. Only molecules with the right 'security clearance' can pass through. Inside, you can see the nucleolus - that's where the cell manufactures ribosomes, the protein-making machines. The rest of the space is filled with chromatin - DNA wrapped around proteins. When the cell isn't dividing, the DNA is loosely packed so genes can be read and used. But during division, it condenses into chromosomes. The nucleus is like a library, vault, and factory all in one, managing the genetic information that runs the entire cell!"
            },
            variation: {
                title: "Variation - The Spice of Life",
                subtitle: "How differences arise in reproduction",
                icon: "üåà",
                modelUrl: "https://sketchfab.com/3d-models/dna-60e95170b37549e3b45ee490b74bb112/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Variation is the key to evolution and survival. During reproduction, several mechanisms create differences between parents and offspring: mutations introduce new traits, sexual reproduction combines genes from two parents, and crossing over shuffles genetic information. This variation allows populations to adapt to changing environments.",
                concepts: [
                    "Mutations create new genetic variations",
                    "Sexual reproduction combines genes from two parents",
                    "Crossing over shuffles genetic information",
                    "Variation enables natural selection and evolution"
                ],
                funFact: "No two humans (except identical twins) have ever had the same DNA. With 3 billion base pairs and countless possible combinations, the variety of human genetic diversity is practically infinite!",
                objectives: "Understand how genetic variation arises during reproduction and why it's essential for the survival and evolution of species.",
                narration: "Variation is nature's way of ensuring survival! While DNA copying is incredibly accurate, it's not perfect - and that's actually a good thing! Small changes called mutations occasionally occur during DNA replication. Most are neutral, some are harmful, but a few provide advantages. In sexual reproduction, you get a random mix of chromosomes from each parent - 23 from mom, 23 from dad. But which 23? There are over 8 million possible combinations from each parent! Add in crossing over, where chromosomes swap pieces during sex cell formation, and the possibilities become astronomical. This variation is crucial for evolution. When environments change, individuals with helpful variations survive better and pass on their genes. Over time, this natural selection shapes species. Without variation, all individuals would be identical clones, vulnerable to the same diseases and unable to adapt. Variation truly is the spice of life!"
            }
        };

        // Global Variables
        let currentStep = 'why_reproduce';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                // Prefer natural-sounding voices
                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['why_reproduce', 'dna_structure', 'dna_copying', 'chromosomes', 'nucleus', 'variation'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['why_reproduce', 'dna_structure', 'dna_copying', 'chromosomes', 'nucleus', 'variation'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                // Auto-advance if guided tour is active
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? 'üîä' : 'üîá';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['why_reproduce', 'dna_structure', 'dna_copying', 'chromosomes', 'chromosome_pair', 'nucleus', 'variation'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Congratulations! You've completed your journey through reproduction and DNA copying. You now understand the blueprint of life! Feel free to explore any section again or test your knowledge with our quiz!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "Why is reproduction important for species survival?",
                "What are the four bases in DNA and how do they pair?",
                "How does DNA copy itself during replication?",
                "What is the role of chromosomes in storing genetic information?",
                "How does variation arise during reproduction?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a question to test your knowledge: ${randomQ} Think about what you've learned in this journey!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to the fascinating world of reproduction and DNA copying! We'll explore why organisms reproduce and how DNA, the blueprint of life, copies itself with incredible precision. Let's begin our journey!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>