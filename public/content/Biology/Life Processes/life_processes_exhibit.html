<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Life Processes - Complete Journey</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.2" d="M0,96L48,112C96,128,192,160,288,186.7C384,213,480,235,576,213.3C672,192,768,128,864,128C960,128,1056,192,1152,197.3C1248,203,1344,149,1392,122.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: wave 10s linear infinite;
        }

        @keyframes wave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .life-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #27ae60;
            border-radius: 50%;
            animation: life-pulse 1.5s ease-in-out infinite;
        }

        @keyframes life-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 280px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #27ae60;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid rgba(46, 204, 113, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(46, 204, 113, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border-color: #e74c3c;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.5);
            animation: pulse 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(52, 152, 219, 0.3);
            border-color: #3498db;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 380px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #27ae60;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(39, 174, 96, 0.1));
            border: 1px solid rgba(46, 204, 113, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #27ae60;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #e74c3c;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(46, 204, 113, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-mini.active {
            color: #e74c3c;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #3498db;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #27ae60;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #27ae60;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(155, 89, 182, 0.1));
            border: 1px solid rgba(52, 152, 219, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "🌱";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #3498db;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(46, 204, 113, 0.4);
            border-color: #2ecc71;
            box-shadow: 0 0 20px rgba(46, 204, 113, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-life {
            font-size: 60px;
            animation: life-grow 2s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes life-grow {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(10deg); }
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(46, 204, 113, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #27ae60, #2ecc71);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(46, 204, 113, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #27ae60, #2ecc71);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-life">🌱</div>
            <div class="loading-text">Exploring the Wonder of Life...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Introduction to Life Processes</div>
        <div class="exhibit-subtitle">
            <span class="life-indicator"></span>
            What Makes Something Alive?
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>🌱</span>
            <span>Journey of Life</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('introduction')">
                <span>🌟</span> Introduction
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('living_vs_nonliving')">
                <span>⚙️</span> Living vs Non-living
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('molecular_movement')">
                <span>🔄</span> Molecular Movement
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('maintenance_functions')">
                <span>🛠️</span> Maintenance
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('energy_requirements')">
                <span>⚡</span> Energy
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('life_processes_overview')">
                <span>🔬</span> Life Processes
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="Life Processes Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/models/9b26db77378944319cac3e8f46a5a7e8/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">🌟</div>
            <div class="info-title">
                <h2 id="stepTitle">Welcome to Life Processes</h2>
                <div class="info-subtitle" id="stepSubtitle">Understanding what makes something alive</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Discovery Progress</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('introduction')">Intro</span>
                <span class="step-mini" onclick="loadJourneyStep('living_vs_nonliving')">Living</span>
                <span class="step-mini" onclick="loadJourneyStep('molecular_movement')">Movement</span>
                <span class="step-mini" onclick="loadJourneyStep('maintenance_functions')">Maintain</span>
                <span class="step-mini" onclick="loadJourneyStep('energy_requirements')">Energy</span>
                <span class="step-mini" onclick="loadJourneyStep('life_processes_overview')">Processes</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            Life is all around us, but what exactly makes something "alive"? This fundamental question has fascinated scientists for centuries. Living organisms share certain characteristics that distinguish them from non-living things, and understanding these differences helps us appreciate the remarkable complexity of life itself.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🔬</span> Key Concepts
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>Living things show molecular movement</li>
                    <li>Maintenance functions keep organisms alive</li>
                    <li>Energy is required for all life processes</li>
                    <li>Four major life processes sustain life</li>
                </ul>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Amazing Fact!</div>
            <div class="fun-fact-text" id="funFact">
                Even when you're completely still, trillions of molecules in your body are constantly moving, reacting, and working together to keep you alive!
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🎯</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                Understand the key characteristics that distinguish living from non-living things and discover how molecular processes sustain life.
            </div>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            🔊
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ▶️
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ℹ️
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>🚀</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>🎯</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Pedagogical Content
        const JOURNEY_DATA = {
            introduction: {
                title: "Welcome to Life Processes",
                subtitle: "Understanding what makes something alive",
                icon: "🌟",
                modelUrl: "https://sketchfab.com/models/9b26db77378944319cac3e8f46a5a7e8/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Life is all around us, but what exactly makes something 'alive'? This fundamental question has fascinated scientists for centuries. Living organisms share certain characteristics that distinguish them from non-living things, and understanding these differences helps us appreciate the remarkable complexity of life itself.",
                concepts: [
                    "Living things show molecular movement",
                    "Maintenance functions keep organisms alive",
                    "Energy is required for all life processes",
                    "Four major life processes sustain life"
                ],
                funFact: "Even when you're completely still, trillions of molecules in your body are constantly moving, reacting, and working together to keep you alive!",
                objectives: "Understand the key characteristics that distinguish living from non-living things and discover how molecular processes sustain life.",
                narration: "Welcome to the fascinating world of life processes! You're looking at beautiful potted lilies - perfect examples of living organisms. But what makes these flowers 'alive' while the pot they're sitting in is not? This question might seem simple, but it opens up one of biology's most fundamental concepts. Living things share remarkable characteristics that set them apart from the non-living world. They grow, respond to their environment, reproduce, and most importantly - they're constantly carrying out invisible molecular processes that sustain their existence. Throughout this journey, we'll explore what it truly means to be alive and discover the amazing processes that occur inside every living cell, from the tiniest bacteria to the largest trees!"
            },
            living_vs_nonliving: {
                title: "Living vs Non-Living Things",
                subtitle: "The fundamental distinction",
                icon: "⚙️",
                modelUrl: "https://sketchfab.com/models/b11cac7f0d66427dae2ee778666d9799/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "The distinction between living and non-living things isn't always obvious. While a wind-up toy can move and a computer can respond to inputs, they lack the fundamental characteristic of life: self-directed molecular movement and maintenance.",
                concepts: [
                    "Living things exhibit self-directed movement",
                    "Non-living things may move but lack internal control",
                    "Living organisms can grow and reproduce",
                    "Non-living things cannot repair themselves"
                ],
                funFact: "Some things seem alive but aren't - like viruses, which can only reproduce inside living cells, leading scientists to debate whether they're truly 'alive'!",
                objectives: "Learn to distinguish between living and non-living things based on fundamental biological characteristics.",
                narration: "Here we see a vintage wind-up toy - a perfect example to help us understand what separates living from non-living things! This toy can move, just like a living animal, but there's a crucial difference. The toy's movement comes from an external source - someone wound it up. Once the spring unwinds, it stops forever unless someone winds it again. Living things, however, have internal mechanisms that drive their movement and activities. A bird doesn't need to be 'wound up' - it generates its own energy, controls its own movements, and can repair itself when damaged. Living organisms also grow, reproduce, and respond to their environment in ways that non-living things simply cannot. The toy follows predictable mechanical laws, but living things exhibit the amazing property of being able to organize and maintain themselves!"
            },
            molecular_movement: {
                title: "Molecular Movement - The Heart of Life",
                subtitle: "Invisible activity that defines life",
                icon: "🔄",
                modelUrl: "https://sketchfab.com/models/e71bfcf145c742cdbbde168d0f9736b8/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "At the molecular level, life is characterized by constant, organized movement. Molecules are continuously being built, broken down, transported, and transformed in highly coordinated ways that maintain the living state.",
                concepts: [
                    "Molecules constantly move within living cells",
                    "Chemical reactions occur continuously",
                    "Transport systems move materials around",
                    "Molecular machinery repairs and builds structures"
                ],
                funFact: "In just one second, a single cell performs millions of chemical reactions, with molecules moving at speeds of up to 1000 times per second!",
                objectives: "Understand how molecular movement distinguishes living things and drives all biological processes.",
                narration: "This cross-section of a leaf reveals the incredible molecular activity happening inside every living thing! Look at the organized structure - those are cells, and within each cell, an invisible molecular dance is constantly taking place. Molecules are being transported through tiny channels, chemical reactions are converting sunlight into sugar, and cellular machinery is building and repairing structures. This molecular movement isn't random - it's highly organized and purposeful. Water molecules travel through specialized pathways, gases move in and out through tiny pores, and energy-carrying molecules flow like rivers throughout the plant. Even when the leaf appears perfectly still, there are billions of molecular interactions happening every second. This constant, controlled molecular activity is what truly defines life - it's the invisible engine that powers growth, repair, and all the amazing things living organisms can do!"
            },
            maintenance_functions: {
                title: "Maintenance Functions",
                subtitle: "Keeping the machinery of life running",
                icon: "🛠️",
                modelUrl: "https://sketchfab.com/models/9b26db77378944319cac3e8f46a5a7e8/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Living organisms must constantly maintain themselves to survive. This involves repairing damage, replacing worn-out parts, regulating internal conditions, and defending against threats - all while continuing normal functions.",
                concepts: [
                    "Repair mechanisms fix cellular damage",
                    "Homeostasis maintains stable conditions",
                    "Waste removal prevents toxic buildup",
                    "Defense systems protect against threats"
                ],
                funFact: "Your body replaces most of its cells every 7-10 years, meaning you're literally not the same person you were a decade ago at the cellular level!",
                objectives: "Learn about the essential maintenance processes that keep living organisms functioning and healthy.",
                narration: "These beautiful lilies demonstrate the incredible maintenance functions that all living things must perform! Just like a complex machine needs regular maintenance, living organisms must constantly work to keep themselves running smoothly. The plant is simultaneously doing dozens of maintenance tasks - repairing damaged cells from UV radiation, replacing old cellular components, maintaining the right water balance, and defending against harmful microorganisms. When you see a flower looking fresh and healthy, you're witnessing the result of countless maintenance processes working perfectly together. The plant produces antioxidants to prevent damage, pumps nutrients to where they're needed, and even has backup systems in case something goes wrong. Unlike a machine that eventually wears out, living things can potentially maintain themselves indefinitely by constantly repairing and replacing their parts!"
            },
            energy_requirements: {
                title: "Energy Requirements for Life",
                subtitle: "The fuel that powers biological processes",
                icon: "⚡",
                modelUrl: "https://sketchfab.com/models/e71bfcf145c742cdbbde168d0f9736b8/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "All life processes require energy. Living organisms must capture, convert, store, and use energy efficiently to power growth, movement, reproduction, and maintenance functions. Without a constant energy supply, life cannot exist.",
                concepts: [
                    "Energy powers all cellular processes",
                    "Plants capture energy from sunlight",
                    "Animals get energy from food",
                    "Energy is stored and released as needed"
                ],
                funFact: "A single leaf can capture enough solar energy in one day to power a small LED light for several hours - nature's own solar panel!",
                objectives: "Understand how living organisms obtain, convert, and use energy to power their life processes.",
                narration: "This leaf is nature's incredible energy-capturing machine! Every living thing needs energy to power its life processes, and this leaf shows us one of the most amazing energy conversion systems on Earth. Using the green chlorophyll you can see throughout its structure, this leaf captures light energy from the sun and converts it into chemical energy through photosynthesis. The intricate network of veins you see transports this energy-rich sugar to every part of the plant. But energy isn't just captured and stored - it's constantly being used! Right now, this leaf is using energy to pump water, build new molecules, repair cellular damage, and respond to its environment. Animals, including humans, get their energy by eating plants or other animals, but the energy always traces back to the sun. Every movement you make, every thought you think, and every heartbeat is powered by energy that originated in a leaf just like this one!"
            },
            life_processes_overview: {
                title: "The Four Major Life Processes",
                subtitle: "Nutrition, respiration, transportation, and excretion",
                icon: "🔬",
                modelUrl: "https://sketchfab.com/models/9b26db77378944319cac3e8f46a5a7e8/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "All living organisms carry out four essential life processes: nutrition (obtaining nutrients), respiration (releasing energy), transportation (moving materials), and excretion (removing waste). These processes work together to maintain life.",
                concepts: [
                    "Nutrition: obtaining and processing nutrients",
                    "Respiration: releasing energy from nutrients",
                    "Transportation: moving materials within organisms",
                    "Excretion: removing harmful waste products"
                ],
                funFact: "These four life processes happen in every living thing, from tiny bacteria to giant blue whales - proving that all life shares the same fundamental needs!",
                objectives: "Identify and understand the four major life processes that all living organisms must carry out to survive.",
                narration: "Looking at these lilies, we can observe all four major life processes happening simultaneously! First, nutrition - the plant absorbs water and minerals from the soil through its roots, and captures carbon dioxide from the air. The leaves use sunlight to convert these raw materials into glucose, the plant's food. Second, respiration - even though plants make their own food, they still need to break it down to release energy for cellular activities. You can't see it, but the plant is 'breathing' at the cellular level, using oxygen to release energy from glucose. Third, transportation - notice those veins in the leaves? They're part of an amazing transport system that moves water, nutrients, and energy throughout the entire plant. Finally, excretion - the plant produces oxygen as a waste product during photosynthesis, which it releases into the air. These four processes - nutrition, respiration, transportation, and excretion - work together seamlessly in every living thing, from the smallest bacteria to the largest trees!"
            }
        };

        // Global Variables
        let currentStep = 'introduction';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                // Prefer natural-sounding voices
                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['introduction', 'living_vs_nonliving', 'molecular_movement', 'maintenance_functions', 'energy_requirements', 'life_processes_overview'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['introduction', 'living_vs_nonliving', 'molecular_movement', 'maintenance_functions', 'energy_requirements', 'life_processes_overview'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                // Auto-advance if guided tour is active
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? '🔊' : '🔇';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['introduction', 'living_vs_nonliving', 'molecular_movement', 'maintenance_functions', 'energy_requirements', 'life_processes_overview'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Congratulations! You've completed your journey through the introduction to life processes. You now understand what distinguishes living from non-living things and how molecular processes sustain life. Feel free to explore any section again or test your knowledge!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "What is the key difference between living and non-living things?",
                "Why do all living things need energy?",
                "What are the four major life processes?",
                "How do plants obtain their energy?",
                "What role does molecular movement play in life?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a biology question to test your knowledge: ${randomQ} Think about what you've learned about life processes!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to your journey through life processes! We'll explore what makes something truly alive, starting with the fundamental characteristics that distinguish living from non-living things. Let's begin this amazing adventure!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>