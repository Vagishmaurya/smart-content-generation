<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamete Formation & Chromosome Behavior - The Cellular Basis of Inheritance</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #16a085 0%, #e74c3c 50%, #3498db 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.3" d="M0,160L48,176C96,192,192,224,288,240C384,256,480,256,576,245.3C672,235,768,213,864,202.7C960,192,1056,192,1152,197.3C1248,203,1344,213,1392,218.7L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: gameteWave 20s linear infinite;
        }

        @keyframes gameteWave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #16a085, #e74c3c, #3498db);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .gamete-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: linear-gradient(45deg, #16a085, #e74c3c);
            border-radius: 50%;
            animation: gametePulse 2s ease-in-out infinite;
        }

        @keyframes gametePulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 400px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #16a085;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(22, 160, 133, 0.2);
            border: 1px solid rgba(22, 160, 133, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(22, 160, 133, 0.3);
            border-color: #16a085;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(22, 160, 133, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border-color: #e74c3c;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.5);
            animation: pulse 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #16a085 0%, #e74c3c 50%, #3498db 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 480px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #e74c3c;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(22, 160, 133, 0.1), rgba(231, 76, 60, 0.1));
            border: 1px solid rgba(22, 160, 133, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #16a085;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #e74c3c;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #16a085, #e74c3c, #3498db);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 8px;
            color: rgba(255, 255, 255, 0.6);
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 16%;
        }

        .step-mini.active {
            color: #e74c3c;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #2ecc71;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #16a085;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #e74c3c;
        }

        /* Chromosome Number Display */
        .chromosome-display {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(52, 152, 219, 0.1));
            border: 1px solid rgba(231, 76, 60, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
        }

        .chromosome-title {
            color: #e74c3c;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            text-align: center;
        }

        .chromosome-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 8px;
        }

        .chromosome-step {
            background: rgba(22, 160, 133, 0.3);
            border: 1px solid rgba(22, 160, 133, 0.5);
            padding: 12px 16px;
            border-radius: 8px;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            min-width: 80px;
            flex: 1;
        }

        .chromosome-arrow {
            color: #e74c3c;
            font-size: 18px;
            font-weight: bold;
        }

        /* Cell Division Comparison */
        .division-comparison {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 16px;
            margin: 16px 0;
        }

        .comparison-title {
            color: #16a085;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 12px;
            text-align: center;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .comparison-cell {
            background: rgba(22, 160, 133, 0.2);
            border: 1px solid rgba(22, 160, 133, 0.4);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }

        .comparison-header {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 6px;
            font-size: 11px;
        }

        .comparison-content {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Gamete Process Display */
        .gamete-process {
            background: linear-gradient(135deg, rgba(22, 160, 133, 0.1), rgba(142, 68, 173, 0.1));
            border: 1px solid rgba(22, 160, 133, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
        }

        .process-title {
            color: #16a085;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 12px;
            text-align: center;
        }

        .process-steps {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .process-step {
            background: rgba(52, 152, 219, 0.3);
            border: 1px solid rgba(52, 152, 219, 0.5);
            padding: 8px;
            border-radius: 6px;
            text-align: center;
            font-size: 10px;
        }

        .process-step-title {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 4px;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(52, 152, 219, 0.1));
            border: 1px solid rgba(46, 204, 113, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "🔬";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #2ecc71;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(231, 76, 60, 0.3);
            border-color: #e74c3c;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(231, 76, 60, 0.4);
            border-color: #e74c3c;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #16a085 0%, #e74c3c 50%, #3498db 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-gamete {
            font-size: 60px;
            animation: gametePulse 1.5s ease-in-out infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #16a085, #e74c3c, #3498db);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(231, 76, 60, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #e74c3c, #16a085);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(22, 160, 133, 0.3);
            border-color: #16a085;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(22, 160, 133, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #e74c3c, #16a085);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-gamete">🔬</div>
            <div class="loading-text">Exploring Gamete Formation...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Gamete Formation & Chromosome Behavior</div>
        <div class="exhibit-subtitle">
            <span class="gamete-indicator"></span>
            The Cellular Basis of Inheritance
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>🔬</span>
            <span>Your Cellular Journey</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('chromosome_organization')">
                <span>📊</span> Chromosomes
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('sperm_formation')">
                <span>🏊</span> Sperm
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('egg_formation')">
                <span>🥚</span> Egg
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('mitosis_comparison')">
                <span>⚡</span> Mitosis
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('meiosis_process')">
                <span>🔄</span> Meiosis
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('cell_organization')">
                <span>🔬</span> Cell Types
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="Chromosome Structure Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/models/cc33bb1ebe6141b08d0d06f1bbebc2b7/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">📊</div>
            <div class="info-title">
                <h2 id="stepTitle">Chromosome Organization in Germ Cells</h2>
                <div class="info-subtitle" id="stepSubtitle">How chromosome pairs prepare for gamete formation</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Journey Progress</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('chromosome_organization')">Chromosome</span>
                <span class="step-mini" onclick="loadJourneyStep('sperm_formation')">Sperm</span>
                <span class="step-mini" onclick="loadJourneyStep('egg_formation')">Egg</span>
                <span class="step-mini" onclick="loadJourneyStep('mitosis_comparison')">Mitosis</span>
                <span class="step-mini" onclick="loadJourneyStep('meiosis_process')">Meiosis</span>
                <span class="step-mini" onclick="loadJourneyStep('cell_organization')">Cell</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            Chromosome organization in germ cells sets the stage for gamete formation. Homologous chromosome pairs must separate during meiosis so that each gamete receives exactly one chromosome from each pair, reducing the chromosome number by half and enabling the restoration of the diploid number in offspring.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🔬</span> Key Concepts
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>Germ cells start with diploid chromosome number (46)</li>
                    <li>Homologous pairs must separate during meiosis</li>
                    <li>Each gamete gets single set of chromosomes (23)</li>
                    <li>Fertilization restores diploid number in offspring</li>
                </ul>
            </div>
        </div>

        <div class="chromosome-display" id="chromosomeDisplay">
            <div class="chromosome-title">Chromosome Number Changes</div>
            <div class="chromosome-flow">
                <div class="chromosome-step">Diploid 2n (46)</div>
                <div class="chromosome-arrow">→</div>
                <div class="chromosome-step">Meiosis</div>
                <div class="chromosome-arrow">→</div>
                <div class="chromosome-step">Haploid n (23)</div>
            </div>
        </div>

        <div class="division-comparison" id="divisionComparison">
            <div class="comparison-title">Mitosis vs Meiosis Comparison</div>
            <div class="comparison-grid">
                <div class="comparison-cell">
                    <div class="comparison-header">Mitosis</div>
                    <div class="comparison-content">Same chromosome number<br>Growth & repair</div>
                </div>
                <div class="comparison-cell">
                    <div class="comparison-header">Meiosis</div>
                    <div class="comparison-content">Half chromosome number<br>Gamete formation</div>
                </div>
            </div>
        </div>

        <div class="gamete-process" id="gameteProcess">
            <div class="process-title">Gamete Formation Process</div>
            <div class="process-steps">
                <div class="process-step">
                    <div class="process-step-title">Start</div>
                    <div>Diploid germ cell</div>
                </div>
                <div class="process-step">
                    <div class="process-step-title">Meiosis</div>
                    <div>Chromosome separation</div>
                </div>
                <div class="process-step">
                    <div class="process-step-title">Result</div>
                    <div>Haploid gametes</div>
                </div>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Cellular Marvel!</div>
            <div class="fun-fact-text" id="funFact">
                During meiosis, each chromosome must find and pair with its homologous partner among 46 chromosomes - it's like finding your exact match in a crowd of nearly identical twins!
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>🎯</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                Understand how chromosome separation during meiosis reduces chromosome number by half, enabling gametes to carry single gene sets that restore the diploid number when fertilization occurs.
            </div>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            🔊
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ▶️
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ℹ️
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>🚀</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>🎯</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Pedagogical Content
        const JOURNEY_DATA = {
            chromosome_organization: {
                title: "Chromosome Organization in Germ Cells",
                subtitle: "How chromosome pairs prepare for gamete formation",
                icon: "📊",
                modelUrl: "https://sketchfab.com/models/cc33bb1ebe6141b08d0d06f1bbebc2b7/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Chromosome organization in germ cells sets the stage for gamete formation. Homologous chromosome pairs must separate during meiosis so that each gamete receives exactly one chromosome from each pair, reducing the chromosome number by half and enabling the restoration of the diploid number in offspring.",
                concepts: [
                    "Germ cells start with diploid chromosome number (46)",
                    "Homologous pairs must separate during meiosis",
                    "Each gamete gets single set of chromosomes (23)",
                    "Fertilization restores diploid number in offspring"
                ],
                funFact: "During meiosis, each chromosome must find and pair with its homologous partner among 46 chromosomes - it's like finding your exact match in a crowd of nearly identical twins!",
                objectives: "Understand how chromosome separation during meiosis reduces chromosome number by half, enabling gametes to carry single gene sets that restore the diploid number when fertilization occurs.",
                narration: "Welcome to the world of chromosome organization during gamete formation! You're looking at the fundamental unit of inheritance - chromosomes - as they exist in germ cells before meiosis begins. In humans, every germ cell starts with 46 chromosomes arranged in 23 homologous pairs. Each pair contains one chromosome from your mother and one from your father, carrying the same genes but potentially different versions called alleles. The key to understanding inheritance lies in what happens next: these paired chromosomes must separate during meiosis so that each gamete receives exactly one chromosome from each pair. This reduction from diploid (2n = 46) to haploid (n = 23) is absolutely critical for sexual reproduction. When sperm and egg unite during fertilization, they each contribute their 23 chromosomes, restoring the diploid number of 46 in the offspring. This elegant system ensures that children receive exactly half their chromosomes from each parent, maintaining the species' chromosome number across generations while creating genetic diversity through the random combination of maternal and paternal chromosomes."
            },
            sperm_formation: {
                title: "Sperm Formation - Male Gamete Development",
                subtitle: "How male germ cells become specialized gametes",
                icon: "🏊",
                modelUrl: "https://sketchfab.com/models/267dc672834749b5b332d23ee013a00a/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Sperm formation involves meiosis to reduce chromosome number and specialized development to create mobile gametes. Each sperm cell carries exactly 23 chromosomes - one from each homologous pair - ensuring that fertilization will restore the diploid chromosome number in offspring.",
                concepts: [
                    "Male germ cells undergo meiosis in testes",
                    "Four functional sperm produced per meiosis",
                    "Each sperm carries 23 chromosomes (haploid)",
                    "Specialized structure enables motility"
                ],
                funFact: "Each human male produces about 1,500 sperm cells every second, with each one carrying a unique combination of chromosomes due to independent assortment during meiosis!",
                objectives: "Learn how male meiosis produces functional sperm with reduced chromosome number and understand how chromosome behavior during sperm formation enables genetic inheritance.",
                narration: "Witness the remarkable transformation of male germ cells into specialized sperm! This streamlined cell represents the end result of a complex process called spermatogenesis, where diploid germ cells undergo meiosis to produce haploid gametes. The sperm's structure is perfectly designed for its mission: the head contains the nucleus with exactly 23 chromosomes - one from each homologous pair that existed in the original germ cell. The acrosome cap contains enzymes to penetrate the egg, while the flagellum provides motility for the journey to fertilization. What's remarkable about sperm formation is the precision of chromosome distribution. During meiosis, homologous chromosomes must separate perfectly so each sperm receives exactly one chromosome from each pair. Independent assortment means that whether a sperm gets the maternal or paternal chromosome from each pair is random, creating millions of possible chromosome combinations. This genetic shuffling, combined with crossing over between homologous chromosomes, ensures that every sperm is genetically unique. When this sperm fertilizes an egg, it will contribute its 23 chromosomes to restore the diploid number, with roughly half the offspring's genetic material coming from the father's side of the family."
            },
            egg_formation: {
                title: "Egg Formation - Female Gamete Development",
                subtitle: "How female germ cells develop into eggs",
                icon: "🥚",
                modelUrl: "https://sketchfab.com/models/21c19e1b34dd4e4d9cfefa5c8163e8c6/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Egg formation through meiosis produces large, nutrient-rich gametes with 23 chromosomes. The process differs from sperm formation in timing and outcome, but the fundamental goal is the same: reducing chromosome number by half while maintaining genetic diversity through independent assortment.",
                concepts: [
                    "Female germ cells begin meiosis before birth",
                    "One functional egg produced per meiosis",
                    "Each egg carries 23 chromosomes (haploid)",
                    "Large size provides nutrients for development"
                ],
                funFact: "Female meiosis can take decades to complete! Eggs arrested in meiosis I can wait 10-50 years before completing division during ovulation.",
                objectives: "Understand how female meiosis produces eggs with reduced chromosome number and compare the different strategies of male and female gamete formation.",
                narration: "Explore the incredible egg cell - the largest cell in the human body and a marvel of biological engineering! This massive cell, about 10,000 times larger than a sperm, represents the culmination of a unique form of meiosis that begins before a female is even born. Like sperm formation, egg development involves reducing the chromosome number from 46 to 23, but the process and timing are dramatically different. Female germ cells begin meiosis during fetal development but then arrest in prophase I, sometimes for decades! Each month during a woman's reproductive years, one egg completes meiosis I, producing one large egg and a small polar body that degenerates. The egg's enormous size isn't just for show - it's packed with nutrients, organelles, and proteins needed to support early embryonic development. The 23 chromosomes in this egg's nucleus carry the maternal genetic contribution, representing one chromosome from each homologous pair through the same independent assortment process that occurs in sperm formation. When fertilization occurs, this egg will contribute its 23 chromosomes to unite with the 23 from sperm, restoring the diploid number and beginning a new generation with a unique combination of genetic material from both parents."
            },
            mitosis_comparison: {
                title: "Mitosis - Maintaining Chromosome Number",
                subtitle: "Cell division for growth and repair",
                icon: "⚡",
                modelUrl: "https://sketchfab.com/models/df93411c475c4e4eb450f71437b5ad0d/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Mitosis maintains the diploid chromosome number in somatic cells, contrasting with meiosis which reduces chromosome number in gametes. Understanding mitosis helps clarify why meiosis is essential for sexual reproduction and chromosome number restoration.",
                concepts: [
                    "Mitosis produces identical diploid cells",
                    "Chromosome number remains constant (46)",
                    "Used for growth, repair, and reproduction in asexual organisms",
                    "Sister chromatids separate, not homologous pairs"
                ],
                funFact: "Your body performs about 25 million mitotic divisions every second to replace worn-out cells, each maintaining the exact same 46 chromosomes!",
                objectives: "Compare mitosis and meiosis to understand why chromosome reduction is necessary for sexual reproduction and how different cell division processes serve different biological functions.",
                narration: "Observe mitosis - the cellular process that maintains genetic consistency throughout your body! This animation shows how somatic cells divide to produce two genetically identical daughter cells, each with the same 46 chromosomes as the parent cell. Unlike meiosis, mitosis doesn't reduce chromosome number - it preserves it precisely. During mitosis, sister chromatids (identical copies of each chromosome) separate and move to opposite poles of the dividing cell, ensuring each daughter cell receives exactly the same genetic material. This process is essential for growth, healing, and replacing worn-out cells throughout your lifetime. Every cell in your body except gametes uses mitosis for division, which is why your skin cells, muscle cells, and brain cells all contain the same 46 chromosomes. Mitosis highlights why meiosis is so special and necessary for sexual reproduction. If gametes were produced by mitosis, they would contain 46 chromosomes each, and fertilization would result in offspring with 92 chromosomes! Instead, meiosis ensures gametes have only 23 chromosomes, so fertilization restores the normal diploid number. This comparison shows how different cell division processes serve different purposes - mitosis for maintaining existing organisms, meiosis for creating the next generation with proper chromosome numbers."
            },
            meiosis_process: {
                title: "Meiosis - Reducing Chromosome Number",
                subtitle: "The specialized division for gamete formation",
                icon: "🔄",
                modelUrl: "https://sketchfab.com/models/1772cb63102b4f1c9ff5e607643cde83/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Meiosis is the specialized cell division that reduces chromosome number by half and enables independent assortment. This process ensures gametes receive single gene sets while creating genetic diversity through chromosome recombination and random distribution.",
                concepts: [
                    "Two-stage division reduces chromosome number by half",
                    "Homologous chromosomes separate in meiosis I",
                    "Sister chromatids separate in meiosis II",
                    "Independent assortment creates genetic diversity"
                ],
                funFact: "Independent assortment during meiosis can create over 8 million different chromosome combinations in human gametes, even before considering crossing over!",
                objectives: "Master the meiotic process and understand how chromosome behavior during meiosis enables both chromosome reduction and the independent assortment observed in Mendel's experiments.",
                narration: "Welcome to meiosis - the cellular choreography that makes sexual reproduction possible! This complex two-stage process is fundamentally different from mitosis because it reduces chromosome number by half while creating genetic diversity. Meiosis begins with a diploid germ cell containing 23 pairs of homologous chromosomes. During meiosis I, these homologous pairs line up at the cell's center and then separate - this is the reduction division that cuts chromosome number in half. But here's where it gets exciting: the orientation of each pair is random, creating independent assortment! Whether the maternal or paternal chromosome from each pair goes to a particular gamete is entirely by chance. This process alone can create over 8 million different combinations of chromosomes in human gametes. Meiosis II resembles mitosis, separating sister chromatids, but now there are only 23 chromosomes instead of 46. The end result is four haploid gametes, each with a unique combination of chromosomes. This elegant process explains Mendel's observations about independent assortment - genes on different chromosomes are inherited independently because the chromosomes themselves assort independently during meiosis. Meiosis is thus the cellular mechanism underlying the mathematical patterns Mendel discovered in his pea plants!"
            },
            cell_organization: {
                title: "Cell Organization - Somatic vs Germ Cells",
                subtitle: "Different cell types, different chromosome destinies",
                icon: "🔬",
                modelUrl: "https://sketchfab.com/models/fff76f2ecadf4fe18eb40290938a5404/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_watermark=0",
                description: "Understanding the difference between somatic cells and germ cells reveals why only certain cells undergo meiosis. Somatic cells maintain the diploid chromosome number through mitosis, while germ cells undergo meiosis to produce haploid gametes for reproduction.",
                concepts: [
                    "Somatic cells use mitosis, maintain 46 chromosomes",
                    "Germ cells undergo meiosis, produce 23-chromosome gametes",
                    "Cell fate determines division type",
                    "Both cell types start with same genetic material"
                ],
                funFact: "Out of the trillions of cells in your body, only a tiny fraction are germ cells capable of producing gametes - yet these few cells carry the genetic future of the species!",
                objectives: "Understand how cell specialization determines whether cells maintain chromosome number through mitosis or reduce it through meiosis, and appreciate the organization that enables complex multicellular reproduction.",
                narration: "Explore the fundamental organization of cells in multicellular organisms! You're looking at the basic cellular unit that could become either a somatic cell or a germ cell, with profoundly different destinies. Most cells in your body are somatic cells - they make up your tissues and organs, divide by mitosis, and always maintain the full complement of 46 chromosomes. These cells are the body's workforce, responsible for all the functions that keep you alive, but they don't contribute directly to reproduction. Germ cells, however, have a special fate. Located in the reproductive organs, these cells are destined to undergo meiosis and become gametes. While they start with the same 46 chromosomes as somatic cells, their mission is to reduce this number by half and create the genetic bridge to the next generation. This cellular organization is crucial for complex life - it allows organisms to maintain their complex body structures through mitotic division while still participating in sexual reproduction through meiotic gamete formation. The separation of soma and germ line ensures that genetic information flows predictably from parents to offspring while the body's cells can specialize for their particular functions without affecting inheritance. This elegant system enables both individual complexity and species continuity across generations."
            }
        };

        // Global Variables
        let currentStep = 'chromosome_organization';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Update displays based on step
            updateDisplays(stepId);
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Displays based on current step
        function updateDisplays(stepId) {
            const chromosomeDisplay = document.getElementById('chromosomeDisplay');
            const divisionComparison = document.getElementById('divisionComparison');
            const gameteProcess = document.getElementById('gameteProcess');
            
            // Show/hide relevant sections and update content
            switch(stepId) {
                case 'chromosome_organization':
                    chromosomeDisplay.style.display = 'block';
                    divisionComparison.style.display = 'none';
                    gameteProcess.style.display = 'block';
                    updateChromosomeFlow(['Diploid 2n (46)', '→', 'Meiosis', '→', 'Haploid n (23)']);
                    break;
                case 'sperm_formation':
                    chromosomeDisplay.style.display = 'block';
                    divisionComparison.style.display = 'none';
                    gameteProcess.style.display = 'block';
                    updateChromosomeFlow(['Diploid Germ Cell', '→', 'Spermatogenesis', '→', 'Sperm (n=23)']);
                    break;
                case 'egg_formation':
                    chromosomeDisplay.style.display = 'block';
                    divisionComparison.style.display = 'none';
                    gameteProcess.style.display = 'block';
                    updateChromosomeFlow(['Diploid Germ Cell', '→', 'Oogenesis', '→', 'Egg (n=23)']);
                    break;
                case 'mitosis_comparison':
                    chromosomeDisplay.style.display = 'none';
                    divisionComparison.style.display = 'block';
                    gameteProcess.style.display = 'none';
                    break;
                case 'meiosis_process':
                    chromosomeDisplay.style.display = 'block';
                    divisionComparison.style.display = 'block';
                    gameteProcess.style.display = 'block';
                    updateChromosomeFlow(['Meiosis I', '→', 'Reduction', '→', 'Meiosis II']);
                    break;
                case 'cell_organization':
                    chromosomeDisplay.style.display = 'none';
                    divisionComparison.style.display = 'block';
                    gameteProcess.style.display = 'none';
                    break;
            }
        }

        // Update Chromosome Flow
        function updateChromosomeFlow(steps) {
            const chromosomeFlow = document.getElementById('chromosomeDisplay').querySelector('.chromosome-flow');
            chromosomeFlow.innerHTML = '';
            
            steps.forEach(item => {
                if (item === '→') {
                    const arrow = document.createElement('div');
                    arrow.className = 'chromosome-arrow';
                    arrow.textContent = '→';
                    chromosomeFlow.appendChild(arrow);
                } else {
                    const step = document.createElement('div');
                    step.className = 'chromosome-step';
                    step.textContent = item;
                    chromosomeFlow.appendChild(step);
                }
            });
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['chromosome_organization', 'sperm_formation', 'egg_formation', 'mitosis_comparison', 'meiosis_process', 'cell_organization'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['chromosome_organization', 'sperm_formation', 'egg_formation', 'mitosis_comparison', 'meiosis_process', 'cell_organization'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? '🔊' : '🔇';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['chromosome_organization', 'sperm_formation', 'egg_formation', 'mitosis_comparison', 'meiosis_process', 'cell_organization'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Congratulations! You've completed your journey through gamete formation and chromosome behavior. You now understand how meiosis reduces chromosome number by half, how independent assortment creates genetic diversity, and why this cellular process is essential for sexual reproduction and inheritance!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "Why must chromosome number be reduced during gamete formation?",
                "How does meiosis create genetic diversity through independent assortment?",
                "What's the difference between mitosis and meiosis in terms of chromosome number?",
                "How do germ cells differ from somatic cells in their division patterns?",
                "What happens to chromosome number when gametes fuse during fertilization?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a question to test your knowledge: ${randomQ} Think about what you've learned about gamete formation and chromosome behavior!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to the cellular world of gamete formation! We'll explore how germ cells reduce their chromosome number by half during meiosis, creating the gametes that make sexual reproduction possible. You'll discover how chromosome behavior during this process enables independent assortment and ensures proper chromosome number restoration in offspring!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>