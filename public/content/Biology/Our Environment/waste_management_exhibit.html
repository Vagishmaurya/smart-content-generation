<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waste Management and Sustainability - Complete Environmental Journey</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #2d5016 0%, #3e7b27 50%, #6b8e23 100%);
            color: white;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.2" d="M0,96L48,112C96,128,192,160,288,186.7C384,213,480,235,576,213.3C672,192,768,128,864,128C960,128,1056,192,1152,197.3C1248,203,1344,149,1392,122.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') repeat-x;
            animation: sustainabilityWave 18s linear infinite;
        }

        @keyframes sustainabilityWave {
            0% { background-position-x: 0; }
            100% { background-position-x: 1440px; }
        }

        /* Museum Interface - Compact Header */
        .museum-header {
            position: absolute;
            top: 10px;
            left: 20px;
            text-align: left;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 10px 18px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .museum-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #8fbc8f, #9acd32, #32cd32);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: sustainabilityGlow 3s ease-in-out infinite;
        }

        @keyframes sustainabilityGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        .exhibit-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .recycle-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #32cd32;
            border-radius: 50%;
            animation: recycleRotate 3s linear infinite;
        }

        @keyframes recycleRotate {
            0% { transform: rotate(0deg) scale(1); opacity: 1; }
            50% { transform: rotate(180deg) scale(1.2); opacity: 0.8; }
            100% { transform: rotate(360deg) scale(1); opacity: 1; }
        }

        /* Journey Navigation - Enhanced */
        .journey-navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 320px;
        }

        .journey-title {
            font-size: 14px;
            font-weight: 600;
            color: #32cd32;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .journey-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .journey-btn {
            background: rgba(50, 205, 50, 0.2);
            border: 1px solid rgba(50, 205, 50, 0.4);
            color: white;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .journey-btn:hover {
            background: rgba(50, 205, 50, 0.3);
            border-color: #32cd32;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(50, 205, 50, 0.3);
        }

        .journey-btn.active {
            background: linear-gradient(135deg, #8fbc8f, #32cd32);
            border-color: #32cd32;
            box-shadow: 0 0 20px rgba(50, 205, 50, 0.5);
            animation: sustainabilityActive 2s infinite;
        }

        .journey-btn.completed {
            background: rgba(154, 205, 50, 0.3);
            border-color: #9acd32;
        }

        @keyframes sustainabilityActive {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* 3D Model Container */
        .model-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
            overflow: hidden;
            border: none;
            z-index: 100;
        }

        .sketchfab-embed-wrapper {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2d5016 0%, #3e7b27 50%, #6b8e23 100%);
        }

        .sketchfab-embed-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0;
        }

        /* Information Panel - Enhanced */
        .info-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            width: 380px;
            max-height: calc(100vh - 140px);
            z-index: 800;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .info-icon {
            font-size: 28px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .info-title {
            flex: 1;
        }

        .info-title h2 {
            font-size: 18px;
            color: #32cd32;
            margin-bottom: 4px;
        }

        .info-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: linear-gradient(135deg, rgba(50, 205, 50, 0.1), rgba(154, 205, 50, 0.1));
            border: 1px solid rgba(50, 205, 50, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .progress-header {
            font-size: 13px;
            font-weight: 600;
            color: #32cd32;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 18px;
            color: #9acd32;
            font-weight: 700;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8fbc8f, #32cd32);
            border-radius: 4px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(50, 205, 50, 0.5);
        }

        .progress-steps-mini {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
        }

        .step-mini {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-mini.active {
            color: #32cd32;
            font-weight: 600;
        }

        .step-mini.completed {
            color: #9acd32;
        }

        /* Information Cards */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
        }

        .info-card-title {
            color: #32cd32;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-card-content {
            color: rgba(255, 255, 255, 0.85);
            font-size: 12px;
            line-height: 1.5;
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .info-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #32cd32;
        }

        /* Fun Fact Box */
        .fun-fact {
            background: linear-gradient(135deg, rgba(255, 140, 0, 0.1), rgba(50, 205, 50, 0.1));
            border: 1px solid rgba(255, 140, 0, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }

        .fun-fact:before {
            content: "‚ôªÔ∏è";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 60px;
            opacity: 0.1;
        }

        .fun-fact-title {
            color: #ff8c00;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .fun-fact-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        /* Voice Controls */
        .voice-controls {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
        }

        .control-btn:hover {
            background: rgba(50, 205, 50, 0.3);
            border-color: #32cd32;
            transform: scale(1.1);
        }

        .control-btn.active {
            background: rgba(50, 205, 50, 0.4);
            border-color: #32cd32;
            box-shadow: 0 0 20px rgba(50, 205, 50, 0.5);
        }

        .control-tooltip {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .control-btn:hover .control-tooltip {
            opacity: 1;
        }

        /* Loading Screen */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2d5016 0%, #3e7b27 50%, #6b8e23 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-content {
            text-align: center;
        }

        .loading-recycle {
            font-size: 60px;
            animation: recycleRotate 2s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: white;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #8fbc8f, #32cd32);
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Voice Indicator */
        .voice-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(50, 205, 50, 0.5);
            border-radius: 30px;
            padding: 14px 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .voice-indicator.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        .voice-waves {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, #32cd32, #9acd32);
            border-radius: 2px;
            animation: voice-wave 1s ease-in-out infinite;
        }

        .voice-wave:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voice-wave {
            0%, 100% { transform: scaleY(0.3); }
            50% { transform: scaleY(1); }
        }

        .narration-text {
            color: white;
            font-size: 13px;
            max-width: 300px;
        }

        /* Quick Actions */
        .quick-actions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .action-btn {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn:hover {
            background: rgba(50, 205, 50, 0.3);
            border-color: #32cd32;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(50, 205, 50, 0.3);
        }

        /* Custom Scrollbar */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #32cd32, #9acd32);
            border-radius: 3px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                width: 100%;
                max-height: 50vh;
                border-radius: 20px 20px 0 0;
            }
            
            .journey-navigation {
                bottom: 52vh;
                max-width: calc(100% - 40px);
            }
            
            .voice-controls {
                top: auto;
                bottom: 55vh;
                right: 10px;
            }
            
            .quick-actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-recycle">‚ôªÔ∏è</div>
            <div class="loading-text">Preparing Your Sustainability Journey...</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- Museum Header -->
    <div class="museum-header">
        <div class="museum-title">Waste Management and Sustainability</div>
        <div class="exhibit-subtitle">
            <span class="recycle-indicator"></span>
            Reducing, Reusing, and Recycling for Tomorrow
        </div>
    </div>

    <!-- Journey Navigation -->
    <div class="journey-navigation">
        <div class="journey-title">
            <span>‚ôªÔ∏è</span>
            <span>Sustainability Explorer</span>
        </div>
        <div class="journey-steps">
            <button class="journey-btn active" onclick="loadJourneyStep('introduction')">
                <span>üåç</span> Overview
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('biodegradable')">
                <span>ü•¨</span> Biodegradable
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('nonbiodegradable')">
                <span>üè≠</span> Non-Bio
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('burial')">
                <span>‚öóÔ∏è</span> Act 13.5
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('management')">
                <span>üìä</span> Act 13.6-8
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('ewaste')">
                <span>üì±</span> Act 13.9
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('composting')">
                <span>üå±</span> Compost
            </button>
            <button class="journey-btn" onclick="loadJourneyStep('solutions')">
                <span>üéØ</span> Solutions
            </button>
        </div>
    </div>

    <!-- 3D Model Container -->
    <div class="model-container">
        <div class="sketchfab-embed-wrapper">
            <iframe id="api-frame"
                    title="Waste Management Model" 
                    frameborder="0" 
                    allowfullscreen 
                    mozallowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    allow="autoplay; fullscreen; xr-spatial-tracking"
                    xr-spatial-tracking 
                    execution-while-out-of-viewport 
                    execution-while-not-rendered 
                    web-share 
                    src="https://sketchfab.com/models/9debd9dc0f7b4618b51c76833a13e44c/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0">
            </iframe>
        </div>
    </div>

    <!-- Information Panel -->
    <div class="info-panel" id="infoPanel">
        <div class="info-header">
            <div class="info-icon" id="stepIcon">üåç</div>
            <div class="info-title">
                <h2 id="stepTitle">Waste Management - A Global Challenge</h2>
                <div class="info-subtitle" id="stepSubtitle">Understanding our impact and finding solutions</div>
            </div>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span>Sustainability Journey</span>
                <span class="progress-percentage" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-steps-mini">
                <span class="step-mini active" onclick="loadJourneyStep('introduction')">Intro</span>
                <span class="step-mini" onclick="loadJourneyStep('biodegradable')">Bio</span>
                <span class="step-mini" onclick="loadJourneyStep('nonbiodegradable')">Non</span>
                <span class="step-mini" onclick="loadJourneyStep('burial')">Exp</span>
                <span class="step-mini" onclick="loadJourneyStep('management')">Mgmt</span>
                <span class="step-mini" onclick="loadJourneyStep('ewaste')">E-waste</span>
                <span class="step-mini" onclick="loadJourneyStep('composting')">Comp</span>
                <span class="step-mini" onclick="loadJourneyStep('solutions')">Sol</span>
            </div>
        </div>

        <div class="info-content" id="mainDescription">
            Waste management is one of the most pressing environmental challenges of our time. Every day, humans produce millions of tons of waste - from food scraps to electronic devices. Understanding the difference between biodegradable and non-biodegradable materials is crucial for developing sustainable solutions that protect our planet for future generations.
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>üî¨</span> Key Concepts
            </div>
            <div class="info-card-content">
                <ul class="info-list" id="keyConcepts">
                    <li>Biodegradable materials break down naturally</li>
                    <li>Non-biodegradable waste persists for centuries</li>
                    <li>Proper sorting enables effective recycling</li>
                    <li>Composting transforms organic waste into nutrients</li>
                </ul>
            </div>
        </div>

        <div class="fun-fact">
            <div class="fun-fact-title">Sustainability Fact!</div>
            <div class="fun-fact-text" id="funFact">
                Each person produces an average of 4.5 pounds of waste per day - that's over 1,600 pounds per year! But 75% of this waste could be recycled or composted.
            </div>
        </div>

        <div class="info-card">
            <div class="info-card-title">
                <span>üéØ</span> Learning Objectives
            </div>
            <div class="info-card-content" id="learningObjectives">
                Learn to distinguish between different types of waste and understand how proper management can reduce environmental impact.
            </div>
        </div>
    </div>

    <!-- Voice Controls -->
    <div class="voice-controls">
        <button class="control-btn active" id="voiceToggle" onclick="toggleVoice()">
            üîä
            <span class="control-tooltip">Voice Narration</span>
        </button>
        <button class="control-btn" onclick="toggleAutoPlay()">
            ‚ñ∂Ô∏è
            <span class="control-tooltip">Auto Journey</span>
        </button>
        <button class="control-btn" onclick="toggleInfo()">
            ‚ÑπÔ∏è
            <span class="control-tooltip">Toggle Info</span>
        </button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-btn" onclick="startGuidedTour()">
            <span>üöÄ</span> Guided Tour
        </button>
        <button class="action-btn" onclick="showQuiz()">
            <span>üéØ</span> Test Knowledge
        </button>
    </div>

    <!-- Voice Indicator -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-waves">
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
            <div class="voice-wave"></div>
        </div>
        <div class="narration-text" id="narrationText">Narrating...</div>
    </div>

    <script>
        // Journey Step Data with Complete Waste Management Content
        const JOURNEY_DATA = {
            introduction: {
                title: "Waste Management - A Global Challenge",
                subtitle: "Understanding our impact and finding solutions",
                icon: "üåç",
                modelUrl: "https://sketchfab.com/models/9debd9dc0f7b4618b51c76833a13e44c/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Waste management is one of the most pressing environmental challenges of our time. Every day, humans produce millions of tons of waste - from food scraps to electronic devices. Understanding the difference between biodegradable and non-biodegradable materials is crucial for developing sustainable solutions that protect our planet for future generations.",
                concepts: [
                    "Biodegradable materials break down naturally",
                    "Non-biodegradable waste persists for centuries",
                    "Proper sorting enables effective recycling",
                    "Composting transforms organic waste into nutrients"
                ],
                funFact: "Each person produces an average of 4.5 pounds of waste per day - that's over 1,600 pounds per year! But 75% of this waste could be recycled or composted.",
                objectives: "Learn to distinguish between different types of waste and understand how proper management can reduce environmental impact.",
                narration: "Welcome to the world of waste management and sustainability! What you're seeing here are vegetable peels and food scraps - organic waste that represents about 30% of everything we throw away. This might look like garbage, but it's actually a valuable resource that nature can easily recycle. Every day, billions of people around the world produce waste, and how we handle that waste determines the health of our planet. The good news is that much of what we consider 'waste' doesn't need to be waste at all. Organic materials like these food scraps can be composted to create nutrient-rich soil. Other materials can be recycled, reused, or redesigned to reduce their environmental impact. The challenge is learning to see waste not as something to simply dispose of, but as resources that can be managed sustainably."
            },
            biodegradable: {
                title: "Biodegradable Materials - Nature's Recyclers",
                subtitle: "Organic waste that returns to the earth",
                icon: "ü•¨",
                modelUrl: "https://sketchfab.com/models/9debd9dc0f7b4618b51c76833a13e44c/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Biodegradable materials are organic substances that can be broken down by bacteria, fungi, and other decomposers. These vegetable peels and food scraps represent the largest category of biodegradable waste in households. When properly composted, they become valuable soil amendments that support plant growth.",
                concepts: [
                    "Broken down by natural decomposers",
                    "Include food scraps, paper, and organic matter",
                    "Decompose within weeks to months",
                    "Can be composted into valuable soil"
                ],
                funFact: "Food waste in landfills produces methane, a greenhouse gas 25 times more potent than carbon dioxide! Composting the same waste produces no methane and creates useful soil.",
                objectives: "Understand how biodegradable materials decompose and learn methods for managing organic waste sustainably.",
                narration: "These vegetable peels and food scraps are perfect examples of biodegradable materials - waste that nature knows exactly how to handle! Biodegradable means that bacteria, fungi, and other microorganisms can break these materials down into simple, harmless substances like water, carbon dioxide, and nutrients. The decomposition process happens naturally and relatively quickly - most food scraps will break down within a few weeks to a few months under the right conditions. What makes this process so remarkable is that instead of creating pollution, decomposing organic matter actually creates valuable resources. When bacteria and fungi break down these vegetable peels, they release nutrients like nitrogen, phosphorus, and potassium back into the soil, where plants can use them to grow. This is nature's own recycling system, and it's been working perfectly for millions of years. The problem comes when we bury biodegradable waste in landfills where there's no oxygen - then it produces methane instead of harmless decomposition."
            },
            nonbiodegradable: {
                title: "Non-Biodegradable Materials - The Persistent Problem",
                subtitle: "Waste that doesn't break down naturally",
                icon: "üè≠",
                modelUrl: "https://sketchfab.com/models/0c8ec70f57aa46ba80af130eb3b86eb3/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Non-biodegradable materials like plastics, metals, and synthetic compounds resist natural decomposition. This garage full of plastic waste represents the challenge of managing materials designed to last forever. These materials can persist in the environment for hundreds or thousands of years.",
                concepts: [
                    "Resist natural decomposition processes",
                    "Include plastics, metals, and synthetic materials",
                    "Persist for hundreds to thousands of years",
                    "Require special recycling or disposal methods"
                ],
                funFact: "A plastic bottle takes 450 years to decompose, while a plastic bag takes 10-20 years. Some plastics may never fully decompose - they just break into smaller pieces!",
                objectives: "Recognize non-biodegradable materials and understand why they require special management strategies.",
                narration: "Now we're looking at the other side of the waste story - non-biodegradable materials like this collection of plastic waste. Unlike the food scraps we saw earlier, these materials are designed to resist decomposition. That's often why we made them in the first place - we wanted materials that would last! Plastic is incredibly useful because it's lightweight, durable, and waterproof. But these same properties that make plastic so useful also make it a persistent environmental problem. When bacteria and fungi encounter plastic, they simply can't break it down. The chemical bonds in synthetic materials are different from those in natural materials, and decomposers haven't evolved the right enzymes to digest them. So instead of decomposing in weeks or months like organic waste, plastics can persist for centuries or even millennia. A plastic water bottle thrown away today could still be recognizable 500 years from now! This persistence means that non-biodegradable waste accumulates in the environment, creating pollution that affects wildlife, ecosystems, and even human health."
            },
            burial: {
                title: "Activity 13.5 - Waste Burial Experiment",
                subtitle: "Comparing decomposition rates of different materials",
                icon: "‚öóÔ∏è",
                modelUrl: "https://sketchfab.com/models/9debd9dc0f7b4618b51c76833a13e44c/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "In this hands-on experiment, you'll bury different materials and observe how they decompose over time. Compare organic waste like these vegetable peels with non-biodegradable items like plastic bottles, aluminum cans, and paper products to see decomposition in action.",
                concepts: [
                    "Direct observation of decomposition rates",
                    "Compare biodegradable vs non-biodegradable",
                    "Document changes over weeks and months",
                    "Understand environmental conditions' effects"
                ],
                funFact: "In controlled experiments, banana peels decompose in 3-5 weeks, while plastic bottles show no change even after a full year buried in soil!",
                objectives: "Design and conduct experiments to observe and document decomposition rates of various materials.",
                narration: "Time for some hands-on science! Activity 13.5 challenges you to become a decomposition detective. You'll bury different types of waste materials - like these vegetable peels alongside plastic items, aluminum cans, paper, and glass - then observe what happens over time. This experiment reveals the dramatic differences between biodegradable and non-biodegradable materials in a way that's impossible to ignore. Start by selecting a variety of materials: organic waste like fruit peels, vegetable scraps, and paper products, plus non-biodegradable items like plastic bottles, aluminum cans, and synthetic fabrics. Bury them in marked locations and create a schedule to check on them weekly for several months. You'll be amazed at the results! The organic materials will gradually disappear, broken down by soil microorganisms, while the synthetic materials remain virtually unchanged. This experiment helps you understand that the convenience of non-biodegradable materials comes with a long-term environmental cost that we must address through better design, recycling, and waste management."
            },
            management: {
                title: "Activities 13.6-13.8 - Waste Management Investigations",
                subtitle: "Analyzing local waste streams and solutions",
                icon: "üìä",
                modelUrl: "https://sketchfab.com/models/0c8ec70f57aa46ba80af130eb3b86eb3/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "These activities involve investigating your local waste management system. Study household waste composition, analyze recycling programs effectiveness, and evaluate waste reduction strategies. You'll examine real data to understand how waste flows through your community.",
                concepts: [
                    "Audit household and school waste streams",
                    "Evaluate local recycling program effectiveness",
                    "Calculate waste reduction potential",
                    "Propose community improvement strategies"
                ],
                funFact: "The average American family throws away $1,500 worth of food each year - enough to feed a family of four for a month!",
                objectives: "Develop analytical skills to assess waste management systems and propose evidence-based improvements.",
                narration: "Activities 13.6 through 13.8 turn you into a waste management analyst, investigating how waste moves through your community. Like detectives examining evidence, you'll collect data on what gets thrown away, where it goes, and how effectively it's being managed. In Activity 13.6, you'll conduct a waste audit - carefully sorting and weighing everything your household or classroom throws away for a week. You'll be surprised at what you discover! Most people don't realize how much they waste until they measure it. Activity 13.7 has you mapping your local waste management system - from collection trucks to transfer stations, recycling facilities, and landfills. You'll learn that waste doesn't just disappear when you put it in the bin. Activity 13.8 challenges you to evaluate recycling programs and calculate their effectiveness. How much material actually gets recycled versus thrown away? What are the barriers to better recycling? These investigations help you understand that waste management is a complex system involving technology, economics, and human behavior."
            },
            ewaste: {
                title: "Activity 13.9 - Electronic Waste and Recycling",
                subtitle: "Managing our high-tech trash",
                icon: "üì±",
                modelUrl: "https://sketchfab.com/models/a1c0f215fbb046fb87b6b16ecd210e52/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Electronic waste (e-waste) is the fastest-growing waste stream globally. Old computers, phones, and electronics contain valuable metals but also toxic substances. This investigation explores the challenges and opportunities in electronic waste recycling.",
                concepts: [
                    "E-waste is the fastest-growing waste stream",
                    "Contains valuable metals like gold and silver",
                    "Also contains toxic substances like lead",
                    "Requires specialized recycling facilities"
                ],
                funFact: "Your old smartphone contains more gold per ton than a gold mine! But less than 20% of e-waste is properly recycled worldwide.",
                objectives: "Understand the unique challenges of electronic waste and research sustainable technology practices.",
                narration: "Welcome to the complex world of electronic waste - the fastest-growing waste stream on our planet! This pile of old electronics represents both a major environmental challenge and a valuable resource. Every year, we discard billions of electronic devices as technology advances rapidly and planned obsolescence encourages frequent upgrades. The challenge with e-waste is that it's simultaneously precious and toxic. Inside these devices are valuable metals like gold, silver, platinum, and rare earth elements that took enormous energy and environmental damage to extract from the earth. A single smartphone contains more gold per ton than many gold mines! But these same devices also contain toxic substances like lead, mercury, and flame retardants that can contaminate soil and water if improperly disposed of. Activity 13.9 challenges you to research the lifecycle of electronic devices in your community. Where do old phones and computers go when people are done with them? How much e-waste is properly recycled versus thrown in landfills? What happens to the valuable materials inside? Your investigation will reveal both the problems and solutions in managing our high-tech trash."
            },
            composting: {
                title: "Composting - Turning Waste into Gold",
                subtitle: "Nature's recycling system in action",
                icon: "üå±",
                modelUrl: "https://sketchfab.com/models/a1c0f215fbb046fb87b6b16ecd210e52/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "Composting transforms organic waste into nutrient-rich soil amendment through controlled decomposition. This pallet compost bin demonstrates how simple structures can manage kitchen scraps and yard waste, reducing landfill burden while creating valuable gardening resources.",
                concepts: [
                    "Controlled decomposition of organic matter",
                    "Requires proper carbon-nitrogen balance",
                    "Creates nutrient-rich soil amendment",
                    "Reduces methane emissions from landfills"
                ],
                funFact: "Composting reduces organic waste volume by 50-75% while creating soil that can hold 20 times its weight in water!",
                objectives: "Learn composting principles and design systems to manage organic waste effectively.",
                narration: "Here's where waste becomes wonderful - composting! This simple pallet bin represents one of humanity's oldest and most effective recycling technologies. Composting is controlled decomposition, where we create ideal conditions for bacteria, fungi, and other decomposers to transform organic waste into rich, dark compost that gardeners call 'black gold.' The magic of composting lies in getting the balance right. You need the right mix of carbon-rich 'brown' materials like dried leaves and paper, and nitrogen-rich 'green' materials like kitchen scraps and fresh grass clippings. Add the right amount of water and air, and billions of microorganisms get to work breaking everything down. The process generates heat - a healthy compost pile can reach 160¬∞F in the center! This heat kills harmful bacteria and weed seeds while speeding up decomposition. In just a few months, your kitchen scraps and yard waste transform into nutrient-rich compost that improves soil structure, retains moisture, and feeds plants naturally. Composting doesn't just solve a waste problem - it creates a valuable resource while reducing greenhouse gas emissions. When organic waste decomposes in landfills without oxygen, it produces methane. But composting produces only carbon dioxide and water, making it much better for the climate."
            },
            solutions: {
                title: "Sustainable Solutions - Building a Circular Economy",
                subtitle: "Strategies for zero waste and sustainable living",
                icon: "üéØ",
                modelUrl: "https://sketchfab.com/models/9debd9dc0f7b4618b51c76833a13e44c/embed?autostart=1&internal=1&tracking=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0",
                description: "The future of waste management lies in prevention, reuse, and circular design. Instead of the linear 'take-make-waste' model, sustainable solutions create closed loops where waste becomes input for new products. This requires changes in design, policy, and individual behavior.",
                concepts: [
                    "Circular economy eliminates waste through design",
                    "Prevention is more effective than recycling",
                    "Extended producer responsibility drives change",
                    "Individual actions multiply into system change"
                ],
                funFact: "Countries with the best waste management achieve 65%+ recycling rates and produce 75% less waste per person than countries with poor systems!",
                objectives: "Understand systemic solutions to waste problems and develop personal action plans for sustainable living.",
                narration: "Our journey concludes with hope and solutions! Looking at these organic materials again, imagine a world where nothing is truly waste - where everything flows in cycles like nature intended. This vision is called a circular economy, and it's already beginning to happen around the world. In a circular economy, products are designed from the start to be reused, repaired, or recycled. Companies take responsibility for their products' entire lifecycle, not just until they're sold. Packaging is minimal and compostable. Electronics are designed for easy repair and upgrade rather than replacement. Food waste is captured and composted or converted to energy. The solutions already exist! Some cities achieve recycling rates over 65%, while others have cut per-person waste production by more than half. The changes needed happen at every level: better product design, smarter policies, improved infrastructure, and individual choices that add up to system transformation. You can be part of this solution! Start with the three Rs - Reduce consumption, Reuse items creatively, and Recycle properly. Support companies designing for sustainability. Advocate for better waste policies in your community. And remember that composting those vegetable peels isn't just managing waste - it's participating in the natural cycles that sustain all life on Earth."
            }
        };

        // Global Variables
        let currentStep = 'introduction';
        let voiceEnabled = true;
        let autoPlayEnabled = false;
        let currentSpeech = null;
        let selectedVoice = null;
        let journeyProgress = 0;
        let guidedTourActive = false;

        // Initialize Voice System
        function initVoiceSystem() {
            if (!('speechSynthesis' in window)) {
                console.warn('Speech synthesis not supported');
                voiceEnabled = false;
                document.getElementById('voiceToggle').style.display = 'none';
                return;
            }

            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) return;

                // Prefer natural-sounding voices
                const preferredVoices = [
                    'Google UK English Female',
                    'Microsoft Sonia',
                    'Microsoft Hazel',
                    'Samantha',
                    'Victoria'
                ];

                for (const name of preferredVoices) {
                    selectedVoice = voices.find(v => v.name.includes(name));
                    if (selectedVoice) break;
                }

                if (!selectedVoice) {
                    selectedVoice = voices.find(v => v.lang.startsWith('en'));
                }
            }

            loadVoices();
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        }

        // Load Journey Step
        function loadJourneyStep(stepId) {
            const stepData = JOURNEY_DATA[stepId];
            if (!stepData) return;

            currentStep = stepId;
            
            // Update model
            document.getElementById('api-frame').src = stepData.modelUrl;
            
            // Update info panel
            document.getElementById('stepIcon').textContent = stepData.icon;
            document.getElementById('stepTitle').textContent = stepData.title;
            document.getElementById('stepSubtitle').textContent = stepData.subtitle;
            document.getElementById('mainDescription').textContent = stepData.description;
            
            // Update key concepts
            const conceptsList = document.getElementById('keyConcepts');
            conceptsList.innerHTML = stepData.concepts.map(c => `<li>${c}</li>`).join('');
            
            // Update fun fact
            document.getElementById('funFact').textContent = stepData.funFact;
            
            // Update learning objectives
            document.getElementById('learningObjectives').textContent = stepData.objectives;
            
            // Update navigation buttons
            updateNavigationButtons(stepId);
            
            // Update progress
            updateProgress();
            
            // Play narration if enabled
            if (voiceEnabled) {
                speakText(stepData.narration);
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons(activeStep) {
            const buttons = document.querySelectorAll('.journey-btn');
            const steps = ['introduction', 'biodegradable', 'nonbiodegradable', 'burial', 'management', 'ewaste', 'composting', 'solutions'];
            const activeIndex = steps.indexOf(activeStep);
            
            buttons.forEach((btn, index) => {
                btn.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    btn.classList.add('completed');
                } else if (index === activeIndex) {
                    btn.classList.add('active');
                }
            });
            
            // Update mini steps
            const miniSteps = document.querySelectorAll('.step-mini');
            miniSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < activeIndex) {
                    step.classList.add('completed');
                } else if (index === activeIndex) {
                    step.classList.add('active');
                }
            });
        }

        // Update Progress
        function updateProgress() {
            const steps = ['introduction', 'biodegradable', 'nonbiodegradable', 'burial', 'management', 'ewaste', 'composting', 'solutions'];
            const currentIndex = steps.indexOf(currentStep);
            const progress = ((currentIndex + 1) / steps.length) * 100;
            
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Speech Functions
        function speakText(text) {
            if (!voiceEnabled || !text) return;
            
            stopSpeech();
            
            currentSpeech = new SpeechSynthesisUtterance(text);
            if (selectedVoice) {
                currentSpeech.voice = selectedVoice;
            }
            currentSpeech.rate = 0.9;
            currentSpeech.pitch = 1.0;
            currentSpeech.volume = 0.9;
            
            currentSpeech.onstart = () => {
                document.getElementById('voiceIndicator').classList.add('visible');
                document.getElementById('narrationText').textContent = 
                    text.substring(0, 50) + (text.length > 50 ? '...' : '');
            };
            
            currentSpeech.onend = () => {
                document.getElementById('voiceIndicator').classList.remove('visible');
                currentSpeech = null;
                
                // Auto-advance if guided tour is active
                if (guidedTourActive) {
                    setTimeout(nextStep, 2000);
                }
            };
            
            speechSynthesis.speak(currentSpeech);
        }

        function stopSpeech() {
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                document.getElementById('voiceIndicator').classList.remove('visible');
            }
        }

        // Control Functions
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voiceToggle');
            btn.textContent = voiceEnabled ? 'üîä' : 'üîá';
            btn.classList.toggle('active', voiceEnabled);
            
            if (!voiceEnabled) {
                stopSpeech();
            }
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            if (autoPlayEnabled) {
                startGuidedTour();
            } else {
                guidedTourActive = false;
            }
        }

        function toggleInfo() {
            const panel = document.getElementById('infoPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Guided Tour
        function startGuidedTour() {
            guidedTourActive = true;
            const steps = ['introduction', 'biodegradable', 'nonbiodegradable', 'burial', 'management', 'ewaste', 'composting', 'solutions'];
            let stepIndex = 0;
            
            function tourStep() {
                if (stepIndex < steps.length && guidedTourActive) {
                    loadJourneyStep(steps[stepIndex]);
                    stepIndex++;
                } else {
                    guidedTourActive = false;
                    if (voiceEnabled) {
                        speakText("Congratulations! You've completed your sustainability journey. You now understand how to manage waste responsibly and contribute to a circular economy!");
                    }
                }
            }
            
            tourStep();
            window.nextStep = tourStep;
        }

        // Quiz Function
        function showQuiz() {
            const questions = [
                "What's the difference between biodegradable and non-biodegradable waste?",
                "How does composting benefit the environment compared to landfills?",
                "Why is electronic waste both valuable and problematic?",
                "What strategies can communities use to improve waste management?",
                "How can individuals contribute to a circular economy?"
            ];
            
            const randomQ = questions[Math.floor(Math.random() * questions.length)];
            
            if (voiceEnabled) {
                speakText(`Here's a sustainability question: ${randomQ} Think about the waste management principles and solutions you've learned!`);
            }
        }

        // Initialize
        function init() {
            initVoiceSystem();
            
            // Hide loading screen
            setTimeout(() => {
                const loading = document.getElementById('loadingOverlay');
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                    
                    // Welcome message
                    if (voiceEnabled) {
                        speakText("Welcome to your waste management and sustainability journey! We'll explore how different materials decompose, conduct hands-on experiments, and discover solutions for a more sustainable future. Let's start by understanding the global challenge of waste!");
                    }
                }, 1000);
            }, 3000);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'v': toggleVoice(); break;
                    case 'i': toggleInfo(); break;
                    case 'g': startGuidedTour(); break;
                    case 'Escape': stopSpeech(); guidedTourActive = false; break;
                    case 'ArrowRight': nextStep && nextStep(); break;
                }
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>