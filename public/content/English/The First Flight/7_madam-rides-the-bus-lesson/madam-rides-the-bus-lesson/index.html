<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madam Rides the Bus - Interactive English Lesson</title>
    <link rel="stylesheet" href="css/styles.css">
    <meta name="description" content="Interactive English lesson based on 'Madam Rides the Bus' by K. S. Sundaram">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-menu" role="navigation" aria-label="Main navigation">
        <div class="nav-items">
            <button class="nav-item active" onclick="showModule('intro')" aria-pressed="true">📚 Introduction</button>
            <button class="nav-item" onclick="showModule('prereading')" aria-pressed="false">📝 Let's Begin</button>
            <button class="nav-item" onclick="showModule('story')" aria-pressed="false">📖 The Story</button>
            <button class="nav-item" onclick="showModule('poem')" aria-pressed="false">🎭 The Poem</button>
            <button class="nav-item" onclick="showModule('thinking-text')" aria-pressed="false">❓ Reading Comprehension</button>
            <button class="nav-item" onclick="showModule('thinking-language')" aria-pressed="false">🔤 Vocabulary & Grammar</button>
        </div>
    </nav>

    <!-- Audio Control -->
    <div class="audio-control">
        <button id="audioBtn" class="audio-btn" onclick="toggleAudio()" aria-label="Toggle audio narration">🔊</button>
    </div>

    <!-- Achievement Popup -->
    <div id="achievementPopup" class="achievement-popup" aria-live="polite">
        <div class="achievement-title">🏆 Achievement Unlocked!</div>
        <div class="achievement-desc" id="achievementDesc">You've completed a module!</div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">📚 Madam Rides the Bus</h1>
            <p class="subtitle">First Flight - Class X</p>
            <p class="reprint">Reprint 2025-26</p>
        </header>

        <!-- Progress Tracker -->
        <div class="progress-container">
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            <div class="progress-stats">
                <span>📖 Modules: <span id="modulesComplete">0</span>/6</span>
                <span>⭐ Score: <span id="totalScore">0</span></span>
                <span>⏱️ Time: <span id="timeSpent">0:00</span></span>
            </div>
        </div>

        <!-- Introduction Module -->
        <div class="module active" id="intro">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">🌟</span>
                    Welcome to "Madam Rides the Bus"
                </h2>
                <div class="content-block">
                    <p>This sensitive story follows an eight-year old girl's first bus journey into the world outside her village. It's also her induction into the mystery of life and death as she sees the gap between our knowing that there is death, and our understanding of it.</p>
                    <p>In this interactive lesson, we'll explore this touching narrative about curiosity, independence, and growing up through the eyes of Valli, an eight-year-old girl who plans and executes her first solo bus journey.</p>
                </div>
                <div class="button-container">
                    <button class="interactive-btn" onclick="startJourney()" aria-label="Begin the lesson">
                        🚀 Start Your Learning Journey
                    </button>
                </div>
            </div>
        </div>

        <!-- Let's Begin Module -->
        <div class="module" id="prereading">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">📝</span>
                    Let's Begin
                </h2>
                <div class="content-block">
                    <p>In this story, we will read about a young girl's first bus journey and her experiences along the way. Before we start, let's think about our own experiences with travel and discovery.</p>
                    <p>The story also raises questions about curiosity, independence, and how children learn about the world around them.</p>
                </div>
                
                <h3 class="activity-title">Pre-Reading Activity: Bus Journey</h3>
                <div class="content-block">
                    <p>Look at the words and phrases given below. Which ones do you think you will find in the text?</p>
                    <p>a set of passengers, get on the bus, get off the bus, platform, Tickets please, a roar and a rattle, a row of seats, slowing down to a crawl, blowing a whistle</p>
                    <p>What can you see from a fast-moving bus? Think about rivers, green fields, hills, roadside shops, market places, railway tracks, moving trains, vehicles on the road, trees, crowds, clothes in shops, animals.</p>
                </div>
                
                <div class="reflection-exercise">
                    <textarea id="reflectionText" rows="5" placeholder="Write about your own experiences of a bus journey or what you might see from a moving bus..."></textarea>
                    <button class="interactive-btn" onclick="saveReflection()">
                        Save Reflection
                    </button>
                    <div id="reflectionFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>
        </div>

        <!-- Story Module -->
        <div class="module" id="story">
            <div class="story-reader">
                <h2 class="section-title">MADAM RIDES THE BUS</h2>
                
                <div class="story-controls">
                    <button class="reading-mode-btn" onclick="toggleReadAloud()" aria-label="Read the text aloud">
                        🔊 Read Aloud
                    </button>
                    <button class="reading-mode-btn" onclick="highlightVocabulary()" aria-label="Highlight vocabulary words">
                        ✨ Highlight Vocabulary
                    </button>
                    <button class="reading-mode-btn" onclick="togglePrintMode()" aria-label="Toggle print-friendly mode">
                        🖨️ Print Mode
                    </button>
                </div>
                
                <div class="story-content" id="storyContent">
                    <!-- Story content will be loaded dynamically via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Poem Module -->
        <div class="module" id="poem">
            <div class="story-reader">
                <h2 class="section-title">THE TALE OF CUSTARD THE DRAGON</h2>
                
                <div class="story-controls">
                    <button class="reading-mode-btn" onclick="readPoemAloud()" aria-label="Read the poem aloud">
                        🔊 Read Aloud
                    </button>
                    <button class="reading-mode-btn" onclick="highlightPoemVocabulary()" aria-label="Highlight vocabulary words">
                        ✨ Highlight Vocabulary
                    </button>
                    <button class="reading-mode-btn" onclick="togglePrintMode()" aria-label="Toggle print-friendly mode">
                        🖨️ Print Mode
                    </button>
                </div>
                
                <div class="poem-content" id="poemContent">
                    <!-- Poem content will be loaded dynamically via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Reading Comprehension Module -->
        <div class="module" id="thinking-text">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">❓</span>
                    Reading Comprehension Questions
                </h2>
                
                <div class="story-navigation">
                    <button class="story-nav-btn active" onclick="showQuestionSet('story-questions')" aria-pressed="true">Story Questions</button>
                    <button class="story-nav-btn" onclick="showQuestionSet('poem-questions')" aria-pressed="false">Poem Questions</button>
                </div>
                
                <div id="textQuestions" class="question-section">
                    <!-- Questions will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Vocabulary & Grammar Module -->
        <div class="module" id="thinking-language">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">🔍</span>
                    Adverbs in the Story
                </h2>
                <div class="content-block">
                    <p>Read these sentences from the story:</p>
                    <blockquote>"She stared wistfully at the people who got on or off the bus."</blockquote>
                    <blockquote>"And a tiny hand was raised commandingly."</blockquote>
                    <p>The words <strong>wistful</strong> and <strong>commanding</strong> are adjectives. When you add <strong>–ly</strong> to them, they become adverbs that describe how an action is performed.</p>
                </div>
                
                <div class="vocabulary-exercise">
                    <h3>Choose the correct adverbs from the story to fill in the blanks:</h3>
                    <div class="vocab-question">
                        <p>1. Valli stared <select id="vocab1">
                            <option value="">Select</option>
                            <option value="wistfully">wistfully</option>
                            <option value="commandingly">commandingly</option>
                            <option value="haughtily">haughtily</option>
                            <option value="irritably">irritably</option>
                        </select> at the people who got on or off the bus.</p>
                    </div>
                    <div class="vocab-question">
                        <p>2. A tiny hand was raised <select id="vocab2">
                            <option value="">Select</option>
                            <option value="commandingly">commandingly</option>
                            <option value="wistfully">wistfully</option>
                            <option value="curtly">curtly</option>
                            <option value="thriftily">thriftily</option>
                        </select> when Valli wanted the bus to stop.</p>
                    </div>
                    <div class="vocab-question">
                        <p>3. "There's nobody here who's a child," she said <select id="vocab3">
                            <option value="">Select</option>
                            <option value="haughtily">haughtily</option>
                            <option value="irritably">irritably</option>
                            <option value="wistfully">wistfully</option>
                            <option value="thriftily">thriftily</option>
                        </select>.</p>
                    </div>
                    <div class="vocab-question">
                        <p>4. "I'm not a child, I tell you," she said <select id="vocab4">
                            <option value="">Select</option>
                            <option value="irritably">irritably</option>
                            <option value="wistfully">wistfully</option>
                            <option value="haughtily">haughtily</option>
                            <option value="commandingly">commandingly</option>
                        </select>.</p>
                    </div>
                    <div class="vocab-question">
                        <p>5. She had <select id="vocab5">
                            <option value="">Select</option>
                            <option value="thriftily">thriftily</option>
                            <option value="wistfully">wistfully</option>
                            <option value="irritably">irritably</option>
                            <option value="curtly">curtly</option>
                        </select> saved whatever stray coins came her way.</p>
                    </div>
                    <button class="interactive-btn" onclick="checkVocabulary()">Check Answers</button>
                    <div id="vocabFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>

            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">📚</span>
                    Character Description
                </h2>
                <div class="content-block">
                    <p>Valli has a strong and determined character. Look at these sentences from the text:</p>
                    <blockquote>"Stop the bus! Stop the bus!" And a tiny hand was raised _______.</blockquote>
                    <blockquote>"Yes, I _____ go to town," said Valli, still standing outside the bus.</blockquote>
                    <p>Fill in the blanks to complete these sentences about Valli from the story.</p>
                </div>
                
                <div class="matching-game">
                    <h3>Complete the following sentences by filling in the blanks with the exact words from the story:</h3>
                    
                    <div class="contraction-item">
                        <p>1. "Stop the bus! Stop the bus!" And a tiny hand was raised <input type="text" class="language-input" placeholder="one word here"></p>
                    </div>
                    <div class="contraction-item">
                        <p>2. "Yes, I <input type="text" class="language-input" placeholder="3 words here"> go to town," said Valli, still standing outside the bus.</p>
                    </div>
                    <div class="contraction-item">
                        <p>3. "There's nobody here <input type="text" class="language-input" placeholder="3-4 words here">," she said haughtily. "I've paid my thirty paise like everyone else."</p>
                    </div>
                    <div class="contraction-item">
                        <p>4. "Never mind," she said, "I can <input type="text" class="language-input" placeholder="4-5 words here">. You don't have to help me."</p>
                    </div>
                    <div class="contraction-item">
                        <p>5. "You needn't bother about me. I <input type="text" class="language-input" placeholder="5 words here">," Valli said, turning her face toward the window.</p>
                    </div>
                    <div class="contraction-item">
                        <p>6. Then she turned to the conductor and said, "Well, sir, I hope <input type="text" class="language-input" placeholder="4 words here">."</p>
                    </div>
                    
                    <button class="interactive-btn" onclick="checkLanguageExercise()">Check Answers</button>
                    <div id="languageFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Interactive English Lesson - Madam Rides the Bus</p>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/madam-rides-the-bus-story.js"></script>
    <script src="js/questions.js"></script>
    <script src="js/activities.js"></script>
</body>
</html>
