<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kathmandu - Interactive English Lesson</title>
    <link rel="stylesheet" href="css/styles.css">
    <meta name="description" content="Interactive English lesson based on 'Kathmandu' by Vikram Seth">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-menu" role="navigation" aria-label="Main navigation">
        <div class="nav-items">
            <button class="nav-item active" onclick="showModule('intro')" aria-pressed="true">📚 Introduction</button>
            <button class="nav-item" onclick="showModule('prereading')" aria-pressed="false">📝 Let's Begin</button>
            <button class="nav-item" onclick="showModule('story')" aria-pressed="false">📖 The Story</button>
            <button class="nav-item" onclick="showModule('poem')" aria-pressed="false">🎭 The Poem</button>
            <button class="nav-item" onclick="showModule('thinking-text')" aria-pressed="false">❓ Reading Comprehension</button>
            <button class="nav-item" onclick="showModule('thinking-language')" aria-pressed="false">🔤 Vocabulary & Grammar</button>
        </div>
    </nav>

    <!-- Audio Control -->
    <div class="audio-control">
        <button id="audioBtn" class="audio-btn" onclick="toggleAudio()" aria-label="Toggle audio narration">🔊</button>
    </div>

    <!-- Achievement Popup -->
    <div id="achievementPopup" class="achievement-popup" aria-live="polite">
        <div class="achievement-title">🏆 Achievement Unlocked!</div>
        <div class="achievement-desc" id="achievementDesc">You've completed a module!</div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">📚 Kathmandu</h1>
            <p class="subtitle">Beehive - Class IX</p>
            <p class="reprint">Reprint 2025-26</p>
        </header>

        <!-- Progress Tracker -->
        <div class="progress-container">
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            <div class="progress-stats">
                <span>📖 Modules: <span id="modulesComplete">0</span>/6</span>
                <span>⭐ Score: <span id="totalScore">0</span></span>
                <span>⏱️ Time: <span id="timeSpent">0:00</span></span>
            </div>
        </div>

        <!-- Introduction Module -->
        <div class="module active" id="intro">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">🌟</span>
                    Welcome to "Kathmandu"
                </h2>
                <div class="content-block">
                    <p>This story takes us on a journey to the vibrant city of Kathmandu, Nepal. Written by Vikram Seth, it is an excerpt from his travelogue "Heaven Lake," which describes his journey from China to India through Tibet and Nepal.</p>
                    <p>In this interactive lesson, we'll explore Vikram Seth's observations of the sacred temples, busy streets, and cultural richness of Kathmandu, including his reflections on the universal appeal of flute music across different cultures.</p>
                </div>
                <div class="button-container">
                    <button class="interactive-btn" onclick="startJourney()" aria-label="Begin the lesson">
                        🚀 Start Your Learning Journey
                    </button>
                </div>
            </div>
        </div>

        <!-- Let's Begin Module -->
        <div class="module" id="prereading">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">📝</span>
                    Let's Begin
                </h2>
                <div class="content-block">
                    <p>Vikram Seth enjoys traveling very much. In his book, Heaven Lake, he describes a long journey from China to India, via Tibet and Nepal.</p>
                    <p>Before we dive into Seth's experiences in Kathmandu, let's think about places of worship and their surroundings.</p>
                </div>
                
                <h3 class="activity-title">Pre-Reading Activity: Sacred Places</h3>
                <div class="content-block">
                    <p>Have you heard of places like Ajmer Sharif, Madurai, Sanchi, Varanasi, Sarnath, or Halebid? Can you name some other places like these?</p>
                    <p>What do the surroundings of a holy place in your city look like? Think about these questions as we read Vikram Seth's description of Kathmandu.</p>
                </div>
                
                <div class="reflection-exercise">
                    <textarea id="reflectionText" rows="5" placeholder="Write your reflection here..."></textarea>
                    <button class="interactive-btn" onclick="saveReflection()">
                        Save Reflection
                    </button>
                    <div id="reflectionFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>
        </div>

        <!-- Story Module -->
        <div class="module" id="story">
            <div class="story-reader">
                <h2 class="section-title">KATHMANDU</h2>
                
                <div class="story-controls">
                    <button class="reading-mode-btn" onclick="toggleReadAloud()" aria-label="Read the text aloud">
                        🔊 Read Aloud
                    </button>
                    <button class="reading-mode-btn" onclick="highlightVocabulary()" aria-label="Highlight vocabulary words">
                        ✨ Highlight Vocabulary
                    </button>
                    <button class="reading-mode-btn" onclick="togglePrintMode()" aria-label="Toggle print-friendly mode">
                        🖨️ Print Mode
                    </button>
                </div>
                
                <div class="story-content" id="storyContent">
                    <!-- Story content will be loaded dynamically via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Poem Module -->
        <div class="module" id="poem">
            <div class="story-reader">
                <h2 class="section-title">A SLUMBER DID MY SPIRIT SEAL</h2>
                
                <div class="story-controls">
                    <button class="reading-mode-btn" onclick="readPoemAloud()" aria-label="Read the poem aloud">
                        🔊 Read Aloud
                    </button>
                    <button class="reading-mode-btn" onclick="highlightPoemVocabulary()" aria-label="Highlight vocabulary words">
                        ✨ Highlight Vocabulary
                    </button>
                    <button class="reading-mode-btn" onclick="togglePrintMode()" aria-label="Toggle print-friendly mode">
                        🖨️ Print Mode
                    </button>
                </div>
                
                <div class="poem-content" id="poemContent">
                    <!-- Poem content will be loaded dynamically via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Reading Comprehension Module -->
        <div class="module" id="thinking-text">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">❓</span>
                    Reading Comprehension Questions
                </h2>
                
                <div class="story-navigation">
                    <button class="story-nav-btn active" onclick="showQuestionSet('story-questions')" aria-pressed="true">Story Questions</button>
                    <button class="story-nav-btn" onclick="showQuestionSet('poem-questions')" aria-pressed="false">Poem Questions</button>
                </div>
                
                <div id="textQuestions" class="question-section">
                    <!-- Questions will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Vocabulary & Grammar Module -->
        <div class="module" id="thinking-language">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">🔍</span>
                    Phrasal Verbs
                </h2>
                <div class="content-block">
                    <p>Read this sentence taken from the story:</p>
                    <blockquote>A fight breaks out between two monkeys. One chases the other, who jumps onto a shivalinga, then runs screaming around the temples and down to the river.</blockquote>
                    <p>The phrase <strong>breaks out</strong> is a phrasal verb. These are verbs that combine with prepositions or adverbs to create new meanings.</p>
                </div>
                
                <div class="vocabulary-exercise">
                    <h3>Match the phrasal verbs in Column A with their meanings in Column B:</h3>
                    <div class="vocab-question">
                        <p>1. break out <select id="vocab1">
                            <option value="">Select</option>
                            <option value="a">to come apart due to force</option>
                            <option value="b">end a relationship</option>
                            <option value="c">break and enter illegally</option>
                            <option value="d">to start suddenly (a fight, war, or disease)</option>
                            <option value="e">to escape from someone's grip</option>
                            <option value="f">stop working</option>
                        </select></p>
                    </div>
                    <div class="vocab-question">
                        <p>2. break off <select id="vocab2">
                            <option value="">Select</option>
                            <option value="a">to come apart due to force</option>
                            <option value="b">end a relationship</option>
                            <option value="c">break and enter illegally</option>
                            <option value="d">to start suddenly (a fight, war, or disease)</option>
                            <option value="e">to escape from someone's grip</option>
                            <option value="f">stop working</option>
                        </select></p>
                    </div>
                    <div class="vocab-question">
                        <p>3. break down <select id="vocab3">
                            <option value="">Select</option>
                            <option value="a">to come apart due to force</option>
                            <option value="b">end a relationship</option>
                            <option value="c">break and enter illegally</option>
                            <option value="d">to start suddenly (a fight, war, or disease)</option>
                            <option value="e">to escape from someone's grip</option>
                            <option value="f">stop working</option>
                        </select></p>
                    </div>
                    <div class="vocab-question">
                        <p>4. break away (from someone) <select id="vocab4">
                            <option value="">Select</option>
                            <option value="a">to come apart due to force</option>
                            <option value="b">end a relationship</option>
                            <option value="c">break and enter illegally</option>
                            <option value="d">to start suddenly (a fight, war, or disease)</option>
                            <option value="e">to escape from someone's grip</option>
                            <option value="f">stop working</option>
                        </select></p>
                    </div>
                    <div class="vocab-question">
                        <p>5. break up <select id="vocab5">
                            <option value="">Select</option>
                            <option value="a">to come apart due to force</option>
                            <option value="b">end a relationship</option>
                            <option value="c">break and enter illegally</option>
                            <option value="d">to start suddenly (a fight, war, or disease)</option>
                            <option value="e">to escape from someone's grip</option>
                            <option value="f">stop working</option>
                        </select></p>
                    </div>
                    <div class="vocab-question">
                        <p>6. break into <select id="vocab6">
                            <option value="">Select</option>
                            <option value="a">to come apart due to force</option>
                            <option value="b">end a relationship</option>
                            <option value="c">break and enter illegally</option>
                            <option value="d">to start suddenly (a fight, war, or disease)</option>
                            <option value="e">to escape from someone's grip</option>
                            <option value="f">stop working</option>
                        </select></p>
                    </div>
                    <button class="interactive-btn" onclick="checkVocabulary()">Check Answers</button>
                    <div id="vocabFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>

            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">📚</span>
                    Simple Present Tense
                </h2>
                <div class="content-block">
                    <p>Look at these sentences from the story:</p>
                    <ul>
                        <li>A fight breaks out between two monkeys.</li>
                        <li>Film songs blare out from the radios.</li>
                        <li>I wash it down with Coca-Cola.</li>
                    </ul>
                    <p>The italicized verbs are in the simple present tense. The writer is describing what he saw and heard but uses the present tense instead of the past tense to make the narration more dramatic or immediate.</p>
                </div>
                
                <div class="matching-game">
                    <h3>Fill in the blanks with the correct form of the verb in brackets.</h3>
                    
                    <div class="contraction-item">
                        <p>1. The heart is a pump that <input type="text" class="contraction-input" data-answer="sends"> (send) the blood circulating through our body.</p>
                    </div>
                    <div class="contraction-item">
                        <p>2. The pumping action <input type="text" class="contraction-input" data-answer="takes place"> (take place) when the left ventricle of the heart <input type="text" class="contraction-input" data-answer="contracts"> (contract).</p>
                    </div>
                    <div class="contraction-item">
                        <p>3. This <input type="text" class="contraction-input" data-answer="forces"> (force) the blood out into the arteries, which <input type="text" class="contraction-input" data-answer="expand"> (expand) to receive the oncoming blood.</p>
                    </div>
                    <div class="contraction-item">
                        <p>4. MAHESH: We have to organize a class party for our teacher. <input type="text" class="contraction-input" data-answer="Does"> (Do) anyone play an instrument?</p>
                    </div>
                    <div class="contraction-item">
                        <p>5. VIPUL: Rohit <input type="text" class="contraction-input" data-answer="plays"> (play) the flute.</p>
                    </div>
                    
                    <button class="interactive-btn" onclick="checkConditionals()">Check Answers</button>
                    <div id="conditionalssFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Interactive English Lesson - Kathmandu</p>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/kathmandu-story.js"></script>
    <script src="js/questions.js"></script>
    <script src="js/activities.js"></script>
</body>
</html>
