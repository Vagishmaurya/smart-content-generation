<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Snake and the Mirror - Interactive English Lesson</title>
    <link rel="stylesheet" href="css/styles.css">
    <meta name="description" content="Interactive English lesson based on 'The Snake and the Mirror' by Vaikom Muhammad Basheer">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-menu" role="navigation" aria-label="Main navigation">
        <div class="nav-items">
            <button class="nav-item active" onclick="showModule('intro')" aria-pressed="true">📚 Introduction</button>
            <button class="nav-item" onclick="showModule('prereading')" aria-pressed="false">📝 Let's Begin</button>
            <button class="nav-item" onclick="showModule('story')" aria-pressed="false">📖 The Story</button>
            <button class="nav-item" onclick="showModule('poem')" aria-pressed="false">🎭 The Poem</button>
            <button class="nav-item" onclick="showModule('thinking-text')" aria-pressed="false">❓ Reading Comprehension</button>
            <button class="nav-item" onclick="showModule('thinking-language')" aria-pressed="false">🔤 Vocabulary & Grammar</button>
        </div>
    </nav>

    <!-- Audio Control -->
    <div class="audio-control">
        <button id="audioBtn" class="audio-btn" onclick="toggleAudio()" aria-label="Toggle audio narration">🔊</button>
    </div>

    <!-- Achievement Popup -->
    <div id="achievementPopup" class="achievement-popup" aria-live="polite">
        <div class="achievement-title">🏆 Achievement Unlocked!</div>
        <div class="achievement-desc" id="achievementDesc">You've completed a module!</div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">📚 The Snake and the Mirror</h1>
            <p class="subtitle">Beehive - Class IX</p>
            <p class="reprint">Reprint 2025-26</p>
        </header>

        <!-- Progress Tracker -->
        <div class="progress-container">
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            <div class="progress-stats">
                <span>📖 Modules: <span id="modulesComplete">0</span>/6</span>
                <span>⭐ Score: <span id="totalScore">0</span></span>
                <span>⏱️ Time: <span id="timeSpent">0:00</span></span>
            </div>
        </div>

        <!-- Introduction Module -->
        <div class="module active" id="intro">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">🌟</span>
                    Welcome to "The Snake and the Mirror"
                </h2>
                <div class="content-block">
                    <p>This story is a humorous account of a strange incident in a doctor's life. The narrator, a homeopath, tells us about his encounter with a snake. Through this narrative, the author addresses themes of fear, vanity, and self-reflection.</p>
                    <p>In this interactive lesson, we'll explore Vaikom Muhammad Basheer's humorous storytelling through the eyes of a young doctor who experiences a life-changing encounter with a snake. The story provides insights into human nature and our reactions when faced with danger.</p>
                </div>
                <div class="button-container">
                    <button class="interactive-btn" onclick="startJourney()" aria-label="Begin the lesson">
                        🚀 Start Your Learning Journey
                    </button>
                </div>
            </div>
        </div>

        <!-- Let's Begin Module -->
        <div class="module" id="prereading">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">📝</span>
                    Let's Begin
                </h2>
                <div class="content-block">
                    <p>Do you like to look at yourself in the mirror? What do you think about at such times? Have you ever seen a dog, a cat or a bird look into a mirror? What do you think it sees?</p>
                    <p>Now read this humorous story about a doctor, a snake, and a mirror.</p>
                </div>
                
                <h3 class="activity-title">Pre-Reading Activity: Mirror Reflections</h3>
                <div class="content-block">
                    <p>Think about how you see yourself when you look in a mirror. What thoughts come to your mind? How would animals perceive their reflection in a mirror?</p>
                    <p>Consider how mirrors can sometimes show us more than just our physical appearance. How might a mirror become a tool for self-reflection?</p>
                </div>
                
                <div class="reflection-exercise">
                    <textarea id="reflectionText" rows="5" placeholder="Write your reflection here..."></textarea>
                    <button class="interactive-btn" onclick="saveReflection()">
                        Save Reflection
                    </button>
                    <div id="reflectionFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>
        </div>

        <!-- Story Module -->
        <div class="module" id="story">
            <div class="story-reader">
                <h2 class="section-title">THE SNAKE AND THE MIRROR</h2>
                
                <div class="story-controls">
                    <button class="reading-mode-btn" onclick="toggleReadAloud()" aria-label="Read the text aloud">
                        🔊 Read Aloud
                    </button>
                    <button class="reading-mode-btn" onclick="highlightVocabulary()" aria-label="Highlight vocabulary words">
                        ✨ Highlight Vocabulary
                    </button>
                    <button class="reading-mode-btn" onclick="togglePrintMode()" aria-label="Toggle print-friendly mode">
                        🖨️ Print Mode
                    </button>
                </div>
                
                <div class="story-content" id="storyContent">
                    <!-- Story content will be loaded dynamically via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Poem Module -->
        <div class="module" id="poem">
            <div class="story-reader">
                <h2 class="section-title">A LEGEND OF THE NORTHLAND</h2>
                
                <div class="story-controls">
                    <button class="reading-mode-btn" onclick="readPoemAloud()" aria-label="Read the poem aloud">
                        🔊 Read Aloud
                    </button>
                    <button class="reading-mode-btn" onclick="highlightPoemVocabulary()" aria-label="Highlight vocabulary words">
                        ✨ Highlight Vocabulary
                    </button>
                    <button class="reading-mode-btn" onclick="togglePrintMode()" aria-label="Toggle print-friendly mode">
                        🖨️ Print Mode
                    </button>
                </div>
                
                <div class="poem-content" id="poemContent">
                    <!-- Poem content will be loaded dynamically via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Reading Comprehension Module -->
        <div class="module" id="thinking-text">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">❓</span>
                    Reading Comprehension Questions
                </h2>
                
                <div class="story-navigation">
                    <button class="story-nav-btn active" onclick="showQuestionSet('story-questions')" aria-pressed="true">Story Questions</button>
                    <button class="story-nav-btn" onclick="showQuestionSet('poem-questions')" aria-pressed="false">Poem Questions</button>
                </div>
                
                <div id="textQuestions" class="question-section">
                    <!-- Questions will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Vocabulary & Grammar Module -->
        <div class="module" id="thinking-language">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">🔍</span>
                    Expressions used to show fear
                </h2>
                <div class="content-block">
                    <p>Read these sentences from the story:</p>
                    <blockquote>I was turned to stone.</blockquote>
                    <p>When people are frightened, they use various expressions to show their fear. Let's explore some of these expressions.</p>
                </div>
                
                <div class="vocabulary-exercise">
                    <h3>Find the expressions in the story that tell you that the author was frightened. Complete the following sentences:</h3>
                    <div class="vocab-question">
                        <p>1. I was turned <select id="vocab1">
                            <option value="">Select</option>
                            <option value="to stone">to stone</option>
                            <option value="around">around</option>
                            <option value="pale">pale</option>
                            <option value="into water">into water</option>
                        </select>.</p>
                    </div>
                    <div class="vocab-question">
                        <p>2. I sat there holding <select id="vocab2">
                            <option value="">Select</option>
                            <option value="my breath">my breath</option>
                            <option value="my chest">my chest</option>
                            <option value="the chair">the chair</option>
                            <option value="my head">my head</option>
                        </select>.</p>
                    </div>
                    <div class="vocab-question">
                        <p>3. In the light of the lamp I sat there like <select id="vocab3">
                            <option value="">Select</option>
                            <option value="a statue">a statue</option>
                            <option value="a stone image in the flesh">a stone image in the flesh</option>
                            <option value="a frightened animal">a frightened animal</option>
                            <option value="a dead man">a dead man</option>
                        </select>.</p>
                    </div>
                    <button class="interactive-btn" onclick="checkVocabulary()">Check Answers</button>
                    <div id="vocabFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>

            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">📚</span>
                    Reported Questions
                </h2>
                <div class="content-block">
                    <p>Study these sentences from the story:</p>
                    <blockquote>His friend asked, "Did you see the snake the next day, doctor?"<br>
                    His friend asked the doctor whether/if he had seen the snake the next day.</blockquote>
                    <p>The words if/whether are used to report questions which begin with: do, will, can, have, are etc. These questions can be answered 'yes' or 'no'.</p>
                </div>
                
                <div class="matching-game">
                    <h3>Report these questions using if/whether or why/when/where/how/which/what. Remember the italicised verbs change into the past tense.</h3>
                    
                    <div class="contraction-item">
                        <p>1. Meena asked her friend, "Do you think your teacher will come today?"<br>
                        Meena asked her friend <input type="text" class="contraction-input" data-answer="if/whether she thought her teacher would come that day"></p>
                    </div>
                    <div class="contraction-item">
                        <p>2. David asked his colleague, "Where will you go this summer?"<br>
                        David asked his colleague <input type="text" class="contraction-input" data-answer="where he would go that summer"></p>
                    </div>
                    <div class="contraction-item">
                        <p>3. He asked the little boy, "Why are you studying English?"<br>
                        He asked the little boy <input type="text" class="contraction-input" data-answer="why he was studying English"></p>
                    </div>
                    <div class="contraction-item">
                        <p>4. She asked me, "When are we going to leave?"<br>
                        She asked me <input type="text" class="contraction-input" data-answer="when we were going to leave"></p>
                    </div>
                    <div class="contraction-item">
                        <p>5. Pran asked me, "Have you finished reading the newspaper?"<br>
                        Pran asked me <input type="text" class="contraction-input" data-answer="if/whether I had finished reading the newspaper"></p>
                    </div>
                    
                    <button class="interactive-btn" onclick="checkConditionals()">Check Answers</button>
                    <div id="conditionalssFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Interactive English Lesson - The Snake and the Mirror</p>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/the-snake-and-the-mirror-story.js"></script>
    <script src="js/questions.js"></script>
    <script src="js/activities.js"></script>
</body>
</html>
