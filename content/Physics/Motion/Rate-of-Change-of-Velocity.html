<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rate of Change of Velocity - Acceleration - Physics in Motion</title>
    <!-- GSAP for animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Audio Control */
        #audio-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .control-btn {
            background: rgba(239, 68, 68, 0.9);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            transform: scale(1.1);
            background: rgba(239, 68, 68, 1);
        }

        .control-btn.muted .unmute-icon { display: none; }
        .control-btn:not(.muted) .mute-icon { display: none; }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            background: linear-gradient(45deg, #ef4444, #f97316, #eab308);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Demo Stage */
        .demo-stage {
            background: linear-gradient(to bottom, #1e293b, #334155, #475569);
            border-radius: 25px;
            min-height: 500px;
            position: relative;
            margin: 40px 0;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            border: 3px solid rgba(239, 68, 68, 0.4);
            padding: 40px;
        }

        /* Acceleration Introduction Demo */
        .acceleration-intro-demo {
            display: none;
            position: relative;
            width: 100%;
            height: 500px;
        }

        .acceleration-intro-demo.active {
            display: block;
        }

        .motion-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: 100%;
        }

        .motion-type {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid rgba(239, 68, 68, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .motion-title {
            color: #ef4444;
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .motion-track {
            width: 100%;
            height: 80px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
        }

        .motion-object {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 10px;
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
        }

        .velocity-display {
            background: rgba(239, 68, 68, 0.2);
            padding: 15px 25px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: bold;
            color: #fca5a5;
            margin: 15px 0;
            border: 2px solid rgba(239, 68, 68, 0.4);
            font-family: 'Courier New', monospace;
        }

        .motion-description {
            line-height: 1.6;
            color: #e2e8f0;
            font-size: 1.1rem;
        }

        /* Acceleration Formula Demo */
        .acceleration-formula-demo {
            display: none;
            position: relative;
            width: 100%;
            height: 500px;
        }

        .acceleration-formula-demo.active {
            display: block;
        }

        .formula-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 100%;
        }

        .formula-section {
            background: rgba(15, 23, 42, 0.9);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid rgba(251, 191, 36, 0.4);
            text-align: center;
            min-width: 350px;
        }

        .formula-title {
            color: #fbbf24;
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .formula {
            font-family: 'Courier New', monospace;
            font-size: 2.5rem;
            color: #fbbf24;
            margin: 20px 0;
            padding: 20px;
            background: rgba(251, 191, 36, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .formula-explanation {
            color: #e2e8f0;
            line-height: 1.6;
            margin-top: 15px;
            font-size: 1.1rem;
        }

        .interactive-calculator {
            background: rgba(15, 23, 42, 0.9);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid rgba(239, 68, 68, 0.4);
            min-width: 350px;
        }

        .calc-title {
            color: #ef4444;
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: 600;
            text-align: center;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-label {
            display: block;
            color: #fca5a5;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(239, 68, 68, 0.4);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.1rem;
            text-align: center;
        }

        .calc-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 15px 0;
        }

        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }

        .result-display {
            background: rgba(16, 185, 129, 0.2);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid rgba(16, 185, 129, 0.4);
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: #10b981;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Acceleration Types Demo */
        .acceleration-types-demo {
            display: none;
            position: relative;
            width: 100%;
            height: 500px;
        }

        .acceleration-types-demo.active {
            display: block;
        }

        /* Info Panel */
        .acc-info-overlay {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(8px);
            border: 2px solid rgba(239, 68, 68, 0.4);
        }
        
        .acc-info-title {
            color: #ef4444;
            font-size: 1.3rem;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .acc-info-text {
            color: #e2e8f0;
            line-height: 1.5;
            font-size: 1rem;
        }
        
        /* Type Selection Buttons */
        .acc-type-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .acc-type-btn {
            background: linear-gradient(135deg, #334155, #1e293b);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .acc-type-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3);
        }
        
        .acc-type-btn.active {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }
        
        /* Animation Stage */
        .acc-animation-stage {
            position: relative;
            height: 350px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid rgba(239, 68, 68, 0.3);
        }
        
        /* Demo Containers */
        .acc-demo-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }
        
        .acc-demo-container.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        /* Track for Objects */
        .acc-track {
            position: relative;
            height: 100px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .acc-object {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 20px;
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
        }
        
        /* Vectors */
        .acc-velocity-vector, .acc-force-vector {
            position: absolute;
            height: 3px;
            background: #f39c12;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: opacity 0.3s ease, width 0.5s ease;
        }
        
        .acc-velocity-vector::after, .acc-force-vector::after {
            content: '';
            position: absolute;
            right: -8px;
            top: -4px;
            border-left: 10px solid #f39c12;
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
        }
        
        .acc-force-vector {
            background: #e74c3c;
        }
        
        .acc-force-vector::after {
            border-left-color: #e74c3c;
        }
        
        /* Graph Container */
        .acc-graph-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            height: 150px;
        }
        
        .acc-graph {
            width: 100%;
            max-width: 400px;
            height: 100%;
            position: relative;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .acc-graph-title {
            position: absolute;
            top: -20px;
            left: 50%;
            z-index: 100;
            transform: translateX(-50%);
            font-size: 0.9rem;
            color: #f39c12;
            font-weight: bold;
        }
        
        /* X and Y axes */
        .acc-graph::before, .acc-graph::after {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.5);
        }
        
        /* X axis */
        .acc-graph::before {
            height: 2px;
            bottom: 30px;
            left: 40px;
            right: 10px;
        }
        
        /* Y axis */
        .acc-graph::after {
            width: 2px;
            bottom: 30px;
            left: 40px;
            top: 10px;
        }
        
        .acc-graph-line {
            position: absolute;
            height: 2px;
            background: #10b981;
            bottom: 30px;
            left: 40px;
            right: 10px;
            transform: rotate(-9deg);
            transform-origin: left bottom;
            z-index: 2;
        }
        
        .acc-graph-curved-line {
            position: absolute;
            height: 80px;
            width: calc(100% - 50px);
            bottom: 30px;
            left: 40px;
            background: transparent;
            z-index: 2;
        }
        
        /* Custom curved path for non-uniform acceleration */
        .acc-graph-curved-line::after {
            content: none;
        }
        .acc-graph-curved-line svg {
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
        }
        .acc-graph-curved-line path {
            stroke: #e74c3c;
            stroke-width: 2px;
            fill: none;
        }
        
        .acc-graph-axis-x {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #e2e8f0;
        }
        
        .acc-graph-axis-y {
            position: absolute;
            top: 50%;
            left: 0px;
            transform: translateY(-50%) rotate(-90deg);
            font-size: 0.7rem;
            color: #e2e8f0;
        }
        
        /* Axis ticks */
        .acc-graph-x-ticks, .acc-graph-y-ticks {
            position: absolute;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.7rem;
        }
        
        .acc-graph-x-ticks {
            bottom: 15px;
            left: 40px;
            right: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .acc-graph-y-ticks {
            bottom: 30px;
            left: 15px;
            top: 10px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: flex-end;
        }
        
        .acc-graph-point {
            width: 8px;
            height: 8px;
            background: #f39c12;
            border-radius: 50%;
            position: absolute;
            bottom: 30px;
            left: 40px;
        }
        
        /* Data Panel */
        .acc-data-panel {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }
        
        .acc-data-item {
            flex: 1;
            text-align: center;
        }
        
        .acc-data-label {
            display: block;
            color: #e2e8f0;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .acc-data-value {
            display: block;
            color: #f39c12;
            font-size: 1.1rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        /* Example Demo */
        .example-demo {
            display: none;
            padding: 15px 10px;
            overflow-x: hidden;
        }

        .example-demo.active {
            display: block;
        }

        .example-container {
            display: flex;
            justify-content: center;
            padding: 10px 0;
        }

        .example-card {
            background: rgba(15, 23, 42, 0.9);
            padding: 20px 15px;
            border-radius: 15px;
            border: 2px solid rgba(239, 68, 68, 0.3);
            width: 98%;
            max-width: 100%;
            margin: 0 auto;
        }

        .example-title {
            color: #ef4444;
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: 700;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.05));
            padding: 10px;
            border-radius: 10px;
        }

        .example-problem {
            background: rgba(239, 68, 68, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px auto;
            border-left: 4px solid #ef4444;
            line-height: 1.6;
            font-size: 1rem;
            max-width: 95%;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }

        .solution-sections-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .solution-section {
            margin-bottom: 0;
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 15px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .solution-section:last-child {
            border-bottom: 1px solid rgba(239, 68, 68, 0.3);
        }

        .case-title {
            color: #fbbf24;
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 600;
            text-align: center;
            background: rgba(251, 191, 36, 0.1);
            padding: 8px;
            border-radius: 10px;
            border-left: 4px solid #fbbf24;
        }

        .solution-steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 100%;
            margin: 0 auto;
        }

        .solution-step {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 10px;
            opacity: 1;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(251, 191, 36, 0.3);
            display: flex;
            flex-direction: column;
        }

        .solution-step.show {
            opacity: 1;
        }

        .step-label {
            color: #fbbf24;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .step-calculation {
            font-family: 'Courier New', monospace;
            color: #10b981;
            font-size: 1.2rem;
            margin: 8px 0;
            text-align: center;
            background: rgba(16, 185, 129, 0.1);
            padding: 8px;
            border-radius: 6px;
        }

        .final-answer {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(251, 191, 36, 0.3));
            padding: 12px;
            border-radius: 10px;
            margin-top: 15px;
            text-align: center;
            font-weight: bold;
            color: #fbbf24;
            border: 2px solid rgba(251, 191, 36, 0.4);
            font-size: 1.2rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        /* Activity Demo */
        .activity-demo {
            display: none;
            padding: 30px;
        }

        .activity-demo.active {
            display: block;
        }

        .activity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .activity-card {
            background: rgba(239, 68, 68, 0.1);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid rgba(239, 68, 68, 0.3);
            transition: all 0.3s ease;
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(239, 68, 68, 0.3);
        }

        .activity-title {
            color: #ef4444;
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .activity-type {
            background: rgba(251, 191, 36, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #fbbf24;
        }

        .activity-type-title {
            color: #fbbf24;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .activity-example {
            color: #e2e8f0;
            line-height: 1.6;
            font-style: italic;
        }

        /* Questions Demo */
        .questions-demo {
            display: none;
            padding: 30px;
        }

        .questions-demo.active {
            display: block;
        }
        
        /* Questions Carousel */
        .questions-carousel {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            overflow: hidden;
        }
        
        .questions-container {
            display: flex;
            transition: transform 0.5s ease;
            min-height: 400px;
        }
        
        .question-slide {
            flex: 0 0 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
            position: absolute;
            width: 100%;
            left: 0;
            top: 0;
        }
        
        .question-slide.active {
            opacity: 1;
            visibility: visible;
            position: relative;
        }
        
        .carousel-nav {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 15px;
        }
        
        .carousel-btn {
            background: linear-gradient(135deg, #334155, #1e293b);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .carousel-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3);
        }
        
        .carousel-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .carousel-indicator {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            gap: 10px;
        }
        
        .indicator-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(239, 68, 68, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .indicator-dot.active {
            background: #ef4444;
            transform: scale(1.2);
        }

        .question-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin: 10px 0;
            border-left: 4px solid #ef4444;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .question-number {
            color: #ef4444;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 15px;
            color: #e2e8f0;
        }

        .answer-section {
            background: rgba(239, 68, 68, 0.1);
            padding: 15px;
            margin-top: 5px;
            border-radius: 10px;
            border: 1px solid rgba(239, 68, 68, 0.3);
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.5s ease;
        }

        .answer-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .show-answer-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .show-answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }

        /* Visual Motion Demo */
        .visual-motion-demo {
            display: none;
            position: relative;
            width: 100%;
            height: 500px;
        }

        .visual-motion-demo.active {
            display: block;
        }

        .motion-scenarios {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: 100%;
        }

        .scenario-card {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid rgba(239, 68, 68, 0.3);
        }

        .scenario-title {
            color: #ef4444;
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: 600;
            text-align: center;
        }

        .motion-visualization {
            width: 100%;
            height: 200px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
        }

        .moving-object {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 10px;
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
        }

        .velocity-graph {
            width: 100%;
            height: 100px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            position: relative;
            margin-top: 15px;
            overflow: hidden;
        }

        .graph-line {
            position: absolute;
            height: 3px;
            background: #10b981;
            top: 50%;
            left: 10px;
            width: 0%;
            transform: translateY(-50%);
            transition: width 0.1s linear;
        }

        /* SVG graphs for visual motion demo */
        .velocity-graph svg {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
        }
        .velocity-graph .graph-path {
            fill: none;
            stroke-width: 3px;
        }
        
        .velocity-graph .axis-label {
            fill: #e2e8f0;
            font-size: 12px;
            font-weight: 500;
            text-anchor: middle;
        }
        
        .velocity-graph .y-axis-label {
            text-anchor: middle;
            transform: rotate(-90deg);
            transform-origin: center;
        }

        .scenario-info {
            text-align: center;
            color: #e2e8f0;
            margin-top: 15px;
            line-height: 1.6;
        }

        /* Controls */
        .controls {
            text-align: center;
            margin: 40px 0;
        }

        .controls-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #ef4444;
            font-weight: 600;
        }

        .demo-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 25px 0;
        }

        .demo-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: none;
            color: white;
            padding: 14px 24px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
            min-width: 150px;
        }

        .demo-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(239, 68, 68, 0.4);
        }

        .demo-btn.active {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        /* Theory Section */
        .theory-section {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 25px;
            padding: 35px;
            margin: 35px 0;
            border: 3px solid rgba(239, 68, 68, 0.4);
            backdrop-filter: blur(15px);
        }

        .concept-box {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(248, 113, 113, 0.2));
            padding: 25px;
            border-radius: 20px;
            margin: 20px 0;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .concept-box-title {
            font-size: 1.5rem;
            color: #ef4444;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .concept-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #e2e8f0;
        }

        .formula-highlight {
            background: rgba(251, 191, 36, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            border: 2px solid rgba(251, 191, 36, 0.3);
        }

        .main-formula {
            font-size: 2rem;
            color: #fbbf24;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            text-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 { font-size: 2.2rem; }
            .demo-stage { padding: 30px 20px; min-height: 400px; }
            .demo-buttons { flex-direction: column; align-items: center; }
            .motion-comparison { grid-template-columns: 1fr; }
            .formula-container { flex-direction: column; gap: 20px; }
            .motion-scenarios { grid-template-columns: 1fr; }
            .types-grid { grid-template-columns: 1fr; grid-template-rows: repeat(4, 1fr); }
            .activity-grid { grid-template-columns: 1fr; }
            .solution-sections-container { grid-template-columns: 1fr; }
        }

        @media (max-width: 480px) {
            .container { padding: 20px 15px; }
            .header h1 { font-size: 1.8rem; }
            .demo-stage { padding: 20px 15px; }
            .theory-section { padding: 20px; }
            .main-formula { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <!-- Audio Control -->
    <div id="audio-control">
        <button id="mute-btn" class="control-btn">
            <span class="unmute-icon">🔊</span>
            <span class="mute-icon">🔇</span>
        </button>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Rate of Change of Velocity</h1>
            <p>Discover acceleration - how velocity changes with time, understand uniform and non-uniform acceleration, and learn to calculate acceleration in various scenarios!</p>
        </div>

        <!-- Demo Stage -->
        <div class="demo-stage" id="stage">
            <!-- Acceleration Introduction Demo -->
            <div class="acceleration-intro-demo" id="acceleration-intro-demo">
                <div class="motion-comparison">
                    <div class="motion-type">
                        <div class="motion-title">Uniform Motion</div>
                        <div class="motion-track">
                            <div class="motion-object" id="uniform-object"></div>
                        </div>
                        <div class="velocity-display" id="uniform-velocity">v = 5 m/s (constant)</div>
                        <div class="motion-description">
                            Velocity remains constant with time. The change in velocity for any time interval is zero.
                            <br><br><strong>Acceleration = 0 m/s²</strong>
                        </div>
                    </div>

                    <div class="motion-type">
                        <div class="motion-title">Non-Uniform Motion</div>
                        <div class="motion-track">
                            <div class="motion-object" id="non-uniform-object"></div>
                        </div>
                        <div class="velocity-display" id="non-uniform-velocity">v = 2 → 8 m/s</div>
                        <div class="motion-description">
                            Velocity varies with time. It has different values at different instants and points.
                            <br><br><strong>Acceleration ≠ 0 m/s²</strong>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Acceleration Formula Demo -->
            <div class="acceleration-formula-demo" id="acceleration-formula-demo">
                <div class="formula-container">
                    <div class="formula-section">
                        <div class="formula-title">Acceleration Formula</div>
                        <div class="formula">a = (v - u)/t</div>
                        <div class="formula-explanation">
                            <strong>Where:</strong><br>
                            a = acceleration (m/s²)<br>
                            v = final velocity (m/s)<br>
                            u = initial velocity (m/s)<br>
                            t = time taken (s)<br><br>
                            <strong>Acceleration = Change in velocity ÷ Time</strong>
                        </div>
                    </div>

                    <div class="interactive-calculator">
                        <div class="calc-title">Acceleration Calculator</div>
                        <div class="input-group">
                            <label class="input-label">Initial Velocity (m/s):</label>
                            <input type="number" class="input-field" id="initial-velocity" placeholder="Enter u">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Final Velocity (m/s):</label>
                            <input type="number" class="input-field" id="final-velocity" placeholder="Enter v">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Time (seconds):</label>
                            <input type="number" class="input-field" id="time-input" placeholder="Enter t">
                        </div>
                        <button class="calc-btn" onclick="calculateAcceleration()">Calculate Acceleration</button>
                        <div class="result-display" id="acceleration-result">
                            Enter values to calculate acceleration
                        </div>
                    </div>
                </div>
            </div>

            <!-- Acceleration Types Demo -->
            <div class="acceleration-types-demo" id="acceleration-types-demo">
            <!-- Info Panel -->
            <div class="acc-info-overlay" id="acc-info-overlay">
                <div class="acc-info-title" id="acc-type-title">Select a type of acceleration</div>
                <div class="acc-info-text" id="acc-info-text">Use the buttons below to explore different types of acceleration</div>
                        </div>
            
            <!-- Type Selection Buttons -->
            <div class="acc-type-buttons">
                <button class="acc-type-btn" id="positive-acc-btn" onclick="accTypeTab('positive')">Positive Acceleration</button>
                <button class="acc-type-btn" id="negative-acc-btn" onclick="accTypeTab('negative')">Negative Acceleration</button>
                <button class="acc-type-btn" id="uniform-acc-btn" onclick="accTypeTab('uniform')">Uniform Acceleration</button>
                <button class="acc-type-btn" id="non-uniform-acc-btn" onclick="accTypeTab('nonuniform')">Non-Uniform Acceleration</button>
            </div>
            
            <!-- Animation Stage -->
            <div class="acc-animation-stage">
                <!-- Positive Acceleration Demo -->
                <div class="acc-demo-container" id="positive-acc-demo">
                    <div class="acc-track">
                        <div class="acc-object" id="positive-acc-object"></div>
                        <div class="acc-velocity-vector" id="positive-velocity-vector"></div>
                    </div>
                    <div class="acc-data-panel">
                        <div class="acc-data-item">
                            <span class="acc-data-label">Velocity:</span>
                            <span class="acc-data-value" id="positive-velocity">0 m/s</span>
                        </div>
                        <div class="acc-data-item">
                            <span class="acc-data-label">Acceleration:</span>
                            <span class="acc-data-value" id="positive-acceleration">+2 m/s²</span>
                        </div>
                        <div class="acc-data-item">
                            <span class="acc-data-label">Direction:</span>
                            <span class="acc-data-value">Same as motion</span>
                        </div>
                        </div>
                    </div>

                <!-- Negative Acceleration Demo -->
                <div class="acc-demo-container" id="negative-acc-demo">
                    <div class="acc-track">
                        <div class="acc-object" id="negative-acc-object"></div>
                        <div class="acc-velocity-vector" id="negative-velocity-vector"></div>
                        <div class="acc-force-vector" id="negative-force-vector"></div>
                        </div>
                    <div class="acc-data-panel">
                        <div class="acc-data-item">
                            <span class="acc-data-label">Velocity:</span>
                            <span class="acc-data-value" id="negative-velocity">10 m/s</span>
                        </div>
                        <div class="acc-data-item">
                            <span class="acc-data-label">Acceleration:</span>
                            <span class="acc-data-value" id="negative-acceleration">-2 m/s²</span>
                        </div>
                        <div class="acc-data-item">
                            <span class="acc-data-label">Direction:</span>
                            <span class="acc-data-value">Opposite to motion</span>
                        </div>
                        </div>
                    </div>

                <!-- Uniform Acceleration Demo -->
                <div class="acc-demo-container" id="uniform-acc-demo">
                    <div class="acc-track">
                        <div class="acc-object" id="uniform-acc-object"></div>
                        </div>
                    <div class="acc-graph-container">
                        <div class="acc-graph">
                            <div class="acc-graph-title">Velocity vs. Time</div>
                            <div class="acc-graph-line" id="uniform-graph-line"></div>
                            <div class="acc-graph-axis-x">Time (s)</div>
                            <div class="acc-graph-axis-y">Velocity (m/s)</div>
                            <div class="acc-graph-point" id="uniform-graph-point"></div>
                            <div class="acc-graph-x-ticks">
                                <span>0</span>
                                <span>1</span>
                                <span>2</span>
                                <span>3</span>
                                <span>4</span>
                                <span>5</span>
                            </div>
                            <div class="acc-graph-y-ticks">
                                <span>50</span>
                                <span>40</span>
                                <span>30</span>
                                <span>20</span>
                                <span>10</span>
                                <span>0</span>
                            </div>
                        </div>
                    </div>
                    <div class="acc-data-panel">
                        <div class="acc-data-item">
                            <span class="acc-data-label">Time:</span>
                            <span class="acc-data-value" id="uniform-time">0 s</span>
                        </div>
                        <div class="acc-data-item">
                            <span class="acc-data-label">Velocity:</span>
                            <span class="acc-data-value" id="uniform-velocity">0 m/s</span>
                        </div>
                        <div class="acc-data-item">
                            <span class="acc-data-label">Acceleration:</span>
                            <span class="acc-data-value">+9.8 m/s² (constant)</span>
                        </div>
                        </div>
                    </div>

                <!-- Non-Uniform Acceleration Demo -->
                <div class="acc-demo-container" id="non-uniform-acc-demo">
                    <div class="acc-track">
                        <div class="acc-object" id="non-uniform-acc-object"></div>
                        </div>
                    <div class="acc-graph-container">
                        <div class="acc-graph">
                            <div class="acc-graph-title">Velocity vs. Time</div>
                            <div class="acc-graph-curved-line" id="non-uniform-graph-line">
                                <svg>
                                    <path id="nonUniformCurve" d="" />
                                </svg>
                            </div>
                            <div class="acc-graph-axis-x">Time (s)</div>
                            <div class="acc-graph-axis-y">Velocity (m/s)</div>
                            <div class="acc-graph-point" id="non-uniform-graph-point"></div>
                            <div class="acc-graph-x-ticks">
                                <span>0</span>
                                <span>1</span>
                                <span>2</span>
                                <span>3</span>
                                <span>4</span>
                                <span>5</span>
                            </div>
                            <div class="acc-graph-y-ticks">
                                <span>12</span>
                                <span>9</span>
                                <span>6</span>
                                <span>3</span>
                                <span>0</span>
                            </div>
                        </div>
                    </div>
                    <div class="acc-data-panel">
                        <div class="acc-data-item">
                            <span class="acc-data-label">Time:</span>
                            <span class="acc-data-value" id="non-uniform-time">0 s</span>
                        </div>
                        <div class="acc-data-item">
                            <span class="acc-data-label">Velocity:</span>
                            <span class="acc-data-value" id="non-uniform-velocity">0 m/s</span>
                        </div>
                        <div class="acc-data-item">
                            <span class="acc-data-label">Acceleration:</span>
                            <span class="acc-data-value" id="non-uniform-acceleration">0 m/s² (varying)</span>
                        </div>
                    </div>
                </div>
                </div>
            </div>

            <!-- Visual Motion Demo -->
            <div class="visual-motion-demo" id="visual-motion-demo">
                <div class="motion-scenarios">
                    <div class="scenario-card">
                        <div class="scenario-title">Uniform Acceleration</div>
                        <div class="motion-visualization">
                            <div class="moving-object" id="vm-uniform-object"></div>
                        </div>
                        <div class="velocity-graph">
                            <svg>
                                <!-- Axis lines -->
                                <line x1="30" y1="80" x2="95%" y2="80" stroke="#6b7280" stroke-width="1.5" />
                                <line x1="30" y1="10" x2="30" y2="80" stroke="#6b7280" stroke-width="1.5" />
                                
                                <!-- Axis labels -->
                                <text x="50%" y="95" class="axis-label">Time</text>
                                <text x="50%" y="-160" class="axis-label y-axis-label">Velocity</text>
                                
                                <!-- Graph path -->
                                <path class="graph-path" id="vm-uniform-path" stroke="#10b981" d="" />
                            </svg>
                        </div>
                        <div class="scenario-info">
                            Velocity increases steadily<br>
                            Graph: Straight line with constant slope
                        </div>
                    </div>

                    <div class="scenario-card">
                        <div class="scenario-title">Non-Uniform Acceleration</div>
                        <div class="motion-visualization">
                            <div class="moving-object" id="vm-nonuniform-object"></div>
                        </div>
                        <div class="velocity-graph">
                            <svg>
                                <!-- Axis lines -->
                                <line x1="30" y1="80" x2="95%" y2="80" stroke="#6b7280" stroke-width="1.5" />
                                <line x1="30" y1="10" x2="30" y2="80" stroke="#6b7280" stroke-width="1.5" />
                                
                                <!-- Axis labels -->
                                <text x="50%" y="95" class="axis-label">Time</text>
                                <text x="50%" y="-160" class="axis-label y-axis-label">Velocity</text>
                                
                                <!-- Graph path -->
                                <path class="graph-path" id="vm-nonuniform-path" stroke="#ef4444" d="" />
                            </svg>
                        </div>
                        <div class="scenario-info">
                            Velocity changes irregularly<br>
                            Graph: Curved line with varying slope
                        </div>
                    </div>
                </div>
            </div>

            <!-- Example Demo -->
            <div class="example-demo" id="example-demo">
                <div class="example-container">
                    <!-- Example 7.4 -->
                    <div class="example-card">
                        <div class="example-title">Example 7.4</div>
                        <div class="example-problem">
                            <strong>Problem:</strong> Starting from rest, Rahul paddles his bicycle to attain a velocity of 6 m/s in 30 s. 
                            Then he applies brakes such that the velocity comes down to 4 m/s in the next 5 s. 
                            Calculate the acceleration in both cases.
                        </div>

                        <div class="solution-sections-container">
                            <div class="solution-section">
                                <div class="case-title">Case 1: Accelerating from rest</div>
                                <div class="solution-steps">
                                    <div class="solution-step" id="ex1-case1-step1">
                                        <div class="step-label">Given:</div>
                                        <div>Initial velocity, u = 0 m/s</div>
                                        <div>Final velocity, v = 6 m/s</div>
                                        <div>Time, t = 30 s</div>
                                    </div>
                                    <div class="solution-step" id="ex1-case1-step2">
                                        <div class="step-label">Formula:</div>
                                        <div class="step-calculation">a = (v - u) / t</div>
                                    </div>
                                    <div class="solution-step" id="ex1-case1-step3">
                                        <div class="step-label">Calculation:</div>
                                        <div class="step-calculation">a = (6 - 0) / 30 = 6/30 = 0.2 m/s²</div>
                                    </div>
                                    <div class="final-answer" id="ex1-case1-answer">
                                        Acceleration = +0.2 m/s² (positive)
                                    </div>
                                </div>
                            </div>

                            <div class="solution-section">
                                <div class="case-title">Case 2: Applying brakes</div>
                                <div class="solution-steps">
                                    <div class="solution-step" id="ex1-case2-step1">
                                        <div class="step-label">Given:</div>
                                        <div>Initial velocity, u = 6 m/s</div>
                                        <div>Final velocity, v = 4 m/s</div>
                                        <div>Time, t = 5 s</div>
                                    </div>
                                    <div class="solution-step" id="ex1-case2-step2">
                                        <div class="step-label">Formula:</div>
                                        <div class="step-calculation">a = (v - u) / t</div>
                                    </div>
                                    <div class="solution-step" id="ex1-case2-step3">
                                        <div class="step-label">Calculation:</div>
                                        <div class="step-calculation">a = (4 - 6) / 5 = -2/5 = -0.4 m/s²</div>
                                    </div>
                                    <div class="final-answer" id="ex1-case2-answer">
                                        Acceleration = -0.4 m/s² (negative)
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity Demo -->
            <div class="activity-demo" id="activity-demo">
                <h2 style="color: #ef4444; text-align: center; margin-bottom: 30px;">Activity 7.8: Types of Acceleration</h2>
                
                <div class="activity-grid">
                    <div class="activity-card">
                        <div class="activity-title">Acceleration in Direction of Motion</div>
                        <div class="activity-type">
                            <div class="activity-type-title">(a) Positive Acceleration</div>
                            <div class="activity-example">
                                Example: A car starting from rest and speeding up on a highway. 
                                The acceleration helps the car move faster in its direction of motion.
                            </div>
                        </div>
                    </div>

                    <div class="activity-card">
                        <div class="activity-title">Acceleration Against Direction of Motion</div>
                        <div class="activity-type">
                            <div class="activity-type-title">(b) Negative Acceleration (Deceleration)</div>
                            <div class="activity-example">
                                Example: A moving car applying brakes to stop at a traffic signal. 
                                The acceleration opposes the motion, causing the car to slow down.
                            </div>
                        </div>
                    </div>

                    <div class="activity-card">
                        <div class="activity-title">Uniform Acceleration</div>
                        <div class="activity-type">
                            <div class="activity-type-title">(c) Constant Rate of Change</div>
                            <div class="activity-example">
                                Example: A ball dropped from a height falls with uniform acceleration due to gravity (9.8 m/s²). 
                                Its velocity increases by the same amount every second.
                            </div>
                        </div>
                    </div>

                    <div class="activity-card">
                        <div class="activity-title">Non-Uniform Acceleration</div>
                        <div class="activity-type">
                            <div class="activity-type-title">(d) Variable Rate of Change</div>
                            <div class="activity-example">
                                Example: A car moving through city traffic with frequent stops and starts. 
                                The acceleration varies as the driver responds to traffic conditions.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Questions Demo -->
            <div class="questions-demo" id="questions-demo">
                <h2 style="color: #ef4444; text-align: center; margin-bottom: 30px;">Practice Questions</h2>
                
                <div class="questions-carousel">
                    <div class="questions-container">
                        <!-- Question 1 -->
                        <div class="question-slide" id="question-slide-1">
                            <div class="question-card">
                                <div class="question-number">Q1.</div>
                                <div class="question-text" id="question-text-1">
                                    When will you say a body is in (i) uniform acceleration? (ii) non-uniform acceleration?
                                </div>
                                <button class="show-answer-btn" onclick="showAnswer(1)">Show Answer</button>
                                <div class="answer-section" id="answer-1">
                                    <strong>Answer:</strong><br>
                                    <strong>(i) Uniform acceleration:</strong> When a body travels in a straight line and its velocity increases or decreases by equal amounts in equal intervals of time.<br><br>
                                    <strong>(ii) Non-uniform acceleration:</strong> When a body's velocity changes at a non-uniform rate, i.e., by unequal amounts in equal intervals of time.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Question 2 -->
                        <div class="question-slide" id="question-slide-2">
                            <div class="question-card">
                                <div class="question-number">Q2.</div>
                                <div class="question-text" id="question-text-2">
                                    A bus decreases its speed from 80 km/h to 60 km/h in 5 s. Find the acceleration of the bus.
                                </div>
                                <button class="show-answer-btn" onclick="showAnswer(2)">Show Answer</button>
                                <div class="answer-section" id="answer-2">
                                    <strong>Solution:</strong><br>
                                    Given: u = 80 km/h = 80 × (5/18) = 22.22 m/s<br>
                                    v = 60 km/h = 60 × (5/18) = 16.67 m/s<br>
                                    t = 5 s<br><br>
                                    a = (v - u)/t = (16.67 - 22.22)/5 = -5.55/5 = -1.11 m/s²<br><br>
                                    <strong>Answer: -1.11 m/s²</strong> (negative because it's decelerating)
                                </div>
                            </div>
                        </div>
                        
                        <!-- Question 3 -->
                        <div class="question-slide" id="question-slide-3">
                            <div class="question-card">
                                <div class="question-number">Q3.</div>
                                <div class="question-text" id="question-text-3">
                                    A train starting from a railway station and moving with uniform acceleration attains a speed of 40 km/h in 10 minutes. Find its acceleration.
                                </div>
                                <button class="show-answer-btn" onclick="showAnswer(3)">Show Answer</button>
                                <div class="answer-section" id="answer-3">
                                    <strong>Solution:</strong><br>
                                    Given: u = 0 (starts from rest)<br>
                                    v = 40 km/h = 40 × (5/18) = 11.11 m/s<br>
                                    t = 10 minutes = 600 s<br><br>
                                    a = (v - u)/t = (11.11 - 0)/600 = 11.11/600 = 0.0185 m/s²<br><br>
                                    <strong>Answer: 0.0185 m/s²</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Carousel Navigation -->
                    <div class="carousel-nav">
                        <button id="prev-question" class="carousel-btn" disabled>Previous</button>
                        <button id="next-question" class="carousel-btn">Next</button>
                    </div>
                    
                    <!-- Carousel Indicators -->
                    <div class="carousel-indicator">
                        <div class="indicator-dot active" data-slide="0"></div>
                        <div class="indicator-dot" data-slide="1"></div>
                        <div class="indicator-dot" data-slide="2"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="controls-title" id="demo-title">Explore Acceleration</div>
            
            <div class="demo-buttons">
                <button class="demo-btn" onclick="playCompleteLesson()">📚 Complete Lesson</button>
                <button class="demo-btn" onclick="showAccelerationIntro()">🏃‍♂️ What is Acceleration?</button>
                <button class="demo-btn" onclick="showAccelerationFormula()">🧮 Acceleration Formula</button>
                <button class="demo-btn" onclick="showAccelerationTypes()">📊 Types of Acceleration</button>
                <button class="demo-btn" onclick="showVisualMotion()">👁️ Visual Motion</button>
                <button class="demo-btn" onclick="showExample()">📖 NCERT Example</button>
                <button class="demo-btn" onclick="showActivity()">🔬 Activity 7.8</button>
                <button class="demo-btn" onclick="showQuestions()">❓ Questions</button>
                <button class="demo-btn" onclick="resetAllClick()">🔄 Reset</button>
            </div>
        </div>

        <!-- Theory Section -->
        <div class="theory-section">
            <div class="concept-box">
                <div class="concept-box-title">Understanding Acceleration</div>
                <div class="concept-text">
                    Acceleration is the rate of change of velocity with time. It measures how quickly an object's velocity changes. 
                    When an object moves with changing velocity, it is said to be in accelerated motion.
                </div>
            </div>

            <div class="formula-highlight">
                <div class="main-formula">a = (v - u) / t</div>
                <div style="margin-top: 15px; line-height: 1.8; color: #e2e8f0;">
                    <strong>SI Unit:</strong> metre per second squared (m/s²)<br>
                    <strong>Nature:</strong> Vector quantity (has magnitude and direction)<br>
                    <strong>Sign Convention:</strong> Positive if in direction of velocity, negative if opposite
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                <div class="concept-box">
                    <div class="concept-box-title">Uniform Acceleration</div>
                    <div class="concept-text">
                        • Velocity changes by equal amounts in equal time intervals<br>
                        • Acceleration remains constant<br>
                        • Example: Freely falling body (g = 9.8 m/s²)<br>
                        • Graph: Straight line
                    </div>
                </div>
                <div class="concept-box">
                    <div class="concept-box-title">Non-Uniform Acceleration</div>
                    <div class="concept-text">
                        • Velocity changes by unequal amounts in equal time intervals<br>
                        • Acceleration varies with time<br>
                        • Example: Car in city traffic<br>
                        • Graph: Curved line
                    </div>
                </div>
            </div>

            <div class="concept-box">
                <div class="concept-box-title">Key Points to Remember</div>
                <div class="concept-text">
                    • Acceleration can be positive (speeding up) or negative (slowing down)<br>
                    • Negative acceleration is also called deceleration or retardation<br>
                    • In uniform motion, acceleration = 0 (velocity is constant)<br>
                    • Acceleration is a vector quantity - direction matters<br>
                    • Free fall acceleration on Earth = 9.8 m/s² (downward)<br>
                    • Units: m/s², km/h², cm/s²
                </div>
            </div>
        </div>
    </div>

    <script>
        // Voice Teacher System
        class PhysicsTeacher {
            constructor() {
                this.isEnabled = globalAudioEnabled;
                this.currentUtterance = null;
                this.settings = { rate: 0.9, pitch: 1.0, volume: 0.85 };
                this.isDestroyed = false;
            }

            async speak(text, delay = 0) {
                if (!this.isEnabled || !text || this.isDestroyed) return;
                
                return new Promise((resolve) => {
                    setTimeout(() => {
                        if (this.isDestroyed) {
                            resolve();
                            return;
                        }
                        this.stop();
                        const utterance = new SpeechSynthesisUtterance(text);
                        Object.assign(utterance, this.settings);
                        
                        utterance.onend = resolve;
                        utterance.onerror = resolve;
                        
                        this.currentUtterance = utterance;
                        speechSynthesis.speak(utterance);
                    }, delay);
                });
            }

            stop() {
                speechSynthesis.cancel();
                this.currentUtterance = null;
            }

            destroy() {
                this.isDestroyed = true;
                this.stop();
                this.currentUtterance = null;
                this.settings = null;
            }
        }

        // Global state management
        let globalAudioEnabled = true;
        let currentTeacher = null;
        let isPlaying = false;
        let animationTimeline = null;
        let currentDemoAborted = false;
        let activeAnimations = [];
        let currentRunId = 0;
        let currentTaskId = null; // Track which lesson is currently active

        // State management functions
        function createNewTimeline() {
            if (animationTimeline) {
                animationTimeline.kill();
                animationTimeline = null;
            }
            activeAnimations.forEach(anim => {
                if (anim) anim.kill();
            });
            activeAnimations = [];
            gsap.killTweensOf("*");
            
            const newTimeline = gsap.timeline();
            animationTimeline = newTimeline;
            return newTimeline;
        }

        function trackAnimation(animation) {
            if (animation) {
                activeAnimations.push(animation);
            }
            return animation;
        }

        function stopCurrentDemo() {
            currentDemoAborted = true;
            currentRunId++;
            
            // Stop teacher
            if (currentTeacher) {
                currentTeacher.destroy();
                currentTeacher = null;
            }
            
            // Kill all animations
            if (animationTimeline) {
                animationTimeline.kill();
                animationTimeline = null;
            }
            
            activeAnimations.forEach(anim => {
                if (anim) anim.kill();
            });
            activeAnimations = [];
            
            gsap.killTweensOf("*");
            
            // Hide all demos
            document.querySelectorAll('.acceleration-intro-demo, .acceleration-formula-demo, .acceleration-types-demo, .visual-motion-demo, .example-demo, .activity-demo, .questions-demo').forEach(demo => {
                demo.classList.remove('active');
            });
            
            isPlaying = false;
        }

        function shouldContinue(taskId) {
            // If no taskId is provided, just check if demo is aborted
            if (!taskId) {
                return !currentDemoAborted;
            }
            
            // Check if the current task matches the one that's supposed to be running
            // This prevents other lessons from continuing if user switches to a different lesson
            return !currentDemoAborted && currentTaskId === taskId;
        }

        function createNewTeacher(taskId) {
            if (currentTeacher) {
                currentTeacher.destroy();
                currentTeacher = null;
            }
            currentDemoAborted = false;
            
            // Set current task ID if provided
            if (taskId) {
                currentTaskId = taskId;
            }
            currentTeacher = new PhysicsTeacher();
            return currentTeacher;
        }

        // Initialize
        window.addEventListener('load', () => {
            const teacher = createNewTeacher();
            teacher.speak("Welcome to Rate of Change of Velocity! Let's explore acceleration - how velocity changes with time and understand different types of accelerated motion!");
        });

        // Complete Lesson
        async function playCompleteLesson() {
            stopCurrentDemo();
            isPlaying = true;
            setActiveButton(0);
            
            const teacher = createNewTeacher('complete-lesson');
            
            await resetAll();
            await wait(100);
            if (!shouldContinue('complete-lesson')) return;
            
            updateTitle("📚 Complete Acceleration Lesson");
            
            await teacher.speak("Let's begin our complete lesson on Rate of Change of Velocity, also known as Acceleration. We'll understand what acceleration is and how to calculate it.");
            if (!shouldContinue('complete-lesson')) return;
            
            // Start with acceleration introduction
            await showAccelerationIntroInternal(teacher);
            if (!shouldContinue('complete-lesson')) return;
            
            await wait(2000);
            
            // Show acceleration formula
            await teacher.speak("Now let's learn the mathematical formula for calculating acceleration.");
            if (!shouldContinue('complete-lesson')) return;
            await showAccelerationFormulaInternal(teacher);
            if (!shouldContinue('complete-lesson')) return;
            
            await wait(2000);
            
            // Show acceleration types
            await teacher.speak("Next, let's understand the different types of acceleration we encounter in everyday life.");
            if (!shouldContinue('complete-lesson')) return;
            await showAccelerationTypesInternal(teacher);
            if (!shouldContinue('complete-lesson')) return;
            
            await wait(2000);
            
            // Show visual motion demo
            await teacher.speak("Now let's visualize how different types of acceleration affect motion.");
            if (!shouldContinue('complete-lesson')) return;
            await showVisualMotionInternal(teacher);
            if (!shouldContinue('complete-lesson')) return;
            
            await wait(2000);
            
            // Show example
            await teacher.speak("Let's solve the NCERT example to apply our understanding of acceleration calculations.");
            if (!shouldContinue('complete-lesson')) return;
            await showExampleInternal(teacher);
            if (!shouldContinue('complete-lesson')) return;
            
            await wait(2000);
            
            // Show activity
            await teacher.speak("Finally, let's explore real-world examples of different types of acceleration through Activity 7.8.");
            if (!shouldContinue('complete-lesson')) return;
            await showActivityInternal(teacher);
            if (!shouldContinue('complete-lesson')) return;
            
            await teacher.speak("Excellent! You now understand acceleration - the rate of change of velocity, and can identify and calculate different types of acceleration!");
            
            isPlaying = false;
        }

        // Acceleration Introduction Demo
        async function showAccelerationIntro() {
            stopCurrentDemo();
            isPlaying = true;
            setActiveButton(1);
            
            const teacher = createNewTeacher('acceleration-intro');
            await showAccelerationIntroInternal(teacher);
            
            isPlaying = false;
        }

        async function showAccelerationIntroInternal(teacher) {
            await resetAll();
            await wait(50);
            // Get taskId from the current task
            const taskId = currentTaskId;
            if (!shouldContinue(taskId)) return;
            
            updateTitle("🏃‍♂️ Understanding Acceleration");
            
            document.getElementById('acceleration-intro-demo').classList.add('active');
            await wait(50);
            if (!shouldContinue(taskId)) return;
            
            await teacher.speak("Let's understand the difference between uniform and non-uniform motion, and how this leads to the concept of acceleration.");
            if (!shouldContinue(taskId)) return;
            
            // Animate uniform motion
            startUniformMotion();
            await wait(2000);
            
            await teacher.speak("In uniform motion, velocity remains constant with time. The change in velocity is zero, so acceleration is also zero.");
            if (!shouldContinue(taskId)) return;
            
            await wait(2000);
            
            // Animate non-uniform motion
            startNonUniformMotion();
            await wait(2000);
            
            await teacher.speak("In non-uniform motion, velocity varies with time. Since velocity changes, there is acceleration. Acceleration measures this rate of change of velocity.");
            if (!shouldContinue(taskId)) return;
            
            await wait(2000);
            
            await teacher.speak("This change in velocity per unit time is what we call acceleration - a fundamental concept in understanding motion!");
        }

        function startUniformMotion() {
            const object = document.getElementById('uniform-object');
            const track = document.querySelector('.motion-type:first-child .motion-track');
            const trackWidth = track.clientWidth;
            const objectWidth = object.clientWidth;
            const moveDistance = trackWidth - objectWidth - 20; // 5px minimal buffer
            
            trackAnimation(gsap.to(object, {
                duration: 4,
                x: moveDistance,
                ease: "none",
                repeat: -1,
                yoyo: true
            }));
        }

        function startNonUniformMotion() {
            const object = document.getElementById('non-uniform-object');
            const track = document.querySelector('.motion-type:last-child .motion-track');
            const trackWidth = track.clientWidth;
            const objectWidth = object.clientWidth;
            const moveDistance = trackWidth - objectWidth - 20; // 5px minimal buffer
            const velocityDisplay = document.getElementById('non-uniform-velocity');
            
            // Initial position and velocity
            let startPosition = parseFloat(gsap.getProperty(object, "x")) || 0;
            let currentVelocity = 2;
            let endVelocity = 8;
            velocityDisplay.textContent = `v = ${currentVelocity.toFixed(1)} m/s`;
            
            trackAnimation(gsap.to(object, {
                duration: 4,
                x: moveDistance,
                ease: "power2.out",
                repeat: -1,
                yoyo: true,
                onUpdate: function() {
                    // Get current position and calculate progress
                    const currentPosition = parseFloat(gsap.getProperty(object, "x"));
                    const totalDistance = moveDistance - startPosition;
                    const progress = (currentPosition - startPosition) / totalDistance;
                    
                    // Calculate velocity based on actual position and direction
                    if (this.yoyo && this._repeat % 2 !== 0) {
                        // Moving backward (yoyo phase)
                        currentVelocity = endVelocity - (endVelocity - 2) * progress;
                    } else {
                        // Moving forward
                        currentVelocity = 2 + (endVelocity - 2) * progress;
                    }
                    
                    velocityDisplay.textContent = `v = ${currentVelocity.toFixed(1)} m/s`;
                }
            }));
        }

        // Acceleration Formula Demo
        async function showAccelerationFormula() {
            stopCurrentDemo();
            isPlaying = true;
            setActiveButton(2);
            
            const teacher = createNewTeacher('acceleration-formula');
            await showAccelerationFormulaInternal(teacher);
            
            isPlaying = false;
        }

        async function showAccelerationFormulaInternal(teacher) {
            await resetAll();
            await wait(50);
            // Get taskId from the current task
            const taskId = currentTaskId;
            if (!shouldContinue(taskId)) return;
            
            updateTitle("🧮 Acceleration Formula and Calculator");
            
            document.getElementById('acceleration-formula-demo').classList.add('active');
            await wait(50);
            if (!shouldContinue()) return;
            
            await teacher.speak("The formula for acceleration is: acceleration equals the change in velocity divided by time taken. Let's use the interactive calculator to practice!");
            if (!shouldContinue()) return;
            
            await wait(2500);
            
            await teacher.speak("Remember, if acceleration is positive, the object is speeding up. If negative, it's slowing down. Try different values to see how acceleration changes!");
        }

        // Acceleration Calculator Function
        function calculateAcceleration() {
            const u = parseFloat(document.getElementById('initial-velocity').value);
            const v = parseFloat(document.getElementById('final-velocity').value);
            const t = parseFloat(document.getElementById('time-input').value);
            const resultDiv = document.getElementById('acceleration-result');
            
            if (isNaN(u) || isNaN(v) || isNaN(t) || t <= 0) {
                resultDiv.innerHTML = '⚠️ Please enter valid values';
                return;
            }
            
            const acceleration = ((v - u) / t).toFixed(2);
            const changeInVelocity = (v - u).toFixed(2);
            
            let interpretation = '';
            if (acceleration > 0) {
                interpretation = '(Speeding up)';
            } else if (acceleration < 0) {
                interpretation = '(Slowing down)';
            } else {
                interpretation = '(Constant velocity)';
            }
            
            resultDiv.innerHTML = `
                <div>
                    <strong>Acceleration:</strong> ${acceleration} m/s²<br>
                    <small>Change in velocity: ${changeInVelocity} m/s ${interpretation}</small>
                </div>
            `;
            
            if (currentTeacher) {
                currentTeacher.speak(`The acceleration is ${acceleration} meters per second squared. ${interpretation.replace(/[()]/g, '')}`);
            }
        }

        // Acceleration Types Demo
        async function showAccelerationTypes() {
            stopCurrentDemo();
            isPlaying = true;
            setActiveButton(3);
            
            const teacher = createNewTeacher('acceleration-types');
            await showAccelerationTypesInternal(teacher);
            
            isPlaying = false;
        }

        async function showAccelerationTypesInternal(teacher) {
            await resetAll();
            await wait(50);
            // Get taskId from the current task
            const taskId = currentTaskId;
            if (!shouldContinue(taskId)) return;
            
            updateTitle("📊 Types of Acceleration");
            
            document.getElementById('acceleration-types-demo').classList.add('active');
            await wait(50);
            if (!shouldContinue(taskId)) return;
            
            await teacher.speak("There are different types of acceleration based on direction and uniformity. Let's explore each type one by one.");
            if (!shouldContinue(taskId)) return;
            
            await wait(500);
            
            // Auto-play all types sequentially
            // In complete lesson mode, ensure we wait for all types to complete
            if (taskId === 'complete-lesson') {
                // This will play all types and wait for non-uniform to complete
                await playAccelerationTypesFrom('all');
            } else {
                // For standalone mode, just start the sequence
                playAccelerationTypesFrom('all');
            }
        }

        // Helper functions for Acceleration Types Demo
        function accTypeTab(which) {
            // Stop current sequence but start a new one from the selected tab
            currentDemoAborted = true;
            
            // Small delay to ensure previous sequence is properly stopped
            setTimeout(() => {
                // Reset abort flag for the new sequence
                currentDemoAborted = false;
                
                // Start playing from the selected tab
                if (which === 'positive') {
                    playAccelerationTypesFrom('positive');
                } else if (which === 'negative') {
                    playAccelerationTypesFrom('negative');
                } else if (which === 'uniform') {
                    playAccelerationTypesFrom('uniform');
                } else if (which === 'nonuniform') {
                    playAccelerationTypesFrom('nonuniform');
                }
            }, 100);
        }
        
        // Function to play acceleration types from a specific starting point
        async function playAccelerationTypesFrom(startType) {
            const localRunId = ++currentRunId;
            const isCompleteLesson = currentTaskId === 'complete-lesson';
            
            // Helper function to wait for speech completion
            async function waitForSpeechCompletion(speechPromise) {
                if (speechPromise instanceof Promise) {
                    // Wait for the speech to complete
                    await speechPromise;
                    
                    // Add a small buffer after speech completes
                    await wait(500);
                } else if (currentTeacher && currentTeacher.currentUtterance) {
                    // If we don't have a direct promise but have an utterance
                    await new Promise(resolve => {
                        const utterance = currentTeacher.currentUtterance;
                        if (utterance) {
                            const originalOnEnd = utterance.onend;
                            utterance.onend = (event) => {
                                if (originalOnEnd) originalOnEnd(event);
                                resolve();
                            };
                            
                            const originalOnError = utterance.onerror;
                            utterance.onerror = (event) => {
                                if (originalOnError) originalOnError(event);
                                resolve();
                            };
                        } else {
                            // If no utterance is found, resolve after a short delay
                            setTimeout(resolve, 1000);
                        }
                    });
                    
                    // Add a small buffer after speech completes
                    await wait(500);
                } else {
                    // If no speech is detected, wait for a minimum animation time
                    await wait(3000);
                }
                
                return !currentDemoAborted && shouldContinue() && localRunId === currentRunId;
            }
            
            // Show the first selected type immediately
            if (startType === 'positive' || startType === 'all') {
                const speechPromise = showPositiveAcceleration();
                // Wait for minimum animation time
                await wait(2000);
                if (!shouldContinue() || localRunId !== currentRunId) return;
                
                // Wait for speech to complete
                if (!await waitForSpeechCompletion(speechPromise)) return;
            }
            
            // Continue with negative if starting from positive or all
            if (startType === 'negative' || startType === 'positive' || startType === 'all') {
                const speechPromise = showNegativeAcceleration();
                // Wait for minimum animation time
                await wait(2000);
                if (!shouldContinue() || localRunId !== currentRunId) return;
                
                // Wait for speech to complete
                if (!await waitForSpeechCompletion(speechPromise)) return;
            }
            
            // Continue with uniform if starting from negative, positive, or all
            if (startType === 'uniform' || startType === 'negative' || startType === 'positive' || startType === 'all') {
                const speechPromise = showUniformAcceleration();
                // Wait for minimum animation time
                await wait(2000);
                if (!shouldContinue() || localRunId !== currentRunId) return;
                
                // Wait for speech to complete
                if (!await waitForSpeechCompletion(speechPromise)) return;
            }
            
            // Always show non-uniform as the last step
            const nonUniformSpeechPromise = showNonUniformAcceleration();
            
            // If this is part of the complete lesson, we need to wait for non-uniform to finish
            // before moving to the next section
            if (isCompleteLesson) {
                // Wait for minimum animation time
                await wait(2000);
                if (!shouldContinue() || localRunId !== currentRunId) return;
                
                // Wait for speech to complete
                await waitForSpeechCompletion(nonUniformSpeechPromise);
            }
        }

        async function playAllAccelerationTypesSequentially() {
            // Use our new function to play all acceleration types in sequence
            await playAccelerationTypesFrom('all');
        }
        
        // Positive Acceleration Demo
        function showPositiveAcceleration() {
            // Clear previous demo state
            resetAccelerationDemos();
            
            // Set active button
            setActiveAccTypeButton("positive-acc-btn");
            
            // Show current demo
            document.getElementById('positive-acc-demo').classList.add('active');
            
            // Update info panel
            document.getElementById('acc-type-title').textContent = "Positive Acceleration";
            document.getElementById('acc-info-text').textContent = 
                "When acceleration is in the same direction as velocity, the object speeds up. " + 
                "This is called positive acceleration. Example: A car accelerating from rest.";
            
            // Run animation
            const object = document.getElementById('positive-acc-object');
            const velocityVector = document.getElementById('positive-velocity-vector');
            const velocityDisplay = document.getElementById('positive-velocity');
            const track = document.querySelector('#positive-acc-demo .acc-track');
            const trackWidth = track.clientWidth;
            
            // Set initial state
            gsap.set(object, { left: 20 });
            gsap.set(velocityVector, { 
                left: 40, 
                width: 0,
                opacity: 1
            });
            
            // Create animation
            const posAccTimeline = gsap.timeline({
                repeat: -1,
                repeatDelay: 1,
                onRepeat: () => {
                    // Reset for next animation cycle
                    gsap.set(object, { left: 20 });
                    gsap.set(velocityVector, { 
                        left: 40, 
                        width: 0
                    });
                }
            });
            
            posAccTimeline
                .to(object, {
                    duration: 4,
                    left: trackWidth - 108,
                    ease: "power1.in",
                    onUpdate: function() {
                        const progress = this.progress();
                        const velocity = Math.round(progress * 20 * 10) / 10;
                        velocityDisplay.textContent = `${velocity.toFixed(1)} m/s`;
                        
                        // Update velocity vector position and width
                        const currentLeft = parseFloat(object.style.left) || 20;
                        const vectorWidth = Math.max(10, velocity * 5);
                        gsap.set(velocityVector, { 
                            left: currentLeft,
                            width: vectorWidth
                        });
                    }
                });
            
            // Speak explanation if teacher is available
            if (currentTeacher && currentTeacher.speak) {
                return currentTeacher.speak("Positive acceleration occurs when the acceleration is in the same direction as the object's motion. This makes the object speed up - like a car pressing the gas pedal.");
            }
            
            // Track animation to allow cleanup
            trackAnimation(posAccTimeline);
        }
        
        // Negative Acceleration Demo
        function showNegativeAcceleration() {
            // Clear previous demo state
            resetAccelerationDemos();
            
            // Set active button
            setActiveAccTypeButton("negative-acc-btn");
            
            // Show current demo
            document.getElementById('negative-acc-demo').classList.add('active');
            
            // Update info panel
            document.getElementById('acc-type-title').textContent = "Negative Acceleration";
            document.getElementById('acc-info-text').textContent = 
                "When acceleration is opposite to the direction of velocity, the object slows down. " + 
                "This is called negative acceleration or deceleration. Example: A car applying brakes.";
            
            // Run animation
            const object = document.getElementById('negative-acc-object');
            const velocityVector = document.getElementById('negative-velocity-vector');
            const forceVector = document.getElementById('negative-force-vector');
            const velocityDisplay = document.getElementById('negative-velocity');
            const accelerationDisplay = document.getElementById('negative-acceleration');
            const track = document.querySelector('#negative-acc-demo .acc-track');
            const trackWidth = track.clientWidth;
            
            // Set initial state
            gsap.set(object, { left: 20 });
            gsap.set(velocityVector, { 
                left: 40, 
                width: 100,
                opacity: 1
            });
            gsap.set(forceVector, {
                left: 40,
                width: 50,
                opacity: 1
            });
            velocityDisplay.textContent = "10.0 m/s";
            
            // Create animation
            const negAccTimeline = gsap.timeline({
                repeat: -1,
                repeatDelay: 1,
                onRepeat: () => {
                    // Reset for next animation cycle
                    gsap.set(object, { left: 20 });
                    gsap.set(velocityVector, { 
                        left: 40, 
                        width: 100
                    });
                    velocityDisplay.textContent = "10.0 m/s";
                }
            });
            
            negAccTimeline
                .to(object, {
                    duration: 5,
                    left: trackWidth - 60,
                    ease: "power1.out",
                    onUpdate: function() {
                        const progress = this.progress();
                        const velocity = Math.max(0, 10 - progress * 10);
                        velocityDisplay.textContent = `${velocity.toFixed(1)} m/s`;
                        
                        // Update velocity vector
                        const vectorWidth = Math.max(0, 100 - progress * 100);
                        gsap.set(velocityVector, { 
                            left: parseFloat(object.style.left) + 40,
                            width: vectorWidth
                        });
                    }
                });
            
            // Speak explanation if teacher is available
            if (currentTeacher && currentTeacher.speak) {
                return currentTeacher.speak("Negative acceleration occurs when acceleration opposes motion direction. This causes objects to slow down - like when brakes are applied to a moving car.");
            }
            
            // Track animation to allow cleanup
            trackAnimation(negAccTimeline);
        }

        // Visual Motion Demo
        async function showVisualMotion() {
            stopCurrentDemo();
            isPlaying = true;
            setActiveButton(4);
            
            const teacher = createNewTeacher('visual-motion');
            await showVisualMotionInternal(teacher);
            
            isPlaying = false;
        }

        async function showVisualMotionInternal(teacher) {
            await resetAll();
            await wait(50);
            // Get taskId from the current task
            const taskId = currentTaskId;
            if (!shouldContinue(taskId)) return;
            
            updateTitle("👁️ Visual Motion Demonstration");
            
            document.getElementById('visual-motion-demo').classList.add('active');
            await wait(50);
            if (!shouldContinue(taskId)) return;
            
            await teacher.speak("Let's visualize the difference between uniform and non-uniform acceleration with moving objects and velocity graphs.");
            if (!shouldContinue(taskId)) return;
            
            // Create timeline for synchronized animations
            const motionTimeline = gsap.timeline({repeat: -1, repeatDelay: 0.5});
            
            // Animate uniform acceleration object
            const uniformObject = document.getElementById('vm-uniform-object');
            const uniformTrack = document.querySelector('.scenario-card:first-child .motion-visualization');
            const uniformTrackWidth = uniformTrack.clientWidth;
            
            // Uniform acceleration graph path
            const vmUniformPath = document.getElementById('vm-uniform-path');
            
            motionTimeline.to(uniformObject, {
                duration: 4,
                x: uniformTrackWidth - 50,
                ease: "power1.in",
                onUpdate: function() {
                    const progress = this.progress();
                    // Draw straight line with constant slope across the graph
                    const svg = vmUniformPath.closest('svg');
                    const w = svg.clientWidth || 1;
                    const h = svg.clientHeight || 1;
                    const x0 = 30; // Start at x-axis
                    const y0 = 80; // Start at x-axis height
                    const x1 = 30 + (w - 50) * progress; // Account for axis margin
                    const y1 = 80 - 70 * progress; // Move up as progress increases
                    const d = `M ${x0} ${y0} L ${x1} ${y1}`;
                    vmUniformPath.setAttribute('d', d);
                }
            }).to(uniformObject, {
                duration: 1,
                x: 0,
                ease: "none",
                onComplete: function() {
                    vmUniformPath.setAttribute('d', '');
                }
            });
            
            // Animate non-uniform acceleration
            const nonUniformObject = document.getElementById('vm-nonuniform-object');
            const nonUniformTrack = document.querySelector('.scenario-card:last-child .motion-visualization');
            const nonUniformTrackWidth = nonUniformTrack.clientWidth;
            
            // Non-uniform acceleration graph path
            const vmNonUniformPath = document.getElementById('vm-nonuniform-path');
            
            // Create a separate timeline for non-uniform motion
            const nonUniformTimeline = gsap.timeline({repeat: -1, repeatDelay: 0.5});
            
            nonUniformTimeline.to(nonUniformObject, {
                duration: 4,
                x: nonUniformTrackWidth - 50,
                ease: "power3.inOut",
                onUpdate: function() {
                    const progress = this.progress();
                    const svg = vmNonUniformPath.closest('svg');
                    const w = svg.clientWidth || 1;
                    const h = svg.clientHeight || 1;
                    const x0 = 30; // Start at x-axis
                    const yBaseBottom = 80; // Start at x-axis height
                    const yBaseTop = 10; // Top margin
                    const samples = Math.max(3, Math.floor(40 * progress));
                    const pts = [];
                    for (let i = 0; i <= samples; i++) {
                        const p = samples === 0 ? 0 : i / samples;
                        const x = x0 + (w - 50) * p; // Account for axis margin
                        const t = p;
                        // Same bell-shaped curve used earlier: 4t(1-t)
                        const yNorm = 4 * t * (1 - t);
                        const y = yBaseBottom - (yBaseBottom - yBaseTop) * yNorm;
                        pts.push([x, y]);
                    }
                    if (pts.length) {
                        const d = `M ${pts[0][0]} ${pts[0][1]} ` + pts.slice(1).map(pt => `L ${pt[0]} ${pt[1]}`).join(' ');
                        vmNonUniformPath.setAttribute('d', d);
                    }
                }
            }).to(nonUniformObject, {
                duration: 1,
                x: 0,
                ease: "none",
                onComplete: function() {
                    vmNonUniformPath.setAttribute('d', '');
                }
            });
            
            // Track animations to allow cleanup
            trackAnimation(motionTimeline);
            trackAnimation(nonUniformTimeline);
            
            await wait(2000);
            
            await teacher.speak("Notice how uniform acceleration produces steady, predictable motion, while non-uniform acceleration creates irregular motion patterns. The graphs show these differences clearly!");
        }

        // Example Demo
        async function showExample() {
            stopCurrentDemo();
            isPlaying = true;
            setActiveButton(5);
            
            const teacher = createNewTeacher('example');
            await showExampleInternal(teacher);
            
            isPlaying = false;
        }

        async function showExampleInternal(teacher) {
            await resetAll();
            await wait(50);
            // Get taskId from the current task
            const taskId = currentTaskId;
            if (!shouldContinue(taskId)) return;
            
            updateTitle("📖 NCERT Example 7.4");
            
            document.getElementById('example-demo').classList.add('active');
            await wait(50);
            if (!shouldContinue(taskId)) return;
            
            await teacher.speak("Let's solve Example 7.4 about Rahul's bicycle. This problem has two parts - accelerating from rest and then braking.");
            if (!shouldContinue(taskId)) return;
            
            await wait(2000);
            
            // Case 1: Accelerating
            await teacher.speak("Case 1: Rahul accelerates from rest to 6 meters per second in 30 seconds.");
            if (!shouldContinue(taskId)) return;
            
            await animateExampleSteps('ex1-case1', 3);
            if (!shouldContinue(taskId)) return;
            
            await wait(2000);
            
            // Case 2: Braking
            await teacher.speak("Case 2: He then applies brakes, reducing speed from 6 to 4 meters per second in 5 seconds.");
            if (!shouldContinue()) return;
            
            await animateExampleSteps('ex1-case2', 3);
            if (!shouldContinue()) return;
            
            await wait(1500);
            
            await teacher.speak("Notice that the first case gives positive acceleration because he's speeding up, while the second case gives negative acceleration because he's slowing down!");
        }

        async function animateExampleSteps(caseId, stepCount) {
            // Make all steps visible immediately
            for (let i = 1; i <= stepCount; i++) {
                const stepElement = document.getElementById(`${caseId}-step${i}`);
                if (stepElement) {
                    stepElement.classList.add('show');
                }
            }
            
            // Make answer visible immediately
            const answerElement = document.getElementById(`${caseId}-answer`);
            if (answerElement) {
                gsap.set(answerElement, {
                    opacity: 1,
                    scale: 1
                });
            }
            
            // Wait a short time for teacher narration
            await wait(500);
        }

        // Activity Demo
        async function showActivity() {
            stopCurrentDemo();
            isPlaying = true;
            setActiveButton(6);
            
            const teacher = createNewTeacher('activity');
            await showActivityInternal(teacher);
            
            isPlaying = false;
        }

        async function showActivityInternal(teacher) {
            await resetAll();
            await wait(50);
            // Get taskId from the current task
            const taskId = currentTaskId;
            if (!shouldContinue(taskId)) return;
            
            updateTitle("🔬 Activity 7.8: Real-World Acceleration");
            
            document.getElementById('activity-demo').classList.add('active');
            await wait(50);
            if (!shouldContinue(taskId)) return;
            
            await teacher.speak("Activity 7.8 asks us to identify real-world examples of different types of acceleration. Let's explore each type with practical examples.");
            if (!shouldContinue(taskId)) return;
            
            await wait(2500);
            
            await teacher.speak("Positive acceleration: like a car speeding up on a highway. Negative acceleration: like braking at a traffic light. Uniform acceleration: like a falling object. Non-uniform acceleration: like driving in city traffic.");
            if (!shouldContinue(taskId)) return;
            
            await wait(3500);
            
            await teacher.speak("These examples help us understand that acceleration is everywhere in our daily lives, from the moment we start walking to when we ride in vehicles!");
        }

        // Questions Demo
        async function showQuestions() {
            stopCurrentDemo();
            isPlaying = true;
            setActiveButton(7);
            
            const teacher = createNewTeacher('questions');
            await showQuestionsInternal(teacher);
            
            isPlaying = false;
        }

        async function showQuestionsInternal(teacher) {
            await resetAll();
            await wait(50);
            // Get taskId from the current task
            const taskId = currentTaskId;
            if (!shouldContinue(taskId)) return;
            
            updateTitle("❓ Practice Questions");
            
            document.getElementById('questions-demo').classList.add('active');
            
            // Initialize the carousel
            initQuestionsCarousel();
            
            await wait(50);
            if (!shouldContinue(taskId)) return;
            
            await teacher.speak("Let's test your understanding with practice questions. Click 'Show Answer' to see detailed solutions with step-by-step calculations.");
            if (!shouldContinue(taskId)) return;
            
            // Narrate the first question
            const questionText = document.getElementById('question-text-1').textContent.trim();
            await teacher.speak(`Question 1: ${questionText}`);
        }

        // Questions Carousel
        let currentQuestionIndex = 0;
        const totalQuestions = 3;
        
        // Initialize carousel
        function initQuestionsCarousel() {
            // Set first slide as active
            document.getElementById('question-slide-1').classList.add('active');
            
            // Setup navigation buttons
            document.getElementById('prev-question').addEventListener('click', showPreviousQuestion);
            document.getElementById('next-question').addEventListener('click', showNextQuestion);
            
            // Setup indicator dots
            document.querySelectorAll('.indicator-dot').forEach((dot, index) => {
                dot.addEventListener('click', () => goToQuestion(index));
            });
        }
        
        function showNextQuestion() {
            if (currentQuestionIndex < totalQuestions - 1) {
                goToQuestion(currentQuestionIndex + 1);
            }
        }
        
        function showPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                goToQuestion(currentQuestionIndex - 1);
            }
        }
        
        function goToQuestion(index) {
            // Hide all slides
            document.querySelectorAll('.question-slide').forEach(slide => {
                slide.classList.remove('active');
            });
            
            // Show the selected slide
            document.getElementById(`question-slide-${index + 1}`).classList.add('active');
            
            // Update indicator dots
            document.querySelectorAll('.indicator-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
            
            // Update navigation buttons
            document.getElementById('prev-question').disabled = index === 0;
            document.getElementById('next-question').disabled = index === totalQuestions - 1;
            
            // Update current index
            currentQuestionIndex = index;
            
            // Narrate the current question
            if (currentTeacher && currentTeacher.speak) {
                const questionText = document.getElementById(`question-text-${index + 1}`).textContent.trim();
                currentTeacher.speak(`Question ${index + 1}: ${questionText}`);
            }
            
            // Reset answer visibility
            document.querySelectorAll('.answer-section').forEach(section => {
                section.classList.remove('show');
            });
        }
        
        // Show answer function
        function showAnswer(questionNumber) {
            const answerSection = document.getElementById(`answer-${questionNumber}`);
            answerSection.classList.add('show');
            
            if (currentTeacher) {
                const answers = {
                    1: "Uniform acceleration occurs when velocity changes by equal amounts in equal time intervals. Non-uniform acceleration occurs when velocity changes by unequal amounts in equal time intervals.",
                    2: "The bus has an acceleration of negative 1.11 meters per second squared, indicating it is decelerating.",
                    3: "The train has an acceleration of 0.0185 meters per second squared as it speeds up from rest."
                };
                currentTeacher.speak(answers[questionNumber]);
            }
        }

        // Helper Functions
        // Uniform Acceleration Demo
        function showUniformAcceleration() {
            // Clear previous demo state
            resetAccelerationDemos();
            
            // Set active button
            setActiveAccTypeButton("uniform-acc-btn");
            
            // Show current demo
            document.getElementById('uniform-acc-demo').classList.add('active');
            
            // Update info panel
            document.getElementById('acc-type-title').textContent = "Uniform Acceleration";
            document.getElementById('acc-info-text').textContent = 
                "When velocity changes by equal amounts in equal time intervals, it's called uniform acceleration. " + 
                "The velocity-time graph is a straight line. Example: Free-falling objects under gravity.";
            
            // Run animation
            const object = document.getElementById('uniform-acc-object');
            const graphPoint = document.getElementById('uniform-graph-point');
            const timeDisplay = document.getElementById('uniform-time');
            const velocityDisplay = document.getElementById('uniform-velocity');
            const track = document.querySelector('#uniform-acc-demo .acc-track');
            const trackWidth = track.clientWidth;
            const graph = document.querySelector('#uniform-acc-demo .acc-graph');
            const graphWidth = graph.clientWidth - 50;
            const graphHeight = graph.clientHeight - 40;
            
            // Set initial state
            gsap.set(object, { left: 20 });
            gsap.set(graphPoint, { 
                left: 40,
                bottom: 30
            });
            
            // Create animation
            const uniformAccTimeline = gsap.timeline({
                repeat: -1,
                repeatDelay: 1,
                onRepeat: () => {
                    // Reset for next animation cycle
                    gsap.set(object, { left: 20 });
                    gsap.set(graphPoint, { 
                        left: 40,
                        bottom: 30
                    });
                }
            });
            
            uniformAccTimeline
                .to([object, graphPoint], {
                    duration: 5,
                    left: function(i) {
                        return i === 0 ? trackWidth - 60 : graphWidth + 40;
                    },
                    bottom: function(i) {
                        return i === 0 ? null : 30 + graphHeight * 0.7;
                    },
                    ease: "none",
                    onUpdate: function() {
                        const progress = this.progress();
                        const time = (progress * 5).toFixed(1);
                        const velocity = (progress * 9.8 * 5).toFixed(1);
                        
                        timeDisplay.textContent = `${time} s`;
                        velocityDisplay.textContent = `${velocity} m/s`;
                    }
                });
            
            // Speak explanation if teacher is available
            if (currentTeacher && currentTeacher.speak) {
                return currentTeacher.speak("Uniform acceleration means velocity changes at a constant rate. A freely falling object accelerates uniformly at 9.8 meters per second squared. Notice the straight line on the velocity-time graph.");
            }
            
            // Track animation to allow cleanup
            trackAnimation(uniformAccTimeline);
        }
        
        // Non-Uniform Acceleration Demo
        function showNonUniformAcceleration() {
            // Clear previous demo state
            resetAccelerationDemos();
            
            // Set active button
            setActiveAccTypeButton("non-uniform-acc-btn");
            
            // Show current demo
            document.getElementById('non-uniform-acc-demo').classList.add('active');
            
            // Update info panel
            document.getElementById('acc-type-title').textContent = "Non-Uniform Acceleration";
            document.getElementById('acc-info-text').textContent = 
                "When velocity changes by unequal amounts in equal time intervals, it's called non-uniform acceleration. " + 
                "The velocity-time graph is curved. Example: A vehicle in city traffic.";
            
            // Run animation
            const object = document.getElementById('non-uniform-acc-object');
            const graphPoint = document.getElementById('non-uniform-graph-point');
            const timeDisplay = document.getElementById('non-uniform-time');
            const velocityDisplay = document.getElementById('non-uniform-velocity');
            const accelerationDisplay = document.getElementById('non-uniform-acceleration');
            const track = document.querySelector('#non-uniform-acc-demo .acc-track');
            const trackWidth = track.clientWidth;
            const graph = document.querySelector('#non-uniform-acc-demo .acc-graph');
            const graphWidth = graph.clientWidth - 50;
            
            // Set initial state
            gsap.set(object, { left: 20 });
            gsap.set(graphPoint, { 
                left: 40,
                bottom: 30
            });
            
            // Create animation
            const nonUniformAccTimeline = gsap.timeline({
                repeat: -1,
                repeatDelay: 1,
                onRepeat: () => {
                    // Reset for next animation cycle
                    gsap.set(object, { left: 20 });
                    gsap.set(graphPoint, { 
                        left: 40,
                        bottom: 30
                    });
                }
            });
            
            nonUniformAccTimeline
                .to(object, {
                    duration: 5,
                    left: trackWidth - 60,
                    ease: "power2.inOut",
                    onUpdate: function() {
                        const progress = this.progress();
                        const time = (progress * 5).toFixed(1);
                        
                        // For non-uniform acceleration, velocity changes non-linearly
                        // Using the derivative of power2.inOut position function to match the graph
                        const tNorm = progress;
                        const velocity = (12 * (4 * tNorm * (1 - tNorm))).toFixed(1);
                        
                        // Calculate approximate instantaneous acceleration
                        const dt = 0.01;
                        const v1 = 12 * (4 * tNorm * (1 - tNorm));
                        const v2 = 12 * (4 * (tNorm + dt) * (1 - (tNorm + dt)));
                        const acceleration = ((v2 - v1) / dt).toFixed(1);
                        
                        timeDisplay.textContent = `${time} s`;
                        velocityDisplay.textContent = `${velocity} m/s`;
                        accelerationDisplay.textContent = `${acceleration} m/s² (varying)`;
                        
                        // Update graph point position
                        const graphX = 40 + progress * graphWidth;
                        
                        // Match the velocity curve to the actual motion of the object
                        // Using power2.inOut easing function approximation
                        const graphY = 30 + 70 * (4 * tNorm * (1 - tNorm));
                        
                        gsap.set(graphPoint, { 
                            left: graphX,
                            bottom: graphY
                        });

                        // Draw/update SVG curve to match the moving point path
                        const svg = document.querySelector('#non-uniform-graph-line svg');
                        const path = document.getElementById('nonUniformCurve');
                        if (svg && path) {
                            const bboxWidth = svg.clientWidth || 1;
                            const bboxHeight = svg.clientHeight || 1;
                            const samples = 40; // smooth curve
                            const pts = [];
                            for (let i = 0; i <= samples; i++) {
                                const p = i / samples;
                                const x = p * bboxWidth;
                                const y = bboxHeight - (bboxHeight * (70 * (4 * p * (1 - p)) / 80));
                                pts.push([x, y]);
                            }
                            // Convert to SVG path string using simple polyline -> path with L commands
                            if (pts.length) {
                                const d = `M ${pts[0][0]} ${pts[0][1]} ` + pts.slice(1).map(pt => `L ${pt[0]} ${pt[1]}`).join(' ');
                                path.setAttribute('d', d);
                            }
                        }
                    }
                });
            
            // Speak explanation if teacher is available
            if (currentTeacher && currentTeacher.speak) {
                return currentTeacher.speak("Non-uniform acceleration means the rate of change of velocity varies with time. A vehicle moving in city traffic experiences this type of acceleration. Notice the curved line on the velocity-time graph.");
            }
            
            // Track animation to allow cleanup
            trackAnimation(nonUniformAccTimeline);
        }
        
        // Helper function to reset acceleration demos
        function resetAccelerationDemos() {
            // Hide all demos
            document.querySelectorAll('.acc-demo-container').forEach(demo => {
                demo.classList.remove('active');
            });
            
            // Reset all buttons
            document.querySelectorAll('.acc-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Kill any active animations
            gsap.killTweensOf(".acc-object, .acc-graph-point");
        }
        
        // Helper to set active acceleration type button
        function setActiveAccTypeButton(id) {
            document.querySelectorAll('.acc-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(id).classList.add('active');
        }

        async function resetAll() {
            if (animationTimeline) {
                animationTimeline.kill();
                animationTimeline = null;
            }
            gsap.killTweensOf("*");
            
            activeAnimations.forEach(anim => {
                if (anim) anim.kill();
            });
            activeAnimations = [];
            
            if (currentTeacher) {
                currentTeacher.stop();
            }
            
            // Hide all demos
            document.querySelectorAll('.acceleration-intro-demo, .acceleration-formula-demo, .acceleration-types-demo, .visual-motion-demo, .example-demo, .activity-demo, .questions-demo').forEach(demo => {
                demo.classList.remove('active');
            });
            
            updateTitle("Explore Acceleration");
            
            // Reset calculator
            document.getElementById('initial-velocity').value = '';
            document.getElementById('final-velocity').value = '';
            document.getElementById('time-input').value = '';
            document.getElementById('acceleration-result').innerHTML = 'Enter values to calculate acceleration';
            
            // Reset motion objects
            gsap.set(['#uniform-object', '#non-uniform-object', '#positive-acc-object', '#negative-acc-object', '#uniform-acc-object', '#non-uniform-acc-object', '#vm-uniform-object', '#vm-nonuniform-object'], { x: 0, left: '20px' });
            
            // Reset graph lines
            gsap.set(['.graph-line'], { width: '0%' });
            // Reset SVG graph paths
            ['#nonUniformCurve', '#vm-uniform-path', '#vm-nonuniform-path'].forEach(selector => {
                const el = document.querySelector(selector);
                if (el) {
                    el.setAttribute('d', '');
                }
            });
            
            // Reset velocity display
            document.getElementById('non-uniform-velocity').textContent = 'v = 2 → 8 m/s';
            
            // Reset example steps - but keep them visible
            document.querySelectorAll('.solution-step').forEach(step => {
                step.classList.add('show');
                gsap.set(step, { opacity: 1, scale: 1 });
            });
            
            // Make final answers visible
            document.querySelectorAll('.final-answer').forEach(answer => {
                gsap.set(answer, { opacity: 1, scale: 1 });
            });
            
            // Reset answer sections
            document.querySelectorAll('.answer-section').forEach(section => {
                section.classList.remove('show');
            });
            
            // Reset questions carousel
            currentQuestionIndex = 0;
            document.querySelectorAll('.question-slide').forEach((slide, index) => {
                slide.classList.toggle('active', index === 0);
            });
            document.querySelectorAll('.indicator-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === 0);
            });
            
            // Reset acceleration type demos
            resetAccelerationDemos();
            
            await wait(500);
        }

        function updateTitle(title) {
            document.getElementById('demo-title').textContent = title;
        }

        function setActiveButton(index) {
            document.querySelectorAll('.demo-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === index);
            });
        }

        function wait(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Reset Button Handler
        async function resetAllClick() {
            stopCurrentDemo();
            isPlaying = false;
            await resetAll();
        }

        // Audio Control
        document.getElementById('mute-btn').addEventListener('click', () => {
            globalAudioEnabled = !globalAudioEnabled;
            document.getElementById('mute-btn').classList.toggle('muted', !globalAudioEnabled);
            
            if (!globalAudioEnabled && currentTeacher) {
                currentTeacher.stop();
            }
        });

        // Enter key support for calculator
        ['initial-velocity', 'final-velocity', 'time-input'].forEach(id => {
            document.getElementById(id).addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    calculateAcceleration();
                }
            });
        });
    </script>
</body>
</html>